<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">
<meta name="dcterms.date" content="2023-07-08">
<meta name="description" content="Les expressions régulières fournissent un cadre très pratique pour manipuler de manière flexible des données textuelles. Elles sont très utiles notamment pour les tâches de traitement naturel du langage (NLP) ou le nettoyage de données textuelles.">

<title>Python pour la data science - Maîtriser les expressions régulières</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/manipulation/07_dask.html" rel="next">
<link href="../../content/manipulation/04c_API_TP.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #e9f3fa;
      }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Python pour la data science - Maîtriser les expressions régulières">
<meta name="twitter:description" content="Les expressions régulières fournissent un cadre très pratique pour manipuler
de manière flexible des données textuelles. Elles sont très utiles
notamment pour les tâches de traitement naturel du langage (NLP)
ou le nettoyage de données textuelles.">
<meta name="twitter:image" content="https://d2h1bfu6zrdxog.cloudfront.net/wp-content/uploads/2022/04/img_625491e9ce092.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="citation_title" content="Python pour la data science">
<meta name="citation_author" content="Lino Galiana">
<meta name="citation_publication_date" content="2023">
<meta name="citation_cover_date" content="2023">
<meta name="citation_year" content="2023">
<meta name="citation_online_date" content="2023-07-08">
<meta name="citation_fulltext_html_url" content="https://pythonds.linogaliana.fr/">
<meta name="citation_doi" content="10.5281/zenodo.8229676">
<meta name="citation_language" content="en">
</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Python pour la data science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="../../content/getting-started/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/01_installation.html" rel="" target="">
 <span class="dropdown-text">Configuration de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/02_DS_environment.html" rel="" target="">
 <span class="dropdown-text">L’environnement Python pour la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/03_data_analysis.html" rel="" target="">
 <span class="dropdown-text">Comment aborder un jeu de données</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/04_python_practice.html" rel="" target="">
 <span class="dropdown-text">Bonne pratique de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/05_rappels_types.html" rel="" target="">
 <span class="dropdown-text">Quelques rappels sur les principes de base de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/06_rappels_fonctions.html" rel="" target="">
 <span class="dropdown-text">Modules, tests, boucles, fonctions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/07_rappels_classes.html" rel="" target="">
 <span class="dropdown-text">Les classes en Python</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manipuler" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Manipuler</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-manipuler">    
        <li>
    <a class="dropdown-item" href="../../content/manipulation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/01_numpy.html" rel="" target="">
 <span class="dropdown-text">Numpy, la brique de base de la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02a_pandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Introduction à Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02b_pandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de pandas : un exemple complet</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Données spatiales : découverte de geopandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de geopandas avec les données vélib</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04a_webscraping_TP.html" rel="" target="">
 <span class="dropdown-text">Web scraping avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04c_API_TP.html" rel="" target="">
 <span class="dropdown-text">Récupérer des données avec des API depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04b_regex_TP.html" rel="" target="">
 <span class="dropdown-text">Maîtriser les expressions régulières</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/07_dask.html" rel="" target="">
 <span class="dropdown-text">Introduction à dask grâce aux données DVF</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-communiquer" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Communiquer</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-communiquer">    
        <li>
    <a class="dropdown-item" href="../../content/visualisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/matplotlib.html" rel="" target="">
 <span class="dropdown-text">De beaux graphiques avec python: mise en pratique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/maps.html" rel="" target="">
 <span class="dropdown-text">De belles cartes avec python: mise en pratique</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-modéliser" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Modéliser</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-modéliser">    
        <li>
    <a class="dropdown-item" href="../../content/modelisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/0_preprocessing.html" rel="" target="">
 <span class="dropdown-text">Préparation des données pour construire un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/1_modelevaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluer la qualité d’un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/2_SVM.html" rel="" target="">
 <span class="dropdown-text">Classification: premier modèle avec les SVM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/3_regression.html" rel="" target="">
 <span class="dropdown-text">Régression : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/4_featureselection.html" rel="" target="">
 <span class="dropdown-text">Sélection de variables : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/5_clustering.html" rel="" target="">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/6_pipeline.html" rel="" target="">
 <span class="dropdown-text">Premier pas vers l’industrialisation avec les pipelines scikit</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-approfondissements" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Approfondissements</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-approfondissements">    
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/continuous_integration.html" rel="" target="">
 <span class="dropdown-text">Intégration continue avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/dallE.html" rel="" target="">
 <span class="dropdown-text">Génération d’images avec Python, DALL-E et StableDiffusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/s3.html" rel="" target="">
 <span class="dropdown-text">Les nouveaux modes d’accès aux données : le format parquet et les données sur le cloud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_approfondissement.html" rel="" target="">
 <span class="dropdown-text">Approfondissement ElasticSearch pour des recherches de proximité géographique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_intro.html" rel="" target="">
 <span class="dropdown-text">Introduction à ElasticSearch pour la recherche textuelle</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-git" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Git</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-git">    
        <li>
    <a class="dropdown-item" href="../../content/git/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/introgit.html" rel="" target="">
 <span class="dropdown-text">Git : un élément essentiel au quotidien</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/exogit.html" rel="" target="">
 <span class="dropdown-text">Un cadavre exquis pour découvrir Git</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-annexes" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Annexes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-annexes">    
        <li>
    <a class="dropdown-item" href="../../content/annexes/evaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/annexes/corrections.html" rel="" target="">
 <span class="dropdown-text">Corrections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://linogaliana.github.io/python-datascientist-slides/#/title-slide" rel="" target="">
 <span class="dropdown-text">Slides de présentation</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools ms-auto-item" href="https://github.com/linogaliana/python-datascientist">
            Code source
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/manipulation/04b_regex_TP.html">Maîtriser les expressions régulières</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns">
                <div id="title-block-header-title" class="quarto-title page-columns page-full page-layout-full featured-image p-4" style="background-image: url(https://d2h1bfu6zrdxog.cloudfront.net/wp-content/uploads/2022/04/img_625491e9ce092.png);">
                <h1 class="title">Maîtriser les expressions régulières</h1>
                                    <div class="quarto-categories">
                        <div class="quarto-category">Tutoriel</div>
                        <div class="quarto-category">Manipulation</div>
                      </div>
                          </div>
        
                <div>
          <div id="title-block-title-desc" class="description pt-4">
            <p>Les expressions régulières fournissent un cadre très pratique pour manipuler
            de manière flexible des données textuelles. Elles sont très utiles
            notamment pour les tâches de traitement naturel du langage (<strong>NLP</strong>)
            ou le nettoyage de données textuelles.</p>
          </div>
        </div>
                
        
        <div class="quarto-title-meta">

            <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                     <p>Lino Galiana </p>
                  </div>
          </div>
            
            <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">July 8, 2023</p>
            </div>
          </div>
          
            
          </div>
          
        
        
        

        </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/01_numpy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Numpy, la brique de base de la data science</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/02a_pandas_tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction à Pandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/02b_pandas_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pratique de pandas : un exemple complet</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/03_geopandas_tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Données spatiales : découverte de geopandas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/03_geopandas_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pratique de geopandas avec les données vélib</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04a_webscraping_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Web scraping avec Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04c_API_TP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Récupérer des données avec des API depuis Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/04b_regex_TP.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Maîtriser les expressions régulières</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/manipulation/07_dask.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction à dask grâce aux données DVF</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#principe" id="toc-principe" class="nav-link" data-scroll-target="#principe">Principe</a>
  <ul class="collapse">
  <li><a href="#classes-de-caractères" id="toc-classes-de-caractères" class="nav-link" data-scroll-target="#classes-de-caractères">Classes de caractères</a></li>
  <li><a href="#quantifieurs" id="toc-quantifieurs" class="nav-link" data-scroll-target="#quantifieurs">Quantifieurs</a></li>
  <li><a href="#aide-mémoire" id="toc-aide-mémoire" class="nav-link" data-scroll-target="#aide-mémoire">Aide-mémoire</a></li>
  </ul></li>
  <li><a href="#principales-fonctions-de-re" id="toc-principales-fonctions-de-re" class="nav-link" data-scroll-target="#principales-fonctions-de-re">Principales fonctions de <code>re</code></a></li>
  <li><a href="#généralisation-avec-pandas" id="toc-généralisation-avec-pandas" class="nav-link" data-scroll-target="#généralisation-avec-pandas">Généralisation avec <code>Pandas</code></a></li>
  <li><a href="#pour-en-savoir-plus" id="toc-pour-en-savoir-plus" class="nav-link" data-scroll-target="#pour-en-savoir-plus">Pour en savoir plus</a></li>
  <li><a href="#exercices-supplémentaires" id="toc-exercices-supplémentaires" class="nav-link" data-scroll-target="#exercices-supplémentaires">Exercices supplémentaires</a>
  <ul class="collapse">
  <li><a href="#extraction-dadresses-email" id="toc-extraction-dadresses-email" class="nav-link" data-scroll-target="#extraction-dadresses-email">Extraction d’adresses email</a></li>
  <li><a href="#extraire-des-années-depuis-un-dataframe-pandas" id="toc-extraire-des-années-depuis-un-dataframe-pandas" class="nav-link" data-scroll-target="#extraire-des-années-depuis-un-dataframe-pandas">Extraire des années depuis un <code>DataFrame</code> <code>Pandas</code></a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/manipulation/04b_regex_TP.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">

<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!-- source: https://raw.githubusercontent.com/spcanelon/silvia/32853dd0e70a71514b0922ee306f80ed5897f776/_partials/title-block-link-buttons/title-block.html -->
<!-- 
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title"> 
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->
    

<div class="cell markdown">
<p class="badges">
<a href="https://github.com/linogaliana/python-datascientist-notebooks/blob/main/notebooks/manipulation/04b_regex_TP.ipynb" class="github"><i class="fab fa-github"></i></a>
<a href="https://downgit.github.io/#/home?url=https://github.com/linogaliana/python-datascientist-notebooks/blob/main/notebooks/manipulation/04b_regex_TP.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Download-Notebook-important?logo=Jupyter" alt="Download"></a>
<a href="https://nbviewer.jupyter.org/github/linogaliana/python-datascientist-notebooksblob/main/notebooks/manipulation/04b_regex_TP.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Visualize-nbviewer-blue?logo=Jupyter" alt="nbviewer"></a>
<a href="https://datalab.sspcloud.fr/launcher/ide/jupyter-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%ABmanipulation%2004b_regex_TP%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange" alt="Onyxia"></a>
<a href="https://datalab.sspcloud.fr/launcher/ide/vscode-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-vscode.sh%C2%BB&amp;init.personalInitArgs=%C2%ABmanipulation%2004b_regex_TP%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_VSCode-blue?logo=visualstudiocode&amp;logoColor=blue" alt="Onyxia"></a><br>
<a href="https://mybinder.org/v2/gh/linogaliana/python-datascientist-notebooks/main?filepath={binder_path}" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Launch-Binder-E66581.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAMAAABi1XidAAAB8lBMVEX///9XmsrmZYH1olJXmsr1olJXmsrmZYH1olJXmsr1olJXmsrmZYH1olL1olJXmsr1olJXmsrmZYH1olL1olJXmsrmZYH1olJXmsr1olL1olJXmsrmZYH1olL1olJXmsrmZYH1olL1olL0nFf1olJXmsrmZYH1olJXmsq8dZb1olJXmsrmZYH1olJXmspXmspXmsr1olL1olJXmsrmZYH1olJXmsr1olL1olJXmsrmZYH1olL1olLeaIVXmsrmZYH1olL1olL1olJXmsrmZYH1olLna31Xmsr1olJXmsr1olJXmsrmZYH1olLqoVr1olJXmsr1olJXmsrmZYH1olL1olKkfaPobXvviGabgadXmsqThKuofKHmZ4Dobnr1olJXmsr1olJXmspXmsr1olJXmsrfZ4TuhWn1olL1olJXmsqBi7X1olJXmspZmslbmMhbmsdemsVfl8ZgmsNim8Jpk8F0m7R4m7F5nLB6jbh7jbiDirOEibOGnKaMhq+PnaCVg6qWg6qegKaff6WhnpKofKGtnomxeZy3noG6dZi+n3vCcpPDcpPGn3bLb4/Mb47UbIrVa4rYoGjdaIbeaIXhoWHmZYHobXvpcHjqdHXreHLroVrsfG/uhGnuh2bwj2Hxk17yl1vzmljzm1j0nlX1olL3AJXWAAAAbXRSTlMAEBAQHx8gICAuLjAwMDw9PUBAQEpQUFBXV1hgYGBkcHBwcXl8gICAgoiIkJCQlJicnJ2goKCmqK+wsLC4usDAwMjP0NDQ1NbW3Nzg4ODi5+3v8PDw8/T09PX29vb39/f5+fr7+/z8/Pz9/v7+zczCxgAABC5JREFUeAHN1ul3k0UUBvCb1CTVpmpaitAGSLSpSuKCLWpbTKNJFGlcSMAFF63iUmRccNG6gLbuxkXU66JAUef/9LSpmXnyLr3T5AO/rzl5zj137p136BISy44fKJXuGN/d19PUfYeO67Znqtf2KH33Id1psXoFdW30sPZ1sMvs2D060AHqws4FHeJojLZqnw53cmfvg+XR8mC0OEjuxrXEkX5ydeVJLVIlV0e10PXk5k7dYeHu7Cj1j+49uKg7uLU61tGLw1lq27ugQYlclHC4bgv7VQ+TAyj5Zc/UjsPvs1sd5cWryWObtvWT2EPa4rtnWW3JkpjggEpbOsPr7F7EyNewtpBIslA7p43HCsnwooXTEc3UmPmCNn5lrqTJxy6nRmcavGZVt/3Da2pD5NHvsOHJCrdc1G2r3DITpU7yic7w/7Rxnjc0kt5GC4djiv2Sz3Fb2iEZg41/ddsFDoyuYrIkmFehz0HR2thPgQqMyQYb2OtB0WxsZ3BeG3+wpRb1vzl2UYBog8FfGhttFKjtAclnZYrRo9ryG9uG/FZQU4AEg8ZE9LjGMzTmqKXPLnlWVnIlQQTvxJf8ip7VgjZjyVPrjw1te5otM7RmP7xm+sK2Gv9I8Gi++BRbEkR9EBw8zRUcKxwp73xkaLiqQb+kGduJTNHG72zcW9LoJgqQxpP3/Tj//c3yB0tqzaml05/+orHLksVO+95kX7/7qgJvnjlrfr2Ggsyx0eoy9uPzN5SPd86aXggOsEKW2Prz7du3VID3/tzs/sSRs2w7ovVHKtjrX2pd7ZMlTxAYfBAL9jiDwfLkq55Tm7ifhMlTGPyCAs7RFRhn47JnlcB9RM5T97ASuZXIcVNuUDIndpDbdsfrqsOppeXl5Y+XVKdjFCTh+zGaVuj0d9zy05PPK3QzBamxdwtTCrzyg/2Rvf2EstUjordGwa/kx9mSJLr8mLLtCW8HHGJc2R5hS219IiF6PnTusOqcMl57gm0Z8kanKMAQg0qSyuZfn7zItsbGyO9QlnxY0eCuD1XL2ys/MsrQhltE7Ug0uFOzufJFE2PxBo/YAx8XPPdDwWN0MrDRYIZF0mSMKCNHgaIVFoBbNoLJ7tEQDKxGF0kcLQimojCZopv0OkNOyWCCg9XMVAi7ARJzQdM2QUh0gmBozjc3Skg6dSBRqDGYSUOu66Zg+I2fNZs/M3/f/Grl/XnyF1Gw3VKCez0PN5IUfFLqvgUN4C0qNqYs5YhPL+aVZYDE4IpUk57oSFnJm4FyCqqOE0jhY2SMyLFoo56zyo6becOS5UVDdj7Vih0zp+tcMhwRpBeLyqtIjlJKAIZSbI8SGSF3k0pA3mR5tHuwPFoa7N7reoq2bqCsAk1HqCu5uvI1n6JuRXI+S1Mco54YmYTwcn6Aeic+kssXi8XpXC4V3t7/ADuTNKaQJdScAAAAAElFTkSuQmCC" alt="Binder"></a>
<a href="https://colab.research.google.com/github/linogaliana/python-datascientist-notebooks/blob/main/notebooks/manipulation/04b_regex_TP.ipynb" target="_blank" rel="noopener"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a>
<a href="https://github.dev/linogaliana/python-datascientist-notebooks/notebooks/manipulation/04b_regex_TP.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual%20Studio%20Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc" alt="githubdev"></a>
</p>
<p></p>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p><code>Python</code> offre énormément de fonctionalités très pratiques pour la manipulation de données
textuelles. C’est l’une des raisons de son
succès dans la communauté du traitement automatisé du langage (NLP, voir partie dédiée).</p>
<p>Dans les chapitres précédents, nous avons parfois été amenés à chercher des éléments textuels basiques. Cela était possible avec la méthode <code>str.find</code> du package <code>Pandas</code> qui constitue une version vectorisée de la méthode <code>find</code>
de base. Nous avons d’ailleurs
pu utiliser cette dernière directement, notamment lorsqu’on a fait du <em>web scraping</em>.</p>
<p>Cependant, cette fonction de recherche
trouve rapidement ses limites.
Par exemple, si on désire trouver à la fois les occurrences d’un terme au singulier
et au pluriel, il sera nécessaire d’utiliser
au moins deux fois la méthode <code>find</code>.
Pour des verbes conjugués, cela devient encore plus complexe, en particulier si ceux-ci changent de forme selon le sujet.</p>
<p>Pour des expressions compliquées, il est conseillé d’utiliser les <strong>expressions régulières</strong>,
ou <em>“regex”</em>. C’est une fonctionnalité qu’on retrouve dans beaucoup de langages. C’est une forme de grammaire qui permet de rechercher des expressions.</p>
<p>Une partie du contenu de cette partie
est une adaptation de la
<a href="https://www.book.utilitr.org/03_fiches_thematiques/fiche_donnees_textuelles#regex">documentation collaborative sur <code>R</code> nommée <code>utilitR</code></a> à laquelle j’ai participé. Ce chapitre reprend aussi du contenu du
livre <a href="https://r4ds.hadley.nz/regexps.html"><em>R for Data Science</em></a> qui présente un chapitre
très pédagogique sur les regex.</p>
<p>Nous allons utiliser le <em>package</em> <code>re</code> pour illustrer nos exemples d’expressions
régulières. Il s’agit du package de référence, qui est utilisé, en arrière-plan,
par <code>Pandas</code> pour vectoriser les recherches textuelles.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell markdown">
<div class="alert alert-warning" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-lightbulb"></i> Hint</h3>
<p><strong>Les expressions régulières (<em>regex</em>) sont notoirement difficiles à maîtriser.</strong> Il existe des outils qui facilitent le travail avec les expressions régulières.</p>
<ul>
<li><p>L’outil de référence pour ceci est [https://regex101.com/] qui permet de tester des <code>regex</code> en <code>Python</code>
tout en ayant une explication qui accompagne ce test</p></li>
<li><p>De même pour <a href="https://ole.michelsen.dk/tools/regex/">ce site</a> qui comporte une cheat sheet en bas de la page.</p></li>
<li><p>Les jeux de <a href="https://regexcrossword.com/">Regex Crossword</a> permettent d’apprendre les expressions régulières en s’amusant</p></li>
</ul>
<p>Il peut être pratique de demander à des IA assistantes, comme <code>Github Copilot</code> ou <code>ChatGPT</code>, une
première version d’une regex en expliquant le contenu qu’on veut extraire.
Cela peut faire économiser pas mal de temps, sauf quand l’IA fait preuve d’une confiance excessive
et vous propose avec aplomb une regex totalement fausse…</p>
</div>
</div>
</section>
<section id="principe" class="level2">
<h2 class="anchored" data-anchor-id="principe">Principe</h2>
<p><strong>Les expressions régulières sont un outil permettant de décrire un ensemble de chaînes de caractères possibles selon une syntaxe précise, et donc de définir un motif (ou <code>pattern</code>).</strong> Les expressions régulières servent par exemple lorsqu’on veut extraire une partie d’une chaîne de caractères, ou remplacer une partie d’une chaîne de caractères. Une expression régulière prend la forme d’une chaîne de caractères, qui peut contenir à la fois des éléments littéraux et des caractères spéciaux qui ont un sens logique.</p>
<p>Par exemple, <code>"ch.+n"</code> est une expression régulière qui décrit le motif suivant : la chaîne littérale <code>ch</code>, suivi de n’importe quelle chaîne d’au moins un caractère (<code>.+</code>), suivie de la lettre <code>n</code>. Dans la chaîne <code>"J'ai un chien."</code>, la sous-chaîne <code>"chien"</code> correspond à ce motif. De même pour <code>"chapeau ron"</code> dans <code>"J'ai un chapeau rond"</code>. En revanche, dans la chaîne <code>"La soupe est chaude."</code>, aucune sous-chaîne ne correpsond à ce motif (car aucun <code>n</code> n’apparaît après le <code>ch</code>).</p>
<p>Pour s’en convaincre, nous pouvons déjà regarder
les deux premiers cas:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pattern <span class="op">=</span> <span class="st">"ch.+n"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.search(pattern, <span class="st">"J'ai un chien."</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.search(pattern, <span class="st">"J'ai un chapeau rond."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;re.Match object; span=(8, 13), match='chien'&gt;
&lt;re.Match object; span=(8, 19), match='chapeau ron'&gt;</code></pre>
</div>
</div>
<p>Cependant, dans le dernier cas, nous ne trouvons pas
le <em>pattern</em> recherché:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.search(pattern, <span class="st">"La soupe est chaude."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>None</code></pre>
</div>
</div>
<p>La regex précédente comportait deux types de caractères:</p>
<ul>
<li>les <em>caractères littéraux</em> : lettres et nombres qui sont reconnus de manière littérale</li>
<li>les <em>méta-caractères</em> : symboles qui ont un sens particulier dans les regex.</li>
</ul>
<p>Les principaux <em>méta-caractères</em> sont <code>.</code>, <code>+</code>, <code>*</code>, <code>[</code>, <code>]</code>, <code>^</code> et <code>$</code> mais il
en existe beaucoup d’autres.
Parmi cet ensemble, on utilise principalement les quantifieurs (<code>.</code>, <code>+</code>, <code>*</code>…),
les classes de caractères (ensemble qui sont délimités par <code>[</code> et <code>]</code>)
ou les ancres (<code>^</code>, <code>$</code>…)</p>
<p>Dans l’exemple précédent,
nous retrouvions deux quantifieurs accolés <code>.+</code>. Le premier (<code>.</code>) signifie n’importe quel caractère<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Le deuxième (<code>+</code>) signifie <em>“répète le pattern précédent”</em>.
Dans notre cas, la combinaison <code>.+</code> permet ainsi de répéter n’importe quel caractère avant de trouver un <em>n</em>.
Le nombre de fois est indeterminé: cela peut ne pas être pas nécessaire d’intercaler des caractères avant le <em>n</em>
ou cela peut être nécessaire d’en intercepter plusieurs:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.search(pattern, <span class="st">"J'ai un chino"</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.search(pattern, <span class="st">"J'ai un chiot très mignon."</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;re.Match object; span=(8, 12), match='chin'&gt;
&lt;re.Match object; span=(8, 25), match='chiot très mignon'&gt;</code></pre>
</div>
</div>
<section id="classes-de-caractères" class="level3">
<h3 class="anchored" data-anchor-id="classes-de-caractères">Classes de caractères</h3>
<p>Lors d’une recherche, on s’intéresse aux caractères et souvent aux classes de caractères : on cherche un chiffre, une lettre, un caractère dans un ensemble précis ou un caractère qui n’appartient pas à un ensemble précis. Certains ensembles sont prédéfinis, d’autres doivent être définis à l’aide de crochets.</p>
<p>Pour définir un ensemble de caractères, il faut écrire cet ensemble entre crochets. Par exemple, <code>[0123456789]</code> désigne un chiffre. Comme c’est une séquence de caractères consécutifs, on peut résumer cette écriture en <code>[0-9]</code>.</p>
<p>Par
exemple, si on désire trouver tous les <em>pattern</em> qui commencent par un <code>c</code> suivi
d’un <code>h</code> puis d’une voyelle (a, e, i, o, u), on peut essayer
cette expression régulière.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>re.findall(<span class="st">"[c][h][aeiou]"</span>, <span class="st">"chat, chien, veau, vache, chèvre"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>['cha', 'chi', 'che']</code></pre>
</div>
</div>
<p>Il serait plus pratique d’utiliser <code>Pandas</code> dans ce cas pour isoler les
lignes qui répondent à la condition logique (en ajoutant les accents
qui ne sont pas compris sinon):</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>txt <span class="op">=</span> pd.Series(<span class="st">"chat, chien, veau, vache, chèvre"</span>.split(<span class="st">", "</span>))</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>txt.<span class="bu">str</span>.match(<span class="st">"ch[aeéèiou]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0     True
1     True
2    False
3    False
4     True
dtype: bool</code></pre>
</div>
</div>
<p>Cependant, l’usage ci-dessus des classes de caractères
n’est pas le plus fréquent.
On privilégie celles-ci pour identifier des
pattern complexe plutôt qu’une suite de caractères littéraux.
Les tableaux d’aide mémoire illustrent une partie des
classes de caractères les plus fréquentes
(<code>[:digit:]</code> ou <code>\d</code>…)</p>
</section>
<section id="quantifieurs" class="level3">
<h3 class="anchored" data-anchor-id="quantifieurs">Quantifieurs</h3>
<p>Nous avons rencontré les quantifieurs avec notre première expression
régulière. Ceux-ci contrôlent le nombre de fois
qu’un <em>pattern</em> est rencontré.</p>
<p>Les plus fréquents sont:</p>
<ul>
<li><code>?</code> : 0 ou 1 match ;</li>
<li><code>+</code> : 1 ou plus de matches ;</li>
<li><code>*</code> : 0 or more matches.</li>
</ul>
<p>Par exemple, <code>colou?r</code> permettra de matcher à la fois l’écriture américaine et anglaise</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>re.findall(<span class="st">"colou?r"</span>, <span class="st">"Did you write color or colour?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>['color', 'colour']</code></pre>
</div>
</div>
<p>Ces quantifiers peuvent bien sûr être associés à
d’autres types de caractères, notamment les classes de caractères.
Cela peut être extrèmement pratique.
Par exemple, <code>\d+</code> permettra de capturer un ou plusieurs chiffres, <code>\s?</code>
permettra d’ajouter en option un espace,
<code>[\w]{6,8}</code> un mot entre six et huit lettres qu’on écrira…</p>
<p>Il est aussi possible de définir le nombre de répétitions
avec <code>{}</code>:</p>
<ul>
<li><code>{n}</code> matche exactement <em>n</em> fois ;</li>
<li><code>{n,}</code> matche au moins <em>n</em> fois ;</li>
<li><code>{n,m}</code> matche entre <em>n</em> et <em>m</em> fois.</li>
</ul>
<p>Cependant, la répétition des termes
ne s’applique par défaut qu’au dernier
caractère précédent le quantifier.
On peut s’en convaincre avec l’exemple ci-dessus:</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.match(<span class="st">"toc</span><span class="sc">{4}</span><span class="st">"</span>,<span class="st">"toctoctoctoc"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>None</code></pre>
</div>
</div>
<p>Pour pallier ce problème, il existe les parenthèses.
Le principe est le même qu’avec les règles numériques:
les parenthèses permettent d’introduire une hiérarchie.
Pour reprendre l’exemple précédent, on obtient
bien le résultat attendu grâce aux parenthèses:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.match(<span class="st">"(toc)</span><span class="sc">{4}</span><span class="st">"</span>,<span class="st">"toctoctoctoc"</span>))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.match(<span class="st">"(toc)</span><span class="sc">{5}</span><span class="st">"</span>,<span class="st">"toctoctoctoc"</span>))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.match(<span class="st">"(toc){2,4}"</span>,<span class="st">"toctoctoctoc"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;re.Match object; span=(0, 12), match='toctoctoctoc'&gt;
None
&lt;re.Match object; span=(0, 12), match='toctoctoctoc'&gt;</code></pre>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-info" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-comment"></i> Note</h3>
<p>L’algorithme des expressions régulières essaye toujours de faire correspondre le plus grand morceau à l’expression régulière.</p>
<p>Par exemple, soit une chaine de caractère HTML:</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"&lt;h1&gt;Super titre HTML&lt;/h1&gt;"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>L’expression régulière <code>re.findall("&lt;.*&gt;", s)</code> correspond, potentiellement,
à trois morceaux :</p>
<ul>
<li><code>&lt;h1&gt;</code></li>
<li><code>&lt;/h1&gt;</code></li>
<li><code>&lt;h1&gt;Super titre HTML&lt;/h1&gt;</code></li>
</ul>
<p>C’est ce dernier qui sera choisi, car le plus grand. Pour
sélectionner le plus petit,
il faudra écrire les multiplicateurs comme ceci : <code>*?</code>, <code>+?</code>.
En voici quelques exemples:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"&lt;h1&gt;Super titre HTML&lt;/h1&gt;</span><span class="ch">\n</span><span class="st">&lt;p&gt;&lt;code&gt;Python&lt;/code&gt; est un langage très flexible&lt;/p&gt;"</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.findall(<span class="st">"&lt;.*&gt;"</span>, s))</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.findall(<span class="st">"&lt;p&gt;.*&lt;/p&gt;"</span>, s))</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.findall(<span class="st">"&lt;p&gt;.*?&lt;/p&gt;"</span>, s))</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re.<span class="bu">compile</span>(<span class="st">"&lt;.*?&gt;"</span>).findall(s))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['&lt;h1&gt;Super titre HTML&lt;/h1&gt;', '&lt;p&gt;&lt;code&gt;Python&lt;/code&gt; est un langage très flexible&lt;/p&gt;']
['&lt;p&gt;&lt;code&gt;Python&lt;/code&gt; est un langage très flexible&lt;/p&gt;']
['&lt;p&gt;&lt;code&gt;Python&lt;/code&gt; est un langage très flexible&lt;/p&gt;']
['&lt;h1&gt;', '&lt;/h1&gt;', '&lt;p&gt;', '&lt;code&gt;', '&lt;/code&gt;', '&lt;/p&gt;']</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="aide-mémoire" class="level3">
<h3 class="anchored" data-anchor-id="aide-mémoire">Aide-mémoire</h3>
<p>Le tableau ci-dessous peut servir d’aide-mémoire
sur les regex:</p>
<table class="table">
<colgroup>
<col style="width: 35%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th>Expression régulière</th>
<th>Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"^"</code></td>
<td>Début de la chaîne de caractères</td>
</tr>
<tr class="even">
<td><code>"$"</code></td>
<td>Fin de la chaîne de caractères</td>
</tr>
<tr class="odd">
<td><code>"\\."</code></td>
<td>Un point</td>
</tr>
<tr class="even">
<td><code>"."</code></td>
<td>N’importe quel caractère</td>
</tr>
<tr class="odd">
<td><code>".+"</code></td>
<td>N’importe quelle suite de caractères non vide</td>
</tr>
<tr class="even">
<td><code>".*"</code></td>
<td>N’importe quelle suite de caractères, éventuellement vi</td>
</tr>
<tr class="odd">
<td><code>"[:alnum:]"</code></td>
<td>Un caractère alphanumérique</td>
</tr>
<tr class="even">
<td><code>"[:alpha:]"</code></td>
<td>Une lettre</td>
</tr>
<tr class="odd">
<td><code>"[:digit:]"</code></td>
<td>Un chiffre</td>
</tr>
<tr class="even">
<td><code>"[:lower:]"</code></td>
<td>Une lettre minuscule</td>
</tr>
<tr class="odd">
<td><code>"[:punct:]"</code></td>
<td>Un signe de ponctuation</td>
</tr>
<tr class="even">
<td><code>"[:space:]"</code></td>
<td>un espace</td>
</tr>
<tr class="odd">
<td><code>"[:upper:]"</code></td>
<td>Une lettre majuscule</td>
</tr>
<tr class="even">
<td><code>"[[:alnum:]]+"</code></td>
<td>Une suite d’au moins un caractère alphanumérique</td>
</tr>
<tr class="odd">
<td><code>"[[:alpha:]]+"</code></td>
<td>Une suite d’au moins une lettre</td>
</tr>
<tr class="even">
<td><code>"[[:digit:]]+"</code></td>
<td>Une suite d’au moins un chiffre</td>
</tr>
<tr class="odd">
<td><code>"[[:lower:]]+"</code></td>
<td>Une suite d’au moins une lettre minuscule</td>
</tr>
<tr class="even">
<td><code>"[[:punct:]]+"</code></td>
<td>Une suite d’au moins un signe de ponctuation</td>
</tr>
<tr class="odd">
<td><code>"[[:space:]]+"</code></td>
<td>Une suite d’au moins un espace</td>
</tr>
<tr class="even">
<td><code>"[[:upper:]]+"</code></td>
<td>Une suite d’au moins une lettre majuscule</td>
</tr>
<tr class="odd">
<td><code>"[[:alnum:]]*"</code></td>
<td>Une suite de caractères alphanumériques, éventuellement vide</td>
</tr>
<tr class="even">
<td><code>"[[:alpha:]]*"</code></td>
<td>Une suite de lettres, éventuellement vide</td>
</tr>
<tr class="odd">
<td><code>"[[:digit:]]*"</code></td>
<td>Une suite de chiffres, éventuellement vide</td>
</tr>
<tr class="even">
<td><code>"[[:lower:]]*"</code></td>
<td>Une suite de lettres minuscules, éventuellement vide</td>
</tr>
<tr class="odd">
<td><code>"[[:upper:]]*"</code></td>
<td>Une suite de lettres majuscules, éventuellement vide</td>
</tr>
<tr class="even">
<td><code>"[[:punct:]]*"</code></td>
<td>Une suite de signes de ponctuation, éventuellement vide</td>
</tr>
<tr class="odd">
<td><code>"[^[:alpha:]]+"</code></td>
<td>Une suite d’au moins un caractère autre qu’une lettre</td>
</tr>
<tr class="even">
<td><code>"[^[:digit:]]+"</code></td>
<td>Une suite d’au moins un caractère autre qu’un chiffre</td>
</tr>
<tr class="odd">
<td><code>"\|"</code></td>
<td>L’une des expressions <code>x</code> ou <code>y</code> est présente</td>
</tr>
<tr class="even">
<td><code>[abyz]</code></td>
<td>Un seul des caractères spécifiés</td>
</tr>
<tr class="odd">
<td><code>[abyz]+</code></td>
<td>Un ou plusieurs des caractères spécifiés (éventuellement répétés)</td>
</tr>
<tr class="even">
<td><code>[^abyz]</code></td>
<td>Aucun des caractères spécifiés n’est présent</td>
</tr>
</tbody>
</table>
<p>Certaines classes de caractères bénéficient d’une syntaxe plus légère car
elles sont très fréquentes. Parmi-celles:</p>
<table class="table">
<colgroup>
<col style="width: 35%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th>Expression régulière</th>
<th>Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\d</code></td>
<td>N’importe quel chiffre</td>
</tr>
<tr class="even">
<td><code>\D</code></td>
<td>N’importe quel caractère qui n’est pas un caractère</td>
</tr>
<tr class="odd">
<td><code>\s</code></td>
<td>N’importe quel espace (espace, tabulation, retour à la ligne)</td>
</tr>
<tr class="even">
<td><code>\S</code></td>
<td>N’importe quel caractère qui n’est pas un espace</td>
</tr>
<tr class="odd">
<td><code>\w</code></td>
<td>N’importe quel type de mot (lettres et nombres)</td>
</tr>
<tr class="even">
<td><code>\W</code></td>
<td>N’importe quel ensemble qui n’est pas un mot (lettres et nombres)</td>
</tr>
</tbody>
</table>
<p>Dans l’exercice suivant, vous allez pouvoir mettre en pratique
les exemples précédents sur une <code>regex</code> un peu plus complète.
Cet exercice ne nécessite pas la connaissance des subtilités
du <em>package</em> <code>re</code>, vous n’aurez besoin que de <code>re.findall</code>.</p>
<p>Cet exercice utilisera la chaine de caractère suivante :</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"""date 0 : 14/9/2000</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="st">date 1 : 20/04/1971     date 2 : 14/09/1913     date 3 : 2/3/1978</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="st">date 4 : 1/7/1986     date 5 : 7/3/47     date 6 : 15/10/1914</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="st">date 7 : 08/03/1941     date 8 : 8/1/1980     date 9 : 30/6/1976"""</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>s</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>'date 0 : 14/9/2000\ndate 1 : 20/04/1971     date 2 : 14/09/1913     date 3 : 2/3/1978\ndate 4 : 1/7/1986     date 5 : 7/3/47     date 6 : 15/10/1914\ndate 7 : 08/03/1941     date 8 : 8/1/1980     date 9 : 30/6/1976'</code></pre>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 1</h3>
<ol type="1">
<li>On va d’abord s’occuper d’extraire le jour de naissance.
<ul>
<li>Le premier chiffre du jour est 0, 1, 2 ou 3. Traduire cela sous la forme d’une séquence <code>[X-X]</code></li>
<li>Le deuxième chiffre du jour est lui entre 0 et 9. Traduire cela sous la séquence adéquate</li>
<li>Remarquez que le premier jour est facultatif. Intercaler entre les deux classes de caractère adéquate
le quantifieur qui convient</li>
<li>Ajouter le slash à la suite du motif</li>
<li>Tester avec <code>re.findall</code>. Vous devriez obtenir beaucoup plus d’échos que nécessaire.
C’est normal, à ce stade la
regex n’est pas encore finalisée</li>
</ul></li>
<li>Suivre la même logique pour les mois en notant que les mois du calendrier grégorien ne dépassent
jamais la première dizaine. Tester avec <code>re.findall</code></li>
<li>De même pour les années de naissance en notant que jusqu’à preuve du contraire, pour des personnes vivantes
aujourd’hui, les millénaires concernés sont restreints. Tester avec <code>re.findall</code></li>
<li>Cette regex n’est pas naturelle, on pourrait très bien se satisfaire de classes de
caractères génériques <code>\d</code> même si elles pourraient, en pratique, nous sélectionner des
dates de naissance non possibles (<code>43/78/4528</code> par exemple). Cela permettrait
d’alléger la regex afin de la rendre plus intelligible. Ne pas oublier l’utilité des quantifieurs.</li>
<li>Comment adapter la regex pour qu’elle soit toujours valide pour nos cas mais permette aussi de
capturer les dates de type <code>YYYY/MM/DD</code> ? Tester sur <code>1998/07/12</code></li>
</ol>
</div>
</div>
<p>A l’issue de la question 1, vous devriez avoir ce résultat :</p>
<div class="cell" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>['14/',
 '9/',
 '20/',
 '04/',
 '14/',
 '09/',
 '2/',
 '3/',
 '1/',
 '7/',
 '7/',
 '3/',
 '15/',
 '10/',
 '08/',
 '03/',
 '8/',
 '1/',
 '30/',
 '6/']</code></pre>
</div>
</div>
<p>A l’issue de la question 2, vous devriez avoir ce résultat, qui
commence à prendre forme:</p>
<div class="cell" data-execution_count="15">
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>['14/9',
 '20/04',
 '14/09',
 '2/3',
 '1/7',
 '7/3',
 '15/10',
 '08/03',
 '8/1',
 '30/6']</code></pre>
</div>
</div>
<p>A l’issue de la question 3, on parvient bien
à extraire les dates :</p>
<div class="cell" data-execution_count="16">
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>['14/9/2000',
 '20/04/1971',
 '14/09/1913',
 '2/3/1978',
 '1/7/1986',
 '7/3/47',
 '15/10/1914',
 '08/03/1941',
 '8/1/1980',
 '30/6/1976']</code></pre>
</div>
</div>
<p>Si tout va bien, à la question 5, votre regex devrait
fonctionner:</p>
<div class="cell" data-execution_count="18">
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>['14/9/2000',
 '20/04/1971',
 '14/09/1913',
 '2/3/1978',
 '1/7/1986',
 '7/3/47',
 '15/10/1914',
 '08/03/1941',
 '8/1/1980',
 '30/6/1976',
 '1998/07/12']</code></pre>
</div>
</div>
</section>
</section>
<section id="principales-fonctions-de-re" class="level2">
<h2 class="anchored" data-anchor-id="principales-fonctions-de-re">Principales fonctions de <code>re</code></h2>
<p>Voici un tableau récapitulatif des principales
fonctions du package <code>re</code> suivi d’exemples.</p>
<p>Nous avons principalement
utilisé jusqu’à présent <code>re.findall</code> qui est
l’une des fonctions les plus pratiques du <em>package</em>.
<code>re.sub</code> et <code>re.search</code> sont également bien pratiques.
Les autres sont moins vitales mais peuvent dans des
cas précis être utiles.</p>
<table class="table">
<colgroup>
<col style="width: 51%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Fonction</th>
<th>Objectif</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>re.match(&lt;regex&gt;, s)</code></td>
<td>Trouver et renvoyer le <strong>premier</strong> <em>match</em> de l’expression régulière <code>&lt;regex&gt;</code> <strong>à partir du début</strong> du <em>string</em> <code>s</code></td>
</tr>
<tr class="even">
<td><code>re.search(&lt;regex&gt;, s)</code></td>
<td>Trouver et renvoyer le <strong>premier</strong> <em>match</em> de l’expression régulière <code>&lt;regex&gt;</code> <strong>quelle que soit sa position</strong> dans le <em>string</em> <code>s</code></td>
</tr>
<tr class="odd">
<td><code>re.finditer(&lt;regex&gt;, s)</code></td>
<td>Trouver et renvoyer un itérateur stockant tous les <em>matches</em> de l’expression régulière <code>&lt;regex&gt;</code> <strong>quelle que soit leur(s) position(s)</strong> dans le <em>string</em> <code>s</code>. En général, on effectue ensuite une boucle sur cet itérateur</td>
</tr>
<tr class="even">
<td><code>re.findall(&lt;regex&gt;, s)</code></td>
<td>Trouver et renvoyer <strong>tous les <em>matches</em></strong> de l’expression régulière <code>&lt;regex&gt;</code> <strong>quelle que soit leur(s) position(s)</strong> dans le <em>string</em> <code>s</code> sous forme de <strong>liste</strong></td>
</tr>
<tr class="odd">
<td><code>re.sub(&lt;regex&gt;, new_text, s)</code></td>
<td>Trouver et <strong>remplacer tous</strong> les <em>matches</em> de l’expression régulière <code>&lt;regex&gt;</code> <strong>quelle que soit leur(s) position(s)</strong> dans le <em>string</em> <code>s</code></td>
</tr>
</tbody>
</table>
<p>Pour illustrer ces fonctions, voici quelques exemples:</p>
<div class="cell markdown">
<details><summary>Exemple de <code>re.match</code> 👇</summary>
<p><code>re.match</code> ne peut servir qu’à capturer un <em>pattern</em> en début
de <em>string</em>. Son utilité est donc limitée.
Capturons néanmoins <code>toto</code> :</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>re.match(<span class="st">"(to)</span><span class="sc">{2}</span><span class="st">"</span>, <span class="st">"toto à la plage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>&lt;re.Match object; span=(0, 4), match='toto'&gt;</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<details><summary>Exemple de <code>re.search</code> 👇</summary>
<p><code>re.search</code> est plus puissant que <code>re.match</code>, on peut
capturer des termes quelle que soit leur position
dans un <em>string</em>. Par exemple, pour capturer <em>age</em> :</p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>re.search(<span class="st">"age"</span>, <span class="st">"toto a l'age d'aller à la plage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>&lt;re.Match object; span=(9, 12), match='age'&gt;</code></pre>
</div>
</div>
<p>Et pour capturer exclusivement <em>“age”</em> en fin
de <em>string</em> :</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>re.search(<span class="st">"age$"</span>, <span class="st">"toto a l'age d'aller à la plage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>&lt;re.Match object; span=(28, 31), match='age'&gt;</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<details><summary>Exemple de <code>re.finditer</code> 👇</summary>
<p><code>re.finditer</code> est, à mon avis,
moins pratique que <code>re.findall</code>. Son utilité
principale par rapport à <code>re.findall</code>
est de capturer la position dans un champ textuel:</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"toto a l'age d'aller à la plage"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> match <span class="kw">in</span> re.finditer(<span class="st">"age"</span>, s):</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> match.start()</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> match.end()</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'String match "</span><span class="sc">{</span>s[start:end]<span class="sc">}</span><span class="ss">" at </span><span class="sc">{</span>start<span class="sc">}</span><span class="ss">:</span><span class="sc">{</span>end<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>String match "age" at 9:12
String match "age" at 28:31</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<details><summary>Exemple de <code>re.sub</code> 👇</summary>
<p><code>re.sub</code> permet de capturer et remplacer des expressions.
Par exemple, remplaçons <em>“age”</em> par <em>“âge”</em>. Mais attention,
il ne faut pas le faire lorsque le motif est présent dans <em>“plage”</em>.
On va donc mettre une condition négative: capturer <em>“age”</em> seulement
s’il n’est pas en fin de <em>string</em> (ce qui se traduit en <em>regex</em> par <code>?!$</code>)</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>re.sub(<span class="st">"age(?!$)"</span>, <span class="st">"âge"</span>, <span class="st">"toto a l'age d'aller à la plage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>"toto a l'âge d'aller à la plage"</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<div class="alert alert-warning" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-lightbulb"></i> Quand utiliser <code>re.compile</code> et les raw strings ?</h3>
<p><code>re.compile</code> peut être intéressant lorsque
vous utilisez une expression régulière plusieurs fois dans votre code.
Cela permet de compiler l’expression régulière en un objet reconnu par <code>re</code>,
ce qui peut être plus efficace en termes de performance lorsque l’expression régulière
est utilisée à plusieurs reprises ou sur des données volumineuses.</p>
<p>Les chaînes brutes (<em>raw string</em>) sont des chaînes de caractères spéciales en <code>Python</code>,
qui commencent par <code>r</code>. Par exemple <code>r"toto à la plage"</code>.
Elles peuvent être intéressantes
pour éviter que les caractères d’échappement ne soient interprétés par <code>Python</code>
Par exemple, si vous voulez chercher une chaîne qui contient une barre oblique inverse <code>\</code> dans une chaîne, vous devez utiliser une chaîne brute pour éviter que la barre oblique inverse ne soit interprétée comme un caractère d’échappement (<code>\t</code>, <code>\n</code>, etc.).
Le testeur <a href="https://regex101.com/">https://regex101.com/</a> suppose d’ailleurs que
vous utilisez des <em>raw string</em>, cela peut donc être utile de s’habituer à les utiliser.</p>
</div>
</div>
</section>
<section id="généralisation-avec-pandas" class="level2">
<h2 class="anchored" data-anchor-id="généralisation-avec-pandas">Généralisation avec <code>Pandas</code></h2>
<p>Les méthodes de <code>Pandas</code> sont des extensions de celles de <code>re</code>
qui évitent de faire une boucle pour regarder,
ligne à ligne, une regex. En pratique, lorsqu’on traite des
<code>DataFrames</code>, on utilise plutôt l’API Pandas que <code>re</code>. Les
codes de la forme <code>df.apply(lambda x: re.&lt;fonction&gt;(&lt;regex&gt;,x), axis = 1)</code>
sont à bannir car très peu efficaces.</p>
<p>Les noms changent parfois légèrement par rapport à leur
équivalent <code>re</code>.</p>
<table class="table">
<colgroup>
<col style="width: 54%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Méthode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>str.count()</code></td>
<td>Compter le nombre d’occurrences du <em>pattern</em> dans chaque ligne</td>
</tr>
<tr class="even">
<td><code>str.replace()</code></td>
<td>Remplacer le <em>pattern</em> par une autre valeur. Version vectorisée de <code>re.sub()</code></td>
</tr>
<tr class="odd">
<td><code>str.contains()</code></td>
<td>Tester si le <em>pattern</em> apparaît, ligne à ligne. Version vectorisée de <code>re.search()</code></td>
</tr>
<tr class="even">
<td><code>str.extract()</code></td>
<td>Extraire les groupes qui répondent à un <em>pattern</em> et les renvoyer dans une colonne</td>
</tr>
<tr class="odd">
<td><code>str.findall()</code></td>
<td>Trouver et renvoyer toutes les occurrences d’un <em>pattern</em>. Si une ligne comporte plusieurs échos, une liste est renvoyée. Version vectorisée de <code>re.findall()</code></td>
</tr>
</tbody>
</table>
<p>A ces fonctions, s’ajoutent les méthodes <code>str.split()</code> et <code>str.rsplit()</code> qui sont bien pratiques.</p>
<div class="cell markdown">
<details><summary>Exemple de <code>str.count</code> 👇</summary>
<p>On peut compter le nombre de fois qu’un <em>pattern</em> apparaît avec
<code>str.count</code></p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"a"</span>: [<span class="st">"toto"</span>, <span class="st">"titi"</span>]})</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'a'</span>].<span class="bu">str</span>.count(<span class="st">"to"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>0    2
1    0
Name: a, dtype: int64</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<details><summary>Exemple de <code>str.replace</code> 👇</summary>
<p>Remplaçons le motif <em>“ti”</em> en fin de phrase</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"a"</span>: [<span class="st">"toto"</span>, <span class="st">"titi"</span>]})</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'a'</span>].<span class="bu">str</span>.replace(<span class="st">"ti$"</span>, <span class="st">" punch"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>0    toto
1    titi
Name: a, dtype: object</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<details><summary>Exemple de <code>str.contains</code> 👇</summary>
<p>Vérifions les cas où notre ligne termine par <em>“ti”</em> :</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"a"</span>: [<span class="st">"toto"</span>, <span class="st">"titi"</span>]})</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'a'</span>].<span class="bu">str</span>.contains(<span class="st">"ti$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>0    False
1     True
Name: a, dtype: bool</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<details><summary>Exemple de <code>str.findall</code> 👇</summary>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"a"</span>: [<span class="st">"toto"</span>, <span class="st">"titi"</span>]})</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'a'</span>].<span class="bu">str</span>.findall(<span class="st">"to"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>0    [to, to]
1          []
Name: a, dtype: object</code></pre>
</div>
</div>
</details>
</div>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<i class="fa-solid fa-triangle-exclamation"></i> Warning
<p>A l’heure actuelle, il n’est pas nécessaire d’ajouter l’argument <code>regex = True</code> mais cela
devrait être le cas dans une future version de <code>Pandas</code>.
Cela peut valoir le coup de s’habituer à l’ajouter.</p>
</div>
</div>
</section>
<section id="pour-en-savoir-plus" class="level2">
<h2 class="anchored" data-anchor-id="pour-en-savoir-plus">Pour en savoir plus</h2>
<ul>
<li><a href="https://www.book.utilitr.org/03_fiches_thematiques/fiche_donnees_textuelles#regex">documentation collaborative sur <code>R</code> nommée <code>utilitR</code></a></li>
<li><a href="https://r4ds.hadley.nz/regexps.html"><em>R for Data Science</em></a></li>
<li><a href="https://docs.python.org/3/howto/regex.html"><em>Regular Expression HOWTO</em> dans la documentation officielle de <code>Python</code></a></li>
<li>L’outil de référence [https://regex101.com/] pour tester des expressions régulières</li>
<li><a href="https://ole.michelsen.dk/tools/regex/">Ce site</a> qui comporte une cheat sheet en bas de la page.</li>
<li>Les jeux de <a href="https://regexcrossword.com/">Regex Crossword</a> permettent d’apprendre les expressions régulières en s’amusant</li>
</ul>
</section>
<section id="exercices-supplémentaires" class="level2">
<h2 class="anchored" data-anchor-id="exercices-supplémentaires">Exercices supplémentaires</h2>
<section id="extraction-dadresses-email" class="level3">
<h3 class="anchored" data-anchor-id="extraction-dadresses-email">Extraction d’adresses email</h3>
<p>Il s’agit d’un usage classique des <em>regex</em></p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>text_emails <span class="op">=</span> <span class="st">'Hello from toto@gmail.com to titi.grominet@yahoo.com about the meeting @2PM'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice : extraction d'adresses email</h3>
<p>Utiliser la structure d’une adresse mail <code>[XXXX]@[XXXX]</code> pour récupérer
ce contenu</p>
</div>
</div>
<div class="cell" data-execution_count="29">
<div class="cell-output cell-output-stdout">
<pre><code>['toto@gmail.com', 'titi.grominet@yahoo.com']</code></pre>
</div>
</div>
</section>
<section id="extraire-des-années-depuis-un-dataframe-pandas" class="level3">
<h3 class="anchored" data-anchor-id="extraire-des-années-depuis-un-dataframe-pandas">Extraire des années depuis un <code>DataFrame</code> <code>Pandas</code></h3>
<p>L’objectif général de l’exercice est de nettoyer des colonnes d’un DataFrame en utilisant des expressions régulières.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice</h3>
<p>La base en question contient des livres de la British Library et quelques informations les concernant. Le jeu de données est disponible ici : https://raw.githubusercontent.com/realpython/python-data-cleaning/master/Datasets/BL-Flickr-Images-Book.csv</p>
<p>La colonne “Date de Publication” n’est pas toujours une année, il y a parfois d’autres informations. Le but de l’exercice est d’avoir <strong>une date de publication du livre propre</strong> et de regarder la <strong>distribution des années de publications</strong>.</p>
<p>Pour ce faire, vous pouvez :</p>
<ul>
<li><p>Soit choisir de réaliser l’exercice sans aide. Votre <strong>lecture de l’énoncé s’arrête donc ici</strong>. Vous devez alors faire attention à bien regarder vous-même la base de données et la transformer avec attention.</p></li>
<li><p>Soit suivre les différentes étapes qui suivent pas à pas.</p></li>
</ul>
<details><summary>Version guidée 👇</summary>
<ol type="1">
<li>Lire les données depuis l’url <code>https://raw.githubusercontent.com/realpython/python-data-cleaning/master/Datasets/BL-Flickr-Images-Book.csv</code>. Attention au séparateur</li>
<li>Ne garder que les colonnes <code>['Identifier', 'Place of Publication', 'Date of Publication', 'Publisher', 'Title', 'Author']</code></li>
<li>Observer la colonne <em>‘Date of Publication’</em> et remarquer le problème sur certaines lignes (par exemple la ligne 13)</li>
<li>Commencez par regarder le nombre d’informations manquantes. On ne pourra pas avoir mieux après la regex, et normalement on ne devrait pas avoir moins…</li>
<li>Déterminer la forme de la regex pour une date de publication. A priori, il y a 4 chiffres qui forment une année.
Utiliser la méthode <code>str.extract()</code> avec l’argument <code>expand = False</code> (pour ne conserver que la première date concordant avec notre <em>pattern</em>)?</li>
<li>On a 2 <code>NaN</code> qui n’étaient pas présents au début de l’exercice. Quels sont-ils et pourquoi ?</li>
<li>Quelle est la répartition des dates de publications dans le jeu de données ? Vous pouvez par exemple afficher un histogramme grâce à la méthode <code>plot</code> avec l’argument <code>kind ="hist"</code>.</li>
</ol>

</details></div>
</div>
<p>Voici par exemple le problème qu’on demande de détecter à la question 3 :</p>
<div class="cell" data-execution_count="32">
<div class="cell-output cell-output-display" data-execution_count="32">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date of Publication</th>
<th data-quarto-table-cell-role="th">Title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>1839, 38-54</td>
<td>De Aardbol. Magazijn van hedendaagsche land- e...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>1897</td>
<td>Cronache Savonesi dal 1500 al 1570 ... Accresc...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">15</td>
<td>1865</td>
<td>See-Saw; a novel ... Edited [or rather, writte...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>1860-63</td>
<td>Géodésie d'une partie de la Haute Éthiopie,...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">17</td>
<td>1873</td>
<td>[With eleven maps.]</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">18</td>
<td>1866</td>
<td>[Historia geográfica, civil y politica de la ...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19</td>
<td>1899</td>
<td>The Crisis of the Revolution, being the story ...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>181</code></pre>
</div>
</div>
<p>Grâce à notre regex (question 5), on obtient ainsi un <code>DataFrame</code> plus conforme à nos attentes</p>
<div class="cell" data-execution_count="34">
<div class="cell-output cell-output-display" data-execution_count="34">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date of Publication</th>
<th data-quarto-table-cell-role="th">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1879 [1878]</td>
<td>1879</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>1839, 38-54</td>
<td>1839</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>1860-63</td>
<td>1860</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">23</td>
<td>1847, 48 [1846-48]</td>
<td>1847</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8278</td>
<td>1883, [1884]</td>
<td>1883</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8279</td>
<td>1898-1912</td>
<td>1898</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8283</td>
<td>1831, 32</td>
<td>1831</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8284</td>
<td>[1806]-22</td>
<td>1806</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8286</td>
<td>1834-43</td>
<td>1834</td>
</tr>
</tbody>
</table>

<p>1759 rows × 2 columns</p>
</div>
</div>
</div>
<p>Quant aux nouveaux <code>NaN</code>,
il s’agit de lignes qui ne contenaient pas de chaînes de caractères qui ressemblaient à des années:</p>
<div class="cell" data-execution_count="35">
<div class="cell-output cell-output-display" data-execution_count="35">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date of Publication</th>
<th data-quarto-table-cell-role="th">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1081</td>
<td>112. G. &amp; W. B. Whittaker</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7391</td>
<td>17 vols. University Press</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Enfin, on obtient l’histogramme suivant des dates de publications:</p>
<div class="cell" data-execution_count="36">
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>&lt;Axes: ylabel='Frequency'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="04b_regex_TP_files/figure-html/cell-37-output-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="04b_regex_TP_files/figure-html/cell-37-output-2.png" width="602" height="411" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>


</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>N’importe quel caractère à part le retour à la ligne (<code>\n</code>). Ceci est à garder en tête, j’ai déjà perdu des heures à chercher pourquoi mon <code>.</code> ne capturait pas ce que je voulais qui s’étalait sur plusieurs lignes…<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@book{galiana2023,
  author = {Galiana, Lino},
  title = {Python Pour La Data Science},
  date = {2023},
  url = {https://pythonds.linogaliana.fr/},
  doi = {10.5281/zenodo.8229676},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-galiana2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Galiana, Lino. 2023. <em>Python Pour La Data Science</em>. <a href="https://doi.org/10.5281/zenodo.8229676">https://doi.org/10.5281/zenodo.8229676</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="linogaliana/python-datascientist" data-repo-id="MDEwOlJlcG9zaXRvcnkyODAxNjE2Nzc=" data-category="General" data-category-id="DIC_kwDOELLtjc4B-5TX" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/manipulation/04c_API_TP.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Récupérer des données avec des API depuis Python</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/manipulation/07_dask.html" class="pagination-link">
        <span class="nav-page-text">Introduction à dask grâce aux données DVF</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Python pour la <em>data science</em>, Lino Galiana.<br>
Licence <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i><br>
Code source disponible sur <a href="https://github.com/linogaliana/python-datascientist"><code>Github</code></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Site construit avec <i class="fa-brands fa-python" aria-label="python"></i> et <a href="https://quarto.org/"><code>Quarto</code></a><br>
Inspiration pour la mise en forme du site <a href="https://www.andreashandel.com">ici</a><br>
<a href="https://github.com/linogaliana/python-datascientist">Code source disponible sur <i class="fa-brands fa-github" aria-label="github"></i> <code>GitHub</code></a></div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","loop":true,"descPosition":"bottom","openEffect":"zoom","closeEffect":"zoom"});</script>



</body></html>