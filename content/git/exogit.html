<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">
<meta name="dcterms.date" content="2020-09-30">
<meta name="description" content="Ce chapitre propose une mise en application de quelques principes centraux du langage Git vus précédemment">

<title>Python pour la data science - Un cadavre exquis pour découvrir Git</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/git/introgit.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #e9f3fa;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Python pour la data science - Un cadavre exquis pour découvrir Git">
<meta name="twitter:description" content="Ce chapitre propose une mise en application de quelques principes
centraux du langage Git vus précédemment">
<meta name="twitter:image" content="https://pythonds.linogaliana.fr/content/git/cadavre_exquis_kids.png">
<meta name="twitter:image-height" content="1024">
<meta name="twitter:image-width" content="1024">
<meta name="twitter:card" content="summary_large_image">
<meta name="citation_title" content="Python pour la data science">
<meta name="citation_author" content="Lino Galiana">
<meta name="citation_publication_date" content="2023">
<meta name="citation_cover_date" content="2023">
<meta name="citation_year" content="2023">
<meta name="citation_online_date" content="2020-09-30">
<meta name="citation_fulltext_html_url" content="https://pythonds.linogaliana.fr/">
<meta name="citation_doi" content="10.5281/zenodo.8229676">
<meta name="citation_language" content="en">
</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Python pour la data science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="../../content/getting-started/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/01_installation.html" rel="" target="">
 <span class="dropdown-text">Configuration de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/02_DS_environment.html" rel="" target="">
 <span class="dropdown-text">L’environnement Python pour la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/03_data_analysis.html" rel="" target="">
 <span class="dropdown-text">Comment aborder un jeu de données</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/04_python_practice.html" rel="" target="">
 <span class="dropdown-text">Bonne pratique de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/05_rappels_types.html" rel="" target="">
 <span class="dropdown-text">Quelques rappels sur les principes de base de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/06_rappels_fonctions.html" rel="" target="">
 <span class="dropdown-text">Modules, tests, boucles, fonctions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/07_rappels_classes.html" rel="" target="">
 <span class="dropdown-text">Les classes en Python</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manipuler" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Manipuler</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-manipuler">    
        <li>
    <a class="dropdown-item" href="../../content/manipulation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/01_numpy.html" rel="" target="">
 <span class="dropdown-text">Numpy, la brique de base de la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02a_pandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Introduction à Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02b_pandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de pandas : un exemple complet</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Données spatiales : découverte de geopandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de geopandas avec les données vélib</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04a_webscraping_TP.html" rel="" target="">
 <span class="dropdown-text">Web scraping avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04c_API_TP.html" rel="" target="">
 <span class="dropdown-text">Récupérer des données avec des API depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04b_regex_TP.html" rel="" target="">
 <span class="dropdown-text">Maîtriser les expressions régulières</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/07_dask.html" rel="" target="">
 <span class="dropdown-text">Introduction à dask grâce aux données DVF</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-communiquer" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Communiquer</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-communiquer">    
        <li>
    <a class="dropdown-item" href="../../content/visualisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/matplotlib.html" rel="" target="">
 <span class="dropdown-text">De beaux graphiques avec python: mise en pratique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/maps.html" rel="" target="">
 <span class="dropdown-text">De belles cartes avec python: mise en pratique</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-modéliser" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Modéliser</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-modéliser">    
        <li>
    <a class="dropdown-item" href="../../content/modelisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/0_preprocessing.html" rel="" target="">
 <span class="dropdown-text">Préparation des données pour construire un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/1_modelevaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluer la qualité d’un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/2_SVM.html" rel="" target="">
 <span class="dropdown-text">Classification: premier modèle avec les SVM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/3_regression.html" rel="" target="">
 <span class="dropdown-text">Régression : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/4_featureselection.html" rel="" target="">
 <span class="dropdown-text">Sélection de variables : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/5_clustering.html" rel="" target="">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/6_pipeline.html" rel="" target="">
 <span class="dropdown-text">Premier pas vers l’industrialisation avec les pipelines scikit</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-approfondissements" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Approfondissements</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-approfondissements">    
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/continuous_integration.html" rel="" target="">
 <span class="dropdown-text">Intégration continue avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/dallE.html" rel="" target="">
 <span class="dropdown-text">Génération d’images avec Python, DALL-E et StableDiffusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/s3.html" rel="" target="">
 <span class="dropdown-text">Les nouveaux modes d’accès aux données : le format parquet et les données sur le cloud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_approfondissement.html" rel="" target="">
 <span class="dropdown-text">Approfondissement ElasticSearch pour des recherches de proximité géographique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_intro.html" rel="" target="">
 <span class="dropdown-text">Introduction à ElasticSearch pour la recherche textuelle</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-git" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Git</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-git">    
        <li>
    <a class="dropdown-item" href="../../content/git/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/introgit.html" rel="" target="">
 <span class="dropdown-text">Git : un élément essentiel au quotidien</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/exogit.html" rel="" target="">
 <span class="dropdown-text">Un cadavre exquis pour découvrir Git</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-annexes" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Annexes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-annexes">    
        <li>
    <a class="dropdown-item" href="../../content/annexes/evaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/annexes/corrections.html" rel="" target="">
 <span class="dropdown-text">Corrections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://linogaliana.github.io/python-datascientist-slides/#/title-slide" rel="" target="">
 <span class="dropdown-text">Slides de présentation</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools ms-auto-item" href="https://github.com/linogaliana/python-datascientist">
            Code source
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/git/exogit.html">Un cadavre exquis pour découvrir Git</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns">
                <div id="title-block-header-title" class="quarto-title page-columns page-full page-layout-full featured-image p-4" style="background-image: url(cadavre_exquis_kids.png);">
                <h1 class="title">Un cadavre exquis pour découvrir Git</h1>
                                    <div class="quarto-categories">
                        <div class="quarto-category">Exercice</div>
                        <div class="quarto-category">Git</div>
                      </div>
                          </div>
        
                <div>
          <div id="title-block-title-desc" class="description pt-4">
            <p>Ce chapitre propose une mise en application de quelques principes
            centraux du langage Git vus précédemment</p>
          </div>
        </div>
                
        
        <div class="quarto-title-meta">

            <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                     <p>Lino Galiana </p>
                  </div>
          </div>
            
            <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">September 30, 2020</p>
            </div>
          </div>
          
            
          </div>
          
        
        
        

        </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/git/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/git/introgit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Git : un élément essentiel au quotidien</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/git/exogit.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Un cadavre exquis pour découvrir Git</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#configuration-du-compte-github" id="toc-configuration-du-compte-github" class="nav-link active" data-scroll-target="#configuration-du-compte-github">Configuration du compte Github</a>
  <ul class="collapse">
  <li><a href="#rappels-sur-la-notion-de-dépôt-distant" id="toc-rappels-sur-la-notion-de-dépôt-distant" class="nav-link" data-scroll-target="#rappels-sur-la-notion-de-dépôt-distant">Rappels sur la notion de dépôt distant</a></li>
  <li><a href="#première-étape-créer-un-compte-github" id="toc-première-étape-créer-un-compte-github" class="nav-link" data-scroll-target="#première-étape-créer-un-compte-github">Première étape: créer un compte <code>Github</code></a></li>
  <li><a href="#deuxième-étape-créer-un-token-jeton-https" id="toc-deuxième-étape-créer-un-token-jeton-https" class="nav-link" data-scroll-target="#deuxième-étape-créer-un-token-jeton-https">Deuxième étape: créer un <em>token</em> (jeton) HTTPS</a></li>
  <li><a href="#principe" id="toc-principe" class="nav-link" data-scroll-target="#principe">Principe</a></li>
  <li><a href="#créer-un-jeton" id="toc-créer-un-jeton" class="nav-link" data-scroll-target="#créer-un-jeton">Créer un jeton</a></li>
  </ul></li>
  <li><a href="#premier-commit" id="toc-premier-commit" class="nav-link" data-scroll-target="#premier-commit">Premier commit</a></li>
  <li><a href="#le-fichier-.gitignore" id="toc-le-fichier-.gitignore" class="nav-link" data-scroll-target="#le-fichier-.gitignore">Le fichier <code>.gitignore</code></a></li>
  <li><a href="#premières-interactions-avec-github-depuis-sa-copie-de-travail" id="toc-premières-interactions-avec-github-depuis-sa-copie-de-travail" class="nav-link" data-scroll-target="#premières-interactions-avec-github-depuis-sa-copie-de-travail">Premières interactions avec <code>Github</code> depuis sa copie de travail</a>
  <ul class="collapse">
  <li><a href="#envoyer-des-modifications-sur-le-dépôt-distant-push" id="toc-envoyer-des-modifications-sur-le-dépôt-distant-push" class="nav-link" data-scroll-target="#envoyer-des-modifications-sur-le-dépôt-distant-push">Envoyer des modifications sur le dépôt distant: <code>push</code></a></li>
  <li><a href="#la-fonctionnalité-pull" id="toc-la-fonctionnalité-pull" class="nav-link" data-scroll-target="#la-fonctionnalité-pull">La fonctionnalité <code>pull</code></a></li>
  </ul></li>
  <li><a href="#même-tout-seul-ne-pas-se-limiter-à-main" id="toc-même-tout-seul-ne-pas-se-limiter-à-main" class="nav-link" data-scroll-target="#même-tout-seul-ne-pas-se-limiter-à-main">Même tout seul, ne pas se limiter à <code>main</code></a></li>
  <li><a href="#un-cadavre-exquis-pour-découvrir-le-travail-collaboratif" id="toc-un-cadavre-exquis-pour-découvrir-le-travail-collaboratif" class="nav-link" data-scroll-target="#un-cadavre-exquis-pour-découvrir-le-travail-collaboratif">Un cadavre exquis pour découvrir le travail collaboratif</a>
  <ul class="collapse">
  <li><a href="#le-workflow-adopté" id="toc-le-workflow-adopté" class="nav-link" data-scroll-target="#le-workflow-adopté">Le <em>workflow</em> adopté</a></li>
  <li><a href="#méthode-pour-les-merges" id="toc-méthode-pour-les-merges" class="nav-link" data-scroll-target="#méthode-pour-les-merges">Méthode pour les merges</a></li>
  <li><a href="#mise-en-pratique" id="toc-mise-en-pratique" class="nav-link" data-scroll-target="#mise-en-pratique">Mise en pratique</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/git/exogit.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">

<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!-- source: https://raw.githubusercontent.com/spcanelon/silvia/32853dd0e70a71514b0922ee306f80ed5897f776/_partials/title-block-link-buttons/title-block.html -->
<!-- 
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title"> 
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->
    

<div class="cell markdown">
<p class="badges">
<a href="https://github.com/linogaliana/python-datascientist-notebooks/blob/main/notebooks/git/exogit.ipynb" class="github"><i class="fab fa-github"></i></a>
<a href="https://downgit.github.io/#/home?url=https://github.com/linogaliana/python-datascientist-notebooks/blob/main/notebooks/git/exogit.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Download-Notebook-important?logo=Jupyter" alt="Download"></a>
<a href="https://nbviewer.jupyter.org/github/linogaliana/python-datascientist-notebooksblob/main/notebooks/git/exogit.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Visualize-nbviewer-blue?logo=Jupyter" alt="nbviewer"></a>
<a href="https://datalab.sspcloud.fr/launcher/ide/jupyter-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%ABgit%20exogit%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange" alt="Onyxia"></a>
<a href="https://datalab.sspcloud.fr/launcher/ide/vscode-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-vscode.sh%C2%BB&amp;init.personalInitArgs=%C2%ABgit%20exogit%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_VSCode-blue?logo=visualstudiocode&amp;logoColor=blue" alt="Onyxia"></a><br>
<a href="https://mybinder.org/v2/gh/linogaliana/python-datascientist-notebooks/main?filepath={binder_path}" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Launch-Binder-E66581.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAMAAABi1XidAAAB8lBMVEX///9XmsrmZYH1olJXmsr1olJXmsrmZYH1olJXmsr1olJXmsrmZYH1olL1olJXmsr1olJXmsrmZYH1olL1olJXmsrmZYH1olJXmsr1olL1olJXmsrmZYH1olL1olJXmsrmZYH1olL1olL0nFf1olJXmsrmZYH1olJXmsq8dZb1olJXmsrmZYH1olJXmspXmspXmsr1olL1olJXmsrmZYH1olJXmsr1olL1olJXmsrmZYH1olL1olLeaIVXmsrmZYH1olL1olL1olJXmsrmZYH1olLna31Xmsr1olJXmsr1olJXmsrmZYH1olLqoVr1olJXmsr1olJXmsrmZYH1olL1olKkfaPobXvviGabgadXmsqThKuofKHmZ4Dobnr1olJXmsr1olJXmspXmsr1olJXmsrfZ4TuhWn1olL1olJXmsqBi7X1olJXmspZmslbmMhbmsdemsVfl8ZgmsNim8Jpk8F0m7R4m7F5nLB6jbh7jbiDirOEibOGnKaMhq+PnaCVg6qWg6qegKaff6WhnpKofKGtnomxeZy3noG6dZi+n3vCcpPDcpPGn3bLb4/Mb47UbIrVa4rYoGjdaIbeaIXhoWHmZYHobXvpcHjqdHXreHLroVrsfG/uhGnuh2bwj2Hxk17yl1vzmljzm1j0nlX1olL3AJXWAAAAbXRSTlMAEBAQHx8gICAuLjAwMDw9PUBAQEpQUFBXV1hgYGBkcHBwcXl8gICAgoiIkJCQlJicnJ2goKCmqK+wsLC4usDAwMjP0NDQ1NbW3Nzg4ODi5+3v8PDw8/T09PX29vb39/f5+fr7+/z8/Pz9/v7+zczCxgAABC5JREFUeAHN1ul3k0UUBvCb1CTVpmpaitAGSLSpSuKCLWpbTKNJFGlcSMAFF63iUmRccNG6gLbuxkXU66JAUef/9LSpmXnyLr3T5AO/rzl5zj137p136BISy44fKJXuGN/d19PUfYeO67Znqtf2KH33Id1psXoFdW30sPZ1sMvs2D060AHqws4FHeJojLZqnw53cmfvg+XR8mC0OEjuxrXEkX5ydeVJLVIlV0e10PXk5k7dYeHu7Cj1j+49uKg7uLU61tGLw1lq27ugQYlclHC4bgv7VQ+TAyj5Zc/UjsPvs1sd5cWryWObtvWT2EPa4rtnWW3JkpjggEpbOsPr7F7EyNewtpBIslA7p43HCsnwooXTEc3UmPmCNn5lrqTJxy6nRmcavGZVt/3Da2pD5NHvsOHJCrdc1G2r3DITpU7yic7w/7Rxnjc0kt5GC4djiv2Sz3Fb2iEZg41/ddsFDoyuYrIkmFehz0HR2thPgQqMyQYb2OtB0WxsZ3BeG3+wpRb1vzl2UYBog8FfGhttFKjtAclnZYrRo9ryG9uG/FZQU4AEg8ZE9LjGMzTmqKXPLnlWVnIlQQTvxJf8ip7VgjZjyVPrjw1te5otM7RmP7xm+sK2Gv9I8Gi++BRbEkR9EBw8zRUcKxwp73xkaLiqQb+kGduJTNHG72zcW9LoJgqQxpP3/Tj//c3yB0tqzaml05/+orHLksVO+95kX7/7qgJvnjlrfr2Ggsyx0eoy9uPzN5SPd86aXggOsEKW2Prz7du3VID3/tzs/sSRs2w7ovVHKtjrX2pd7ZMlTxAYfBAL9jiDwfLkq55Tm7ifhMlTGPyCAs7RFRhn47JnlcB9RM5T97ASuZXIcVNuUDIndpDbdsfrqsOppeXl5Y+XVKdjFCTh+zGaVuj0d9zy05PPK3QzBamxdwtTCrzyg/2Rvf2EstUjordGwa/kx9mSJLr8mLLtCW8HHGJc2R5hS219IiF6PnTusOqcMl57gm0Z8kanKMAQg0qSyuZfn7zItsbGyO9QlnxY0eCuD1XL2ys/MsrQhltE7Ug0uFOzufJFE2PxBo/YAx8XPPdDwWN0MrDRYIZF0mSMKCNHgaIVFoBbNoLJ7tEQDKxGF0kcLQimojCZopv0OkNOyWCCg9XMVAi7ARJzQdM2QUh0gmBozjc3Skg6dSBRqDGYSUOu66Zg+I2fNZs/M3/f/Grl/XnyF1Gw3VKCez0PN5IUfFLqvgUN4C0qNqYs5YhPL+aVZYDE4IpUk57oSFnJm4FyCqqOE0jhY2SMyLFoo56zyo6becOS5UVDdj7Vih0zp+tcMhwRpBeLyqtIjlJKAIZSbI8SGSF3k0pA3mR5tHuwPFoa7N7reoq2bqCsAk1HqCu5uvI1n6JuRXI+S1Mco54YmYTwcn6Aeic+kssXi8XpXC4V3t7/ADuTNKaQJdScAAAAAElFTkSuQmCC" alt="Binder"></a>
<a href="https://colab.research.google.com/github/linogaliana/python-datascientist-notebooks/blob/main/notebooks/git/exogit.ipynb" target="_blank" rel="noopener"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a>
<a href="https://github.dev/linogaliana/python-datascientist-notebooks/notebooks/git/exogit.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual%20Studio%20Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc" alt="githubdev"></a>
</p>
<p></p>
</div>
<p>Les exercices suivants sont inspirés d’un cours de Git que j’ai
participé à construire
à l’Insee et dont les ressources sont disponibles
<a href="https://inseefrlab.github.io/formation-bonnes-pratiques-git-R/">ici</a>. L’idée
du cadavre exquis est inspirée de
<a href="https://github.com/corent01/03-Swartz/blob/master/Parcours/01-La-prairie/git/exercice-git-cadavre-exquis.md">cette ressource</a> et de <a href="https://github.com/simplonco/cadavre-request">celle-ci</a>.</p>
<p>Cette partie part du principe que les concepts généraux de <code>Git</code> sont
maîtrisés et qu’un environnement de travail fonctionnel avec <code>Git</code> est
disponible. Un exemple de tel environnement est le <code>JupyterLab</code> ou l’environnement <code>VSCode</code> du
<code>SSPCloud</code> où une extension
<code>Git</code> est pré-installée :</p>
<p><a href="https://datalab.sspcloud.fr/launcher/ide/jupyter-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%ABgit%20exogit%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSPcloud-Tester%20via%20SSP--cloud-informational&amp;color=yellow?logo=Python" alt="Onyxia"></a></p>
<p>Outre le <a href="../../content/course/git/introgit.qmd">chapitre précédent</a>, il existe de
nombreuses ressources sur internet sur le sujet,
notamment une série de ressources construites
pour l’Insee <a href="https://inseefrlab.github.io/formation-bonnes-pratiques-git-R/">sur ce site</a>
et des ressources de la documentation collaborative sur <code>R</code> qu’est <code>utilitR</code>
(<a href="https://www.book.utilitr.org/03_fiches_thematiques/fiche_configurer_git">des éléments sur la configuration</a>
et <a href="https://www.book.utilitr.org/03_fiches_thematiques/fiche_git_utilisation">pratique sur RStudio</a>). Toutes
les ressources ne sont donc pas du <code>Python</code> car <code>Git</code> est un outil transversal
qui doit servir quel que soit le langage de prédilection.</p>
<p><code>Git</code> fait parti des pratiques collaboratives
devenues standards dans le domaine de l’<em>open-source</em>
mais également de plus en plus communes dans les administrations et entreprises
de la <em>data science</em>.</p>
<p>Ce chapitre propose, pour simplifier l’apprentissage,
d’utiliser l’ extension <code>Git</code> de <code>JupyterLab</code> ou de <code>VSCode</code>.
Un tutoriel présentant l’extension <code>JupyterLab</code> est disponible
<a href="https://annefou.github.io/jupyter_publish/02-git/index.html">ici</a>.
<code>VSCode</code> propose
probablement, à l’heure actuelle, l’ensemble le plus complet.</p>
<p>Certains passages de ce TD nécessitent d’utiliser la ligne de commande.
Il est tout à fait possible de réaliser ce TD entièrement avec celle-ci.
Cependant, pour une personne débutante en <code>Git</code>, l’utilisation d’une
interface graphique peut constituer un élément important pour
la compréhension et l’adoption de <code>Git</code>. Une fois à l’aise avec
<code>Git</code>, on peut tout à fait se passer des interfaces graphiques
pour les routines quotidiennes et ne les utiliser que
pour certaines opérations où elles s’avèrent fort pratiques
(notamment la comparaison de deux fichiers avant de devoir fusionner).</p>
<section id="configuration-du-compte-github" class="level1">
<h1>Configuration du compte Github</h1>
<section id="rappels-sur-la-notion-de-dépôt-distant" class="level2">
<h2 class="anchored" data-anchor-id="rappels-sur-la-notion-de-dépôt-distant">Rappels sur la notion de dépôt distant</h2>
<p>Comme expliqué dans le chapitre précédent,
il convient de distinguer
le dépôt distant (<em>remote</em>) et la copie ou les copies locales (les <em>clones</em>)
d’un dépôt. Le dépôt distant est généralement stocké sur une forge
logicielle (<code>Github</code> ou <code>Gitlab</code>) et sert à centraliser la version
collective d’un projet. Les copies locales sont des copies de travail</p>
<p><code>Git</code> est un système de contrôle de version asynchrone c’est-à-dire
qu’on n’interagit pas en continu avec le dépôt distant (comme c’est le
cas dans le système SVN) mais qu’il est possible d’avoir une version
locale qui se différencie du dépôt commun et qu’on rend cohérente
de temps en temps.</p>
<p>Bien qu’il soit possible d’avoir une utilisation hors-ligne de <code>Git</code>,
c’est-à-dire un pur contrôle de version local sans dépôt
distant, cela est une utilisation
rare et qui comporte un intérêt limité. L’intérêt de <code>Git</code> est
d’offrir une manière robuste et efficace d’interagir avec un
dépôt distant facilitant ainsi la collaboration en équipe ou en
solitaire.</p>
<p>Pour ces exercices, il est proposé
d’utiliser <code>Github</code>, la forge la plus visible.
L’avantage de <code>Github</code> par rapport à son principal concurrent, <code>Gitlab</code>,
est que le premier est plus visible, car
mieux indexé par <code>Google</code> et concentre, en partie pour des raisons historiques, plus
de développeurs <code>Python</code> et <code>R</code> (ce qui est important dans des domaines comme
le code où les externalités de réseau jouent).</p>
</section>
<section id="première-étape-créer-un-compte-github" class="level2">
<h2 class="anchored" data-anchor-id="première-étape-créer-un-compte-github">Première étape: créer un compte <code>Github</code></h2>
<p>Les deux premières étapes se font sur <a href="https://github.com"><code>Github</code></a>.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 1 : Créer un compte <code>Github</code></h3>
<ol type="1">
<li>Si vous n’en avez pas déjà un, créer un compte sur <a href="https://github.com">https://github.com</a></li>
<li>Créer un dépôt en suivant les consignes ci-dessous.</li>
</ol>
<ul>
<li>Créez ce dépôt <strong>privé</strong>, cela permettra
dans l’exercice 2 d’activer notre jeton. Vous pourrez le rendre public
après l’exercice 2, c’est comme vous le souhaitez.</li>
<li>Créer ce dépôt avec un <code>README.md</code> en cliquant sur la case <code>Add a README file</code></li>
<li>Ajouter un <code>.gitignore</code> en sélectionnant le modèle <code>Python</code></li>
</ul>
<p><em>Connexion sur <a href="https://github.com">https://github.com</a> &gt; + (en haut de la page) &gt; New repository &gt; Renseigner le “Repository name” &gt; Cocher “private” &gt; “Create repository”</em></p>
</div>
</div>
</section>
<section id="deuxième-étape-créer-un-token-jeton-https" class="level2">
<h2 class="anchored" data-anchor-id="deuxième-étape-créer-un-token-jeton-https">Deuxième étape: créer un <em>token</em> (jeton) HTTPS</h2>
</section>
<section id="principe" class="level2">
<h2 class="anchored" data-anchor-id="principe">Principe</h2>
<p><code>Git</code> est un système décentralisé de contrôle de version :
les codes sont modifiés par chaque personne sur son poste de travail,
puis sont mis en conformité avec la version collective disponible
sur le dépôt distant au moment où le contributeur le décide.</p>
<p>Il est donc nécessaire que la forge connaisse l’identité de chacun des
contributeurs, afin de déterminer qui est l’auteur d’une modification apportée
aux codes stockés dans le dépôt distant.
Pour que <code>Github</code> reconnaisse un utilisateur proposant des modifications,
il est nécessaire de s’authentifier (un dépôt distant, même public, ne peut pas être modifié par n’importe qui). L’authentification consiste ainsi à fournir un élément que seul vous et la forge sont censés connaître : un mot de passe, une clé compliquée, un jeton d’accès…</p>
<p>Plus précisément, il existe deux modalités pour faire connaître son identité à <code>Github</code> :</p>
<ul>
<li>une <strong>authentification HTTPS</strong> (décrite ici) : l’authentification se fait avec un login et un mot de passe ou avec un <em>token</em> (un mot de passe compliqué généré automatiquement par <code>Github</code> et connu exclusivement du détenteur du compte <code>Github</code>) ;</li>
<li>une <strong>authentification SSH</strong> : l’authentification se fait par une clé cryptée disponible sur le poste de travail et que <code>GitHub</code> ou <code>GitLab</code> connaît. Une fois configurée, cette méthode ne nécessite plus de faire connaître son identité : l’empreinte digitale que constitue la clé suffit à reconnaître un utilisateur.</li>
</ul>
<p>La <a href="https://www.book.utilitr.org/03_fiches_thematiques/fiche_configurer_git.html#interaction-avec-un-d%C3%A9p%C3%B4t-distant-principe">documentation collaborative <code>utilitR</code></a> présente les raisons pour lesquelles il convient de favoriser
la méthode HTTPS sur la méthode SSH.</p>
<div class="cell markdown">
<div class="alert alert-info" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-comment"></i> Note</h3>
<p>Depuis Août 2021, <code>Github</code> n’autorise plus l’authentification par mot de passe
lorsqu’on interagit (<code>pull</code>/<code>push</code>) avec un dépôt distant
(<a href="https://github.blog/changelog/2021-08-12-git-password-authentication-is-shutting-down/">raisons ici</a>).
Il est nécessaire d’utiliser un <em>token</em> (jeton d’accès) qui présente l’avantage
d’être révoquable (on peut à tout moment supprimer un jeton si, par exemple,
on suspecte qu’il a été diffusé par erreur) et à droits limités
(le jeton permet certaines opérations standards mais
n’autorise pas certaines opérations déterminantes comme la suppression
d’un dépôt).</p>
<p>À partir de mars 2023 et jusqu’à la fin de 2023, GitHub commencera progressivement à exiger que tous les utilisateurs de GitHub activent une ou plusieurs formes d’authentification à deux facteurs (2FA). Pour plus d’informations sur le déploiement de l’inscription 2FA, consultez <a href="https://github.blog/2023-03-09-raising-the-bar-for-software-security-github-2fa-begins-march-13/">cet article de blog</a>. Concrètement, cela signifie que vous devrez au choix :</p>
<ul>
<li>Renseigner votre numéro de portable pour valider certaines connexions grâce à un code que vous recevrez par sms ;</li>
<li>Installer une application d’authentification (Ex : Microsoft Authenticator) installée sur votre téléphone qui génèrera un QR code que vous pourrez scanner depuis github, ce qui ne nécessite pas que vous ayez à fournir votre numéro de téléphone</li>
<li>Utiliser une clef USB de sécurité</li>
</ul>
<p>Pour choisir entre ces différentes options, vous pouvez vous rendre sur <em>Settings &gt; Password and authentication &gt; Enable two-factor authentication</em>.</p>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-info" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-comment"></i> Note</h3>
<p>Il est important de ne jamais stocker un <em>token</em>, et encore moins son mot de passe, dans un projet.
Il est possible de stocker un mot de passe ou <em>token</em> de manière sécurisée et durable
avec le <em>credential helper</em> de <code>Git</code>. Celui-ci est présenté par la suite.</p>
<p>S’il n’est pas possible d’utiliser le <em>credential helper</em> de <code>Git</code>, un mot de passe
ou <em>token</em> peut être stocké de manière sécurisé dans
un système de gestion de mot de passe comme <a href="https://keepass.fr/">Keepass</a>.</p>
<p>Ne jamais stocker un jeton <code>Github</code>, ou pire un mot de passe, dans un fichier
texte non crypté. Les logiciels de gestion de mot de passe
(comme <a href="https://keepass.fr/">Keepass</a>, recommandé par l’Anssi)
sont simples
d’usage et permettent de ne conserver sur l’ordinateur qu’une version
hashée du mot de passe qui ne peut être décryptée qu’avec un mot de passe
connu de vous seuls.</p>
</div>
</div>
</section>
<section id="créer-un-jeton" class="level2">
<h2 class="anchored" data-anchor-id="créer-un-jeton">Créer un jeton</h2>
<p>La <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">documentation officielle</a> comporte un certain nombre de captures d’écran expliquant
comment procéder.</p>
<p>Nous allons utiliser le <code>credential helper</code> associé à <code>Git</code> pour stocker
ce jeton. Ce <code>credential helper</code> permet de conserver de manière pérenne
un jeton (on peut aussi faire en sorte que le mot de passe soit automatiquement
supprimé de la mémoire de l’ordinateur au bout, par
exemple, d’une heure).</p>
<p>L’inconvénient de cette méthode est que <code>Git</code> écrit en clair le jeton dans
un fichier de configuration. C’est pour cette raison qu’on utilise des jetons
puisque, si ces derniers sont révélés, on peut toujours les révoquer et éviter
les problèmes (pour ne pas stocker en clair un jeton il faudrait utiliser
une librairie supplémentaire comme <code>libsecrets</code> qui est au-delà du programme
de ce cours).</p>
<p>Si vous désirez conserver de manière plus durable ou plus sécurisée votre jeton
(en ne conservant pas le jeton en clair mais de manière hashée),
est d’utiliser un gestionnaire de mot de passe comme
<a href="https://keepass.fr/">Keepass</a> (recommandé par l’Anssi). Néanmoins,
il est recommandé de tout de même fixer une date d’expéritation
aux jetons pour limiter les risques de sécurité d’un <em>token</em> qui fuite
sans s’en rendre compte.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 2.0 : Créer un service sur le SSPCloud</h3>
<p>En amont de l’exercice 2, pour les utilisateurs
du <code>SSPCloud</code>,
il est recommandé d’ouvrir un service <code>Jupyter</code>
en suivant les consignes suivantes:</p>
<ul>
<li>Dans la page <code>Mes services</code>, cliquer sur le bouton <code>Nouveau service</code> ;</li>
<li>Choisir <code>Jupyter-Python</code> ;</li>
<li>Cliquer sur <code>Configuration Jupyter-Python</code>. ⚠️ ne pas lancer le service
tout de suite !</li>
<li>Faire défiler les onglets pour arriver sur l’onglet <code>Git</code> ;</li>
<li>Remplacer la valeur sous <code>Cache</code> par un nombre important,
par exemple <code>36000</code> pour que le jeton que vous utiliserez soit
valable 10 heures ;</li>
<li>Lancer le service.</li>
</ul>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 2 : Créer et stocker un token</h3>
<p>1️⃣ Suivre la
<a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">documentation officielle</a> en ne donnant que les droits <code>repo</code> au jeton (ajouter les droits
<code>workflow</code> si vous désirez que votre jeton soit utilisable pour des projets
où l’intégration continue est nécessaire).</p>
<p>Pour résumer les étapes devraient être les suivantes :</p>
<p><em>Settings &gt; Developers Settings &gt; Personal Access Token &gt; Generate a new token &gt; “My bash script” &gt; Expiration “30 days” &gt; cocher juste “repo” &gt; Generate token &gt; Le copier</em></p>
<p>2️⃣ Ouvrir un terminal depuis <code>Jupyter</code> (par exemple <code>File &gt; New &gt; Terminal</code>) ou <code>VSCode</code> (<code>Terminal &gt; New Terminal</code>).</p>
<p>3️⃣ [Optionnel] Taper dans le terminal la commande
qui convient selon votre système d’exploitation pour activer le
<code>credential helper</code>:</p>
<pre class="shell"><code># Sous mac et linux et le datalab
git config --global credential.helper store

# Sous windows
git config --global credential.helper manager-core</code></pre>
<p>4️⃣ Récupérer, sur la page d’accueil de votre dépôt, l’url du dépôt distant.
Il prend la forme suivante</p>
<p><code>https://github.com/&lt;username&gt;/&lt;reponame&gt;.git</code></p>
<p>Vous pouvez utiliser l’icone à droite pour copier l’url.</p>
<p>5️⃣ Retournez dans le Terminal. Taper</p>
<pre class="shell"><code>git clone repo_url</code></pre>
<p>où <code>repo_url</code> est l’url du dépôt en question (vous pouvez utiliser
<kbd>MAJ</kbd>+<kbd>Inser</kbd> pour coller l’url précédemment copié)</p>
<p>Tapez <kbd>Entrée</kbd>. Dans le cas d’un répertoire privé et sans credential helper, renseignez ensuite votre identifiant, faites <kbd>Entrée</kbd>, puis votre personal access token, <kbd>Entrée</kbd>. Si vous n’avez pas d’erreur, cela signifie
que l’authentification a bien fonctionné et donc que tout va
bien. Sinon, il vous suffit de réécrire l’instruction <code>git clone</code> et de retenter de taper votre personal access token. Normalement, si vous avez créé un dépôt vide dans l’exercice 1,
vous avez un message de <code>Git</code>:</p>
<blockquote class="blockquote">
<p>warning: You appear to have cloned an empty repository.</p>
</blockquote>
<p>Ce n’est pas une erreur mais il est préférable de suivre la
consigne de l’exercice 1 et de créer un projet non vide.
Le dossier de votre projet a bien
été créé.</p>
<p>Si vous avez une erreur, suivez la consigne présentée ci-après
pour réinitialiser
votre <em>credential helper</em></p>
<p>6️⃣ Si vous le désirez, vous pouvez changer la visibilité de votre dépôt
en le rendant public.</p>
<p>7️⃣ Stocker le token sur le SSP Cloud (ou un gestionnaire de mot de passe) :</p>
<blockquote class="blockquote">
<p>Mon Compte -&gt; Services externes -&gt; Jeton d’accès personnel GitHub</p>
</blockquote>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-info" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-comment"></i> Note</h3>
<p>Si vous avez fait une faute de frappe dans le mot de passe ou dans le jeton, il est possible de vider la mémoire
de la manière suivante, sous Mac ou Linux :</p>
<pre class="shell"><code>git config --global --unset credential.helper</code></pre>
<p>Sous Windows, si vous avez utilisé l’option <code>manager-core</code> évoquée ci-dessus, vous pouvez utiliser une interface graphique pour effacer le mot de passe ou jeton erroné. Pour cela, dans le menu démarrer, taper <code>Gestionnaire d'identification</code> (ou <code>Credential Manager</code> si Windows ne trouve pas). Dans l’interface graphique qui s’ouvre, il est possible de supprimer le mot de passe ou jeton en question. Après cela, vous devriez à nouveau avoir l’opportunité de taper un mot de passe ou jeton lors d’une authentification HTTPS.</p>
</div>
</div>
</section>
</section>
<section id="premier-commit" class="level1">
<h1>Premier commit</h1>
<p>A ce stade, nous avons configuré <code>Git</code> pour être en mesure
de s’authentifier automatiquement et nous avons cloné le dépôt pour avoir une
copie locale de travail.</p>
<p>On n’a encore ajouté aucun fichier à <code>Git</code> en supplément
de ceux créés en même temps que le dépôt. Nous allons
créer ces premiers fichiers</p>
<p>::: {.cell .markdown}</p>
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored" data-anchor-id="premier-commit"><i class="fa-solid fa-pencil"></i> Exercice 3 : Le fichier <code>.gitignore</code></h3>
<p>L’une des premières
choses à faire est d’exclure un certain nombre de fichiers, afin de ne pas
faire une erreur pénible à réparer.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 3 : Indexer des modifications</h3>
<ol type="1">
<li>Créer un dossier 📁 <code>scripts</code> depuis l’interface de <code>Jupyter</code></li>
<li>Y créer les fichiers <code>script1.py</code> et <code>script2.py</code>, chacun contenant quelques commandes <code>Python</code> de votre choix (le contenu de ces fichiers n’est pas important).</li>
</ol>
<p>Sur la session <code>Jupyter</code> d’<code>Onyxia</code>, si le <code>Clic Droit &gt; rename</code> ne fonctionne pas, vous pouvez faire : <code>File &gt; New &gt; Text file</code> après vous être assurés que vous vous situez bien dans le dossier <nom_du_projet> de l’arborescence. Un fichier <code>untitled.txt</code> se crée. Vous pouvez le renommer,
en n’oubliant pas de changer l’extension en <code>.py</code>.</nom_du_projet></p>
<ol start="3" type="1">
<li>Se rendre dans l’extension <code>Git</code> de <code>Jupyter</code> ou de <code>VSCode</code>. Vous devriez
retrouver un cadre ayant cet aspect (à gauche pour <code>Jupyter</code> et à droite pour <code>VSCode</code>).</li>
</ol>
<div id="fig-status" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="git-status-ensae.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="git-status-ensae.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="git_vscode_1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="git_vscode_1.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2.1: Interface graphique Git sous Jupyter (à gauche) et VSCode (à droite)</figcaption><p></p>
</figure>
</div>
<p>En ligne de commande, c’est l’équivalent de</p>
<pre class="shell"><code>git status</code></pre>
<ol start="2" type="1">
<li>Sur <code>Jupyter</code>, en passant votre souris au dessus du nom des fichiers <code>script1.py</code> et
<code>script2.py</code>, vous devriez voir
un <code>+</code> apparaître. Cliquez dessus. Sur <code>VSCode</code>, un bouton <code>+</code> figure à droite du nom
du fichier <code>.script1.py</code> et
<code>.script2.py</code>.</li>
</ol>
<p>Si vous aviez privilégié la ligne de commande, ce que vous avez fait est équivalent à :</p>
<pre class="shell"><code>git add scripts/script1.py
git add scripts/script2.py</code></pre>
<p>Pour se remémorer ce que signifie <code>git add</code>, vous pouvez vous rendre
sur <a href="https://inseefrlab.github.io/formation-bonnes-pratiques-git-R/">ce cours dédié à <code>Git</code></a>.</p>
<ol start="3" type="1">
<li>Observer le changement de statut du fichier après avoir cliqué sur <code>+</code>. Il est
désormais dans la partie <code>Staged</code>
En gros, vous venez de dire à Git que vous allez rendre publique une évolution
du fichier, mais vous ne l’avez pas encore fait (<code>Staged</code> est une liste d’attente).</li>
</ol>
<p>Si vous étiez en ligne de commande vous auriez ce résultat après un <code>git status</code></p>
<pre class="raw"><code>On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached &lt;file&gt;..." to unstage)
        new file:   .gitignore</code></pre>
<p>Les nouvelles modifications (en
l’occurrence la création du fichier et la validation de son contenu actuel)
ne sont pas encore archivées. Pour cela, il va falloir faire un
<code>commit</code> (on rend publique une modification)</p>
<ol start="4" type="1">
<li>Avant cela, regardons les modifications qu’on va prochainement
valider. Pour cela, passez la souris au dessus du nom du fichier
<code>.gitignore</code> et cliquer sur le bouton <code>Diff this file</code> (+ -).
Une page s’ouvre et met en regard la version antérieure avec
les ajouts en vert et les suppressions en rouge. Nous retrouverons
cette visualisation avec l’interface <code>Github</code>, plus tard.</li>
</ol>
<p>En l’occurrence, comme le fichier n’existait pas, normalement nous n’avons que
des ajouts.</p>
<p>Il est également possible d’effectuer cela avec la ligne de commande mais c’est
beaucoup moins pratique. Pour cela, la commande à appeler est <code>git diff</code> et
il est nécessaire d’utiliser l’option <code>cached</code> pour lui dire d’inspecter les
fichiers pour lesquels on n’a pas encore effectué de <code>commit</code>. En vert
apparaîtront les modifications et en rouge les suppressions mais, cette fois,
les résultats ne seront pas mis côte-à-côte ce qui est beaucoup moins
pratique.</p>
<pre class="shell"><code>git diff --cached</code></pre>
</div>
</div>
<p>Il est temps de valider notre modification. Cette opération
s’appelle <code>commit</code> en langage <code>Git</code> et, comme son nom l’indique, il
s’agit d’une proposition de modification sur laquelle, en quelques
sortes, on s’engage.</p>
<p>Un <em>commit</em> comporte un titre et éventuellement une description. A ces
informations, <code>Git</code> ajoutera automatiquement quelques éléments
supplémentaires, notamment l’auteur du commit (pour identifier la personne
ayant proposé cette modification) et l’horodatage (pour identifier le moment
où cette modification a été proposée). Ces informations permettront d’identifier
de manière unique le <code>commit</code> auquel sera ajouté un identifiant aléatoire
unique (un numéro SHA) qui permettra de faire référence à celui-ci sans
ambiguïté.</p>
<p>Le titre est important car il s’agit, pour un humain, du point d’entrée
dans l’histoire d’un dépôt (voir par exemple
<a href="https://github.com/linogaliana/python-datascientist/commits/master">l’histoire du dépôt du cours</a>.
Les titres vagues
(<em>Mise à jour du fichier</em>, <em>Update</em>…) sont à bannir car ils
nécessiteront un effort inutile pour comprendre les fichiers modifiés.</p>
<p>N’oubliez pas que votre premier collaborateur est votre <em>moi futur</em> qui,
dans quelques semaines, ne se souviendra pas en quoi consistait
le commit <em>Update</em> du 12 janvier et en quoi il se distingue du
<em>Update</em> du 13 mars.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 4 : Premier commit (enfin !)</h3>
<p>Sur <code>Jupyter</code>, tout se passe dans la partie inférieure de l’interface graphique.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="git-panel-jupyter.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="git-panel-jupyter.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Sur <code>VSCode</code>, il faut au contraire regarder en haut.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="git_vscode_2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="git_vscode_2.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>1️⃣ Entrer le titre <code>Initial commit</code> et ajouter une description
<code>Création des premiers fichiers 🎉</code>.
Sur <code>VSCode</code>, le titre du commit correspond à la
première ligne du message de commit, les lignes suivantes correspondent à la
description.</p>
<p>Le fait de nommer le premier commit <em>“Initial commit”</em> est une
habitude, vous
n’êtes pas obligé de suivre cette convention si elle ne vous plaît pas.</p>
<p>2️⃣ Cliquer sur <code>Commit</code>. Le fichier a disparu de la liste, c’est normal,
il n’a plus de modification à valider. Pour le retrouver dans la liste
des fichiers <code>Changed</code>, il faudra le modifier à nouveau</p>
<p>3️⃣ Sur <code>Jupyter</code>, cliquer sur l’onglet <code>History</code> ou sur <code>VSCode</code> cliquer
sur l’icône <code>View Git Graph</code>. Votre <code>commit</code> apparaît à ce niveau.
Si vous cliquez dessus, vous obtenez des informations sur le <code>commit</code>.</p>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-info" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-comment"></i> Note</h3>
<p>Si vous utilisiez la ligne de commande, la manière équivalente de faire
serait</p>
<pre class="shell"><code>git commit -m "Initial commit" -m "Création des premiers fichiers 🎉"</code></pre>
<p>L’option <code>m</code> permet de créer un message, qui sera disponible à l’ensemble
des contributeurs du projet. Avec la ligne de commande, ce n’est pas toujours
très pratique. Les interfaces graphiques permettent des messages plus
développés (la bonne pratique veut qu’on écrive un message de commit comme un
mail succinct : un titre et un peu d’explications, si besoin).</p>
</div>
</div>
<p>❓ Question : à ce stade, le dépôt du projet sur <code>GitHub</code> (<em>remote</em>) a-t-il été modifié ?</p>
</div></section>
<section id="le-fichier-.gitignore" class="level1">
<h1>Le fichier <code>.gitignore</code></h1>
<p>Lorsqu’on utilise <code>Git</code>, il y a des fichiers qu’on ne veut pas partager
ou dont on ne veut pas suivre les modifications (typiquement les grosses bases de données).</p>
<p>C’est le fichier <code>.gitignore</code>
qui gère les fichiers exclus du contrôle de version.
Lors de la création du projet sur <code>GitHub</code>, nous avons demandé la création d’un fichier <code>.gitignore</code>, qui se situe à la racine du projet. Il spécifie l’ensemble des fichiers qui seront toujours exclus de l’indexation faite par <code>Git</code>.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored" data-anchor-id="le-fichier-.gitignore"><i class="fa-solid fa-pencil"></i> Exercice 5 : Le fichier <code>.gitignore</code></h3>
<p>1️⃣ Par défaut, le fichier <code>.gitignore</code> n’est pas affiché car
les fichiers <code>.*</code> sont des fichiers de configuration. Il faut activer
une option pour l’afficher. Tout en haut
de <code>Jupyter</code>, cliquer sur <code>View -&gt; Show Hidden Files</code></p>
<p>2️⃣ Ouvrir ce fichier maintenant qu’il s’affiche et observer
quelques règles écrites dedans</p>
<p>3️⃣ Créer un dossier <code>data</code> à la racine du projet et créer à l’intérieur de celui-ci un fichier <code>data/raw.csv</code> avec une ligne de données quelconque</p>
<p>4️⃣ Ajouter au <code>.gitignore</code> le dossier <code>data/</code></p>
<p>5️⃣ Vérifier que toutes les règles ajoutées précédemment fonctionnent comme attendu</p>
</div>
</div>
<p>❓ <strong>Question</strong> : que se passe-t-il lorsque l’on ajoute au <code>.gitignore</code> des fichiers qui ont déjà été <em>commit</em> sur le projet Git ?</p>
</section>
<section id="premières-interactions-avec-github-depuis-sa-copie-de-travail" class="level1">
<h1>Premières interactions avec <code>Github</code> depuis sa copie de travail</h1>
<p>Jusqu’à présent, après avoir cloné le dépôt, on a travaillé uniquement
sur notre copie locale. On n’a pas cherché à interagir à nouveau
avec <code>Github</code>.</p>
<p>Cependant, il existe bien une connexion entre notre dossier local et
le dépôt <code>Github</code>. On peut s’en assurer en tapant dans un terminal</p>
<pre class="shell"><code>git remote -v</code></pre>
<p>Le dépôt distant s’appelle <code>remote</code> en langage Git. L’option <code>-v</code> (<em>verbose</em>)
permet de lister le(s) dépôt(s) distant(s). Le résultat devrait avoir la
structure suivante :</p>
<pre class="raw"><code>origin  https://github.com/&lt;username&gt;/&lt;projectname&gt;.git (fetch)
origin  https://github.com/&lt;username&gt;/&lt;projectname&gt;.git (push)</code></pre>
<p>Plusieurs informations sont intéressantes dans ce résultat. D’abord on
retrouve bien l’url qu’on avait renseigné à <code>Git</code> lors de l’opération
de clonage. Ensuite, on remarque un terme <code>origin</code>. C’est un alias
pour l’url qui suit. Cela évite d’avoir, à chaque fois, à taper l’ensemble
de l’url, ce qui peut être pénible et source d’erreur.</p>
<p><code>fetch</code> et <code>push</code>
sont là pour nous indiquer qu’on récupère (<code>fetch</code>) des modifications
d’<code>origin</code> mais qu’on envoie également (<code>push</code>) des modifications vers
celui-ci. Généralement, les url de ces deux dépôts sont les mêmes mais cela peut
arriver, lorsqu’on contribue à des projets opensource qu’on n’a pas créé,
qu’ils diffèrent<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<section id="envoyer-des-modifications-sur-le-dépôt-distant-push" class="level2">
<h2 class="anchored" data-anchor-id="envoyer-des-modifications-sur-le-dépôt-distant-push">Envoyer des modifications sur le dépôt distant: <code>push</code></h2>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 6 : Interagir avec <code>Github</code></h3>
<p>Il convient maintenant d’envoyer les fichiers sur le dépôt distant.</p>
<!----
A voir si on va pas devoir faire ça plus tard

1. Récupérer l'url du dépôt. Dans `Github`, il faut cliquer sur
le bouton `Code` comme ci-dessous

![](gitclone.png)

2. Créer la connexion avec le dépôt distant (`remote`), qu'on va nommer `origin`,
en utilisant la commande suivante :

~~~~shell
git remote add origin ****
~~~~
Remplacer les astérisques par l'url du dépôt. 
---->
<p>1️⃣
L’objectif est d’envoyer vos modifications vers <code>origin</code>.
On va passer par la ligne de commande car les boutons <code>push</code>/<code>pull</code>
de l’extension <code>Jupyter</code> ne fonctionnent pas de manière systématique.</p>
<p>Taper</p>
<pre class="shell"><code>git push origin main</code></pre>
<p>Cela signifie: <em>“git envoie (<code>push</code>) mes modifications sur la
branche <code>main</code> (la branche sur laquelle on a travaillé, on reviendra
dessus) vers mon dépôt (alias
<code>origin</code>)”</em></p>
<p><em>Remarque : Si vous obtenez l’erreur suivante <code>error: src refspec hello does not match any</code>, c’est probablement que vous avez indiqué le mauvais nom de branche. La confusion se fait souvent entre le nom <code>main</code> ou <code>master</code> (ancienne norme de branche par défaut).</em></p>
<p>Normalement, si vous avez utilisé le <code>credential helper</code>, <code>Git</code> ne
vous demande pas vos identifiants de connexion. Sinon,
il faut taper
votre identifiant Github et <strong>votre mot de passe correspond au personal access token nouvellement créé</strong> !</p>
<p>2️⃣ Retournez voir le dépôt sur <code>Github</code>, vous devriez maintenant voir le fichier
<code>.gitignore</code> s’afficher en page d’accueil.</p>
</div>
</div>
</section>
<section id="la-fonctionnalité-pull" class="level2">
<h2 class="anchored" data-anchor-id="la-fonctionnalité-pull">La fonctionnalité <code>pull</code></h2>
<p>La deuxième manière d’interagir avec le dépôt est de récupérer des
résultats disponibles en ligne sur sa copie de travail. On appelle
cela <code>pull</code>.</p>
<p>Pour le moment, vous êtes tout seul sur le dépôt. Il n’y a donc pas de
partenaire pour modifier un fichier dans le dépôt distant. On va simuler ce
cas en utilisant l’interface graphique de <code>Github</code> pour modifier
des fichiers. On rappatriera les résultats en local dans un deuxième temps.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 7 : Rapatrier des modifs en local</h3>
<p>1️⃣ Se rendre sur votre dépôt depuis l’interface <a href="https://github.com" class="uri">https://github.com</a>.
2 manières de faire à ce niveau :</p>
<ul>
<li>Cliquer sur <code>Add file &gt; Create new file</code> et appeler le fichier <code>README.md</code></li>
<li>Cliquer sur le bouton <code>ADD A README</code> qui est affiché sur la page d’accueil de votre projet.
Supprimez tout autre texte si <code>Github</code> vous a suggéré un contenu pour le
<code>README</code></li>
</ul>
<p>2️⃣ L’objectif est de
donner au <code>README.md</code> un titre en ajoutant, au début du document, la ligne suivante :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Mon oeuvre d'art surréaliste </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sautez une ligne et entrez le texte que vous désirez, sans ponctuation. Par exemple,</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>le chêne un jour dit au roseau</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>3️⃣ Cliquez sur l’onglet <code>Preview</code> pour voir le texte mis en forme au format <code>Markdown</code></p>
<p>4️⃣ Rédiger un titre et un message complémentaire pour faire le <code>commit</code>. Conserver
l’option par défaut <code>Commit directly to the main branch</code></p>
<p>5️⃣ Editer à nouveau le <code>README</code> en cliquant sur le crayon juste au dessus
de l’affichage du contenu du <code>README</code>.</p>
<p>Ajouter une deuxième phrase et corrigez la
ponctuation de la première. Ecrire un message de commit et valider.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="an">Le Chêne un jour dit au roseau :</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>Vous avez bien sujet d'accuser la Nature</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>6️⃣ Au dessus de l’aborescence des fichiers, vous devriez voir s’afficher le
titre du dernier commit. Vous pouvez cliquer dessus pour voir la modification
que vous avez faite.</p>
<p>7️⃣ Les résultats sont sur le dépôt distant mais ne sont pas sur votre
dossier de travail dans <code>Jupyter</code> ou <code>VSCode</code>. Il faut re-synchroniser votre copie locale
avec le dépôt distant :</p>
<ul>
<li>Sur <code>VSCode</code>, cliquez simplement sur <code>... &gt; Pull</code> à côté du bouton qui permet
de visualiser le graphe Git.</li>
<li>Avec l’interface <code>Jupyter</code>, si cela est possible, appuyez tout simplement sur la petite
flèche vers le bas, qui est celle qui a désormais la pastille orange.</li>
<li>Si cette flèche n’est pas disponible ou si vous travaillez dans un autre
environnement, vous pouvez utiliser la ligne de
commande et taper</li>
</ul>
<pre class="shell"><code>git pull origin main</code></pre>
<p>Cela signifie : <em>“git récupère (<code>pull</code>) les modifications sur la
branche <code>main</code> vers mon dépôt (alias
<code>origin</code>)”</em></p>
<p>8️⃣ Regarder à nouveau l’historique des commits. Cliquez sur le
dernier commit et affichez les changements sur le fichier. Vous pouvez
remarquer la finesse du contrôle de version : <code>Git</code> détecte au sein de
la première ligne de votre texte que vous avez mis des majuscules
ou de la ponctuation.</p>
</div>
</div>
<p>L’opération <code>pull</code> permet :</p>
<ol type="1">
<li>A votre système local de vérifier les modifications sur le dépôt distant
que vous n’auriez pas faites (cette opération s’appelle <code>fetch</code>)</li>
<li>De les fusionner s’il n’y a pas de conflit de version ou si les conflits de
version sont automatiquement fusionnables (deux modifications d’un fichier mais
qui ne portent pas sur le même emplacement).</li>
</ol>
</section>
</section>
<section id="même-tout-seul-ne-pas-se-limiter-à-main" class="level1">
<h1>Même tout seul, ne pas se limiter à <code>main</code></h1>
<p>Au début d’une tâche particulière ou d’un projet, il est recommandé d’ouvrir des <em>issues</em>. Prenant la forme d’un espace de discussion, elles correpondront à la fin à des nouvelles fonctionnalités (en anglais, <em>features</em>). Les issues permettent également de signaler des bugs constatés, de se les répartir et d’indiquer s’ils sont réglés ou s’ils ont avancés. Une utilisation intensive des <em>issues</em>, avec des labels adéquats, peut
même amener à se passer d’outils de gestion de projets comme <code>Trello</code>.</p>
<p>La branche <code>main</code> est la branche principale. Elle se doit d’être “propre”. Si on veut être rigoureux, on ne pousse pas des travaux non aboutis sur <code>main</code>.</p>
<p>Il est possible de pousser directement sur <code>main</code> dans le cas de petites corrections, de modifications mineures dont vous êtes certains qu’elles vont fonctionner. Mais sachez que dans le cadre de projets sensibles, c’est strictement interdit. N’ayez pas peur de fixer comme règle l’interdiction de pousser sur <code>main</code>, cela obligera l’équipe projet à travailler professionnellement.</p>
<p>Au moindre doute, créez une branche. Les branches sont utilisées pour des travaux significatifs :</p>
<ul>
<li>vous travaillez seul sur une tâche qui va vous prendre plusieurs heures ou jours de travail (vous ne devez pas pousser sur <code>main</code> des travaux non aboutis);</li>
<li>vous travaillez sur une fonctionnalité nouvelle et vous souhaiterez recueillir l’avis de vos collaborateurs avant de modifier <code>main</code>;</li>
<li>vous n’êtes pas certain de réussir vos modifications du premier coup et préférez faire des tests en parallèle.</li>
</ul>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<i class="fa-solid fa-triangle-exclamation"></i> Warning
<p>Les branches ne sont pas personnelles : <strong>Toutes les branches sont publiées, le <code>rebase</code> est interdit. Le push force est également interdit.</strong></p>
<p>Il faut <strong>absolument</strong> bannir les usages de <code>push force</code> qui peuvent déstabiliser les copies locales des collaborateurs. S’il est nécessaire de faire un <code>push force</code>, c’est qu’il y a un problème dans la branche, à identifier et régler <strong>sans</strong> faire <code>push force</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://miro.medium.com/max/400/0*XaLzNzYkA6PZjbl9.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="https://miro.medium.com/max/400/0*XaLzNzYkA6PZjbl9.jpg" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p><strong>Tous les merges dans <code>main</code> doivent se faire par l’intermédiaire d’une <code>pull request</code> dans <code>Github</code></strong>. En effet, il est très déconseillé de merger une branche dans main localement.</p>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored" data-anchor-id="même-tout-seul-ne-pas-se-limiter-à-main"><i class="fa-solid fa-pencil"></i> Exercice 8: Créer une nouvelle branche et l'intégrer dans main</h3>
<p>1️⃣ Ouvrir une <em>issue</em> sur <code>Github</code>. Signaler qu’il serait bien d’ajouter un emoji chat dans le README. Dans la partie de droite, cliquer sur la petite roue à côté de <code>Label</code> et cliquer sur <code>Edit Labels</code>. Créer un label <code>Markdown</code>. Normalement, le label a été ajouté.</p>
<p>2️⃣ Retournez sur votre dépôt local. Vous allez créer une branche nommée
<code>issue-1</code></p>
<p>Avec l’interface graphique de JupyterLab, cliquez sur <code>Current Branch - Main</code>
puis sur le bouton <code>New Branch</code>. Rentrez <code>issue-1</code> comme nom de branche
(la branche doit être créée depuis <code>main</code>, ce qui est normalement le choix
par défaut) et cliquez sur <code>Create Branch</code>.</p>
<p>Sur VSCode, cliquez sur <code>... &gt; Branch &gt; Create Branch</code> et entrez le nom <code>issue-1</code>.</p>
<p>Si vous n’utilisez pas l’interface graphique mais la ligne de commande, la
manière équivalente de faire est<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<pre class="shell"><code>git checkout -b issue-1</code></pre>
<p>3️⃣ Ouvrez <code>README.md</code> et ajoutez un emoji chat (<code>:cat:</code>) à la suite du titre.
Faites un commit en refaisant les étapes vues dans les exercices
précédents. N’oubliez pas, cela se fait en deux étapes:</p>
<ol type="1">
<li>Ajoute les modifications à l’index en déplacant le fichier <code>README</code> dans
la partie <code>Staged</code></li>
<li>Validation des modifications avec un <code>commit</code></li>
</ol>
<p>Si vous passez par la ligne de commande, cela donnera:</p>
<pre class="shell"><code>git add .
git commit -m "ajout emoji chat"</code></pre>
<p>4️⃣ Faire un <strong>deuxième commit</strong> pour ajouter un emoji koala (:koala:) puis
pousser les modifications locales.</p>
<p>Cela peut être fait avec l’interface
de <code>JupyterLab</code> grâce au bouton avec une flêche montante (il doit apparaître
en orange maintenant). Sur <code>VSCode</code>, cliquez sur le bouton <code>Publish Branch</code>.</p>
<p>Sinon, si vous utilisez la ligne de commande, vous devrez taper</p>
<pre class="shell"><code>git push origin issue-1</code></pre>
<p>5️⃣ Dans <code>Github</code>, devrait apparaître</p>
<blockquote class="blockquote">
<p><code>issue-1 had recent pushes XX minutes ago</code>.</p>
</blockquote>
<p>Cliquer sur <code>Compare &amp; Pull Request</code>. Donner un titre informatif à votre <em>pull request</em>
Dans le message en dessous, taper</p>
<blockquote class="blockquote">
<p><code>- close #1</code></p>
</blockquote>
<p>Le tiret est une petite astuce pour que <code>Github</code>
remplace le numéro de l’issue par le titre.</p>
<p>Cliquez sur <code>Create Pull Request</code> mais
<strong>ne validez pas la fusion</strong>, on le fera dans un second temps.</p>
<p>Le fait d’avoir mis un message <code>close</code> suivi d’un numéro d’issue <code>#1</code>
permettra de fermer automatiquement l’<em>issue 1</em> lorsque vous ferez le <em>merge</em>.
En attendant, vous avez créé un lien entre l’<em>issue</em> et la <em>pull request</em></p>
<p>Au passage, vous pouvez ajouter le label <code>Markdown</code> sur la droite.</p>
<p>6️⃣ En local, retourner sur <code>main</code>. Dans l’interface <code>Jupyter</code>, il suffit
de cliquer sur <code>main</code> dans la liste des branches. Sur <code>VSCode</code>, la liste des branches
apparaît en cliquant sur le nom de la branche actuelle (<code>issue-1</code> en théorie à ce stade).
Si vous êtes en ligne de commande, il faut faire</p>
<pre class="shell"><code>git checkout main</code></pre>
<p><code>checkout</code> est une commande <code>Git</code> qui permet de naviguer d’une branche à l’autre
(voire d’un commit à l’autre).</p>
<p>Ajouter une phrase à la suite de votre texte dans le <code>README.md</code>
(ne touchez pas au titre !). Vous pouvez remarquer que les emojis
ne sont pas dans le titre, c’est normal vous n’avez pas encore fusionné les versions</p>
<p>7️⃣ Faire un commit et un push. En ligne de commande, cela donne</p>
<pre class="shell"><code>git add .
git commit -m "ajoute un troisième vers"
git push origin main</code></pre>
<p>8️⃣ Sur <code>Github</code>, cliquer sur <code>Insights</code> en haut du dépôt puis, à gauche sur <code>Network</code> (cela n’est
possible que si vous avez rendu public votre dépôt).</p>
<p>Vous devriez voir apparaître l’arborescence de votre dépôt. On peut voir <code>issue-1</code> comme une ramification et <code>main</code> comme le tronc.</p>
<p>L’objectif est maintenant de ramener les modifications faites dans <code>issue-1</code> dans la branche principale. Retournez dans l’onglet <code>Pull Requests</code>. Là, changer le type de <code>merge</code> pour <code>Squash and Merge</code>, comme ci-dessous (petit conseil : choisissez toujours cette méthode de <em>merge</em>).</p>
<p>Une fois que cela est fait, vous pouvez retourner dans <code>Insights</code> puis <code>Network</code> pour vérifier que tout s’est bien passé comme prévu.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="squashmerge.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="squashmerge.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>9️⃣ Supprimer la branche (<em>branch &gt; delete this branch</em>). Puisqu’elle est mergée, elle ne servira plus. La conserver risque d’amener à des <code>push</code> involontaires dessus.</p>
</div>
</div>
<p>L’option de fusion <em>Squash and Merge</em> permet de regrouper tous les commits d’une branche (potentiellement très nombreux) en un seul dans la branche de destination. Cela évite, sur les gros projets, des branches avec des milliers de <em>commits</em>.</p>
<p>Je recommande de toujours utiliser cette technique et non les autres.
Pour désactiver les autres techniques, vous pouvez aller dans
<code>Settings</code> et dans la partie <code>Merge button</code> ne conserver cochée que la
méthode <code>Allow squash merging</code></p>
</section>
<section id="un-cadavre-exquis-pour-découvrir-le-travail-collaboratif" class="level1">
<h1>Un cadavre exquis pour découvrir le travail collaboratif</h1>
<p>Jusqu’à présent, nous avons découvert les vertus de <code>Git</code> dans un projet
individuel. Nous allons maintenant aller plus loin dans un projet
collectif.</p>
<section id="le-workflow-adopté" class="level2">
<h2 class="anchored" data-anchor-id="le-workflow-adopté">Le <em>workflow</em> adopté</h2>
<p>Nous allons adopter le mode de travail le plus simple, le <em>Github Flow</em>.
Il correspond à cette forme caractéristique d’arbre:</p>
<ol type="1">
<li>La branche <code>main</code> constitue le tronc</li>
<li>Les branches partent de <code>main</code> et divergent</li>
<li>Lorsque les modifications aboutissent, elles sont intégrées à <code>main</code> ;
la branche en question disparaît:</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://inseefrlab.github.io/formation-bonnes-pratiques-git-R/slides/img/ghflow.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="https://inseefrlab.github.io/formation-bonnes-pratiques-git-R/slides/img/ghflow.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Il existe des <em>workflows</em> plus complexes, notamment le <code>Git Flow</code> que j’utilise
pour développer ce cours. <a href="https://www.atlassian.com/fr/git/tutorials/comparing-workflows/gitflow-workflow">Ce tutoriel</a>, très bien fait,
illustre avec un graphique la complexité accrue de ce flow:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://wac-cdn.atlassian.com/dam/jcr:8f00f1a4-ef2d-498a-a2c6-8020bb97902f/03%20Release%20branches.svg?cdnVersion=55" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="https://wac-cdn.atlassian.com/dam/jcr:8f00f1a4-ef2d-498a-a2c6-8020bb97902f/03%20Release%20branches.svg?cdnVersion=55" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Cette fois, une branche intermédiaire, par exemple une branche <code>development</code>
intègre des modifications à tester avant de les intégrer dans la version
officielle (<code>main</code>).</p>
<div class="cell markdown">
<div class="alert alert-warning" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-lightbulb"></i> Hint</h3>
<p>Vous pourrez trouvez des dizaines d’articles et d’ouvrages sur ce sujet dont chacun prétend avoir trouvé la meilleure organisation du travail (<code>Git flow</code>, <code>GitHub flow</code>, <code>GitLab flow</code>…). Ne lisez pas trop ces livres et articles sinon vous serez perdus (un peu comme avec les magazines destinés aux jeunes parents…).</p>
<p>La méthode de travail la plus simple est le <em>Github flow</em> qu’on vous a proposé d’adopter. L’arborescence est reconnaissable: des branches divergent et reviennent systématiquement vers <code>main</code>.</p>
<p>Pour des projets plus complexes dans des équipes développant des applications, on pourra utiliser d’autres méthodes de travail, notamment le <code>Git flow</code>. Il n’existe pas de règles universelles pour déterminer la méthode de travail ; l’important c’est, avant tout, de se mettre d’accord sur des règles communes de travail avec votre équipe.</p>
</div>
</div>
</section>
<section id="méthode-pour-les-merges" class="level2">
<h2 class="anchored" data-anchor-id="méthode-pour-les-merges">Méthode pour les merges</h2>
<p>Les merges vers <code>main</code> doivent impérativement passer par <code>Github</code> (ou <code>Gitlab</code>). Cela permet de garder une trace explicite de ceux-ci (par exemple <a href="https://github.com/linogaliana/python-datascientist/pulls?q=is%3Apr+is%3Aclosed">ici</a>), sans avoir à chercher dans l’arborescence, parfois complexe, d’un projet.</p>
<p>La bonne pratique veut qu’on fasse un <code>squash commit</code> pour éviter une inflation du nombre de commits dans <code>main</code>: les branches ont vocation à proposer une multitude de petits commits, les modifications dans <code>main</code> doivent être simples à tracer d’où le fait de modifier des petits bouts de code.</p>
<p>Comme on l’a fait dans un exercice précédent, il est très pratique d’ajouter dans le corps du message <code>close #xx</code> où <code>xx</code> est le numéro d’une <em>issue</em> associée à la <code>pull request</code>. Lorsque la <code>pull request</code> sera fusionnée, l’<em>issue</em> sera automatiquement fermée et un lien sera créé entre l’<code>issue</code> et la <code>pull request</code>. Cela vous permettra de comprendre, plusieurs mois ou années plus tard comment et pourquoi telle ou telle fonctionnalité a été implémentée.</p>
<p>En revanche, l’intégration des dernières modifications de <code>main</code> vers une branche se fait en local. Si votre branche est en conflit, <strong>le conflit doit être résolu dans la branche et pas dans main</strong>.
<code>main</code> doit toujours rester propre.</p>
</section>
<section id="mise-en-pratique" class="level2">
<h2 class="anchored" data-anchor-id="mise-en-pratique">Mise en pratique</h2>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 9 : Interactions avec le dépôt distant</h3>
<p>Cet exercice se fait par groupe de trois ou quatre. Il y aura deux rôles dans ce scénario :</p>
<ul>
<li>Une personne aura la responsabilité d’être <strong>mainteneur</strong></li>
<li>Deux à trois personnes seront <strong>développeurs</strong>.</li>
</ul>
<p>1️⃣ Le mainteneur crée un dépôt sur <code>Github</code>. Il/Elle donne des droits au(x) développeur(s) du projet (<code>Settings &gt; Manage Access &gt; Invite a collaborator</code>).</p>
<p>2️⃣ Chaque membre du projet, crée une copie locale du projet grâce à la commande <code>git clone</code> ou
avec le bouton <code>Clone a repository</code> de <code>JupyterLab</code>.</p>
<p>Pour cela, récupérer l’url HTTPS du dépôt en copiant l’url du dépôt que vous pouvez trouver, par exemple, dans la page d’accueil du dépôt, en dessous de <code>Quick setup — if you’ve done this kind of thing before</code></p>
<p>En ligne de commande, cela donnera:</p>
<pre class="shell"><code>git clone https://github.com/&lt;username&gt;/&lt;reponame&gt;.git</code></pre>
<p>3️⃣ Chaque membre du projet crée un fichier avec son nom et son prénom, selon cette structure <code>nom-prenom.md</code> en évitant les caractères spéciaux. Il écrit dedans trois phrases de son choix <strong>sans ponctuation ni majuscules</strong> (pour pouvoir effectuer une correction ultérieurement). Enfin, il commit sur le projet.</p>
<p>Pour rappel, en ligne de commande cela donnera les commandes suivantes à modifier</p>
<pre class="shell"><code>git add nom-prenom.md
git commit -m "C'est l'histoire de XXXXX"</code></pre>
<p>4️⃣ Chacun essaie d’envoyer (<em>push</em>) ses modifications locales sur le dépôt:</p>
<pre class="shell"><code>git push origin main</code></pre>
<p>5️⃣ A ce stade, une seule personne (la plus rapide) devrait ne pas avoir rencontré de rejet du <code>push</code>. C’est normal, avant d’accepter une modification <code>Git</code> vérifie en premier lieu la cohérence de la branche avec le dépôt distant. Le premier ayant fait un <code>push</code> a modifié le dépôt commun ; les autres doivent intégrer ces modifications dans leur version locale (<em>pull</em>) avant d’avoir le droit de proposer un changement.</p>
<p>Pour celui/celle/ceux dont le <code>push</code> a été refusé, faire</p>
<pre class="shell"><code>git pull origin main</code></pre>
<p>pour ramener les modifications distantes en local.</p>
<p>6️⃣ Taper <code>git log</code> et regarder la manière dont a été intégré la modification de votre camarade ayant pu faire son <code>push</code></p>
<p>Vous remarquerez que les commits de vos camarades sont intégrés tels quels à
l’histoire du dépôt.</p>
<p>7️⃣ Faire à nouveau</p>
<pre class="shell"><code>git pull origin main</code></pre>
<p>Le dernier doit refaire, à nouveau, les étapes 5 à 7 (dans une équipe de quatre
il faudra encore le refaire une fois).</p>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<i class="fa-solid fa-triangle-exclamation"></i> Warning à nouveau: ne JAMAIS FAIRE <code>git push force</code>
<p>Quand on fait face à un rejet du <code>push</code>, on est tenté de faire passer en force le <code>push</code> malgré la mise en garde précédente.</p>
<p>Il faut <strong>immédiatement oublier cette solution</strong>, elle crée de nombreux problèmes et, en fait, ne résout rien. L’un des risques est de réécrire entièrement l’historique rendant les copies locales, et donc les modifications de vos collaborateurs, caduques. Cela vous vaudra, à raison, des remontrances de vos partenaires qui perdent le bénéfice de leur historique <code>Git</code> qui, s’ils ont des versions sans <code>push</code> depuis longtemps peuvent avoir diverger fortement du dépôt maître.</p>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 10 : Gérer les conflits quand on travaille sur le même fichier</h3>
<p>Dans la continuité de l’exercice précédent, chaque personne va travailler sur les fichiers des autres membres de l’équipe.</p>
<p>1️⃣ Les deux ou trois développeurs ajoutent la ponctuation et les majuscules du fichier du premier développeur.</p>
<p>2️⃣ Ils sautent une ligne et ajoutent une phrase (pas tous la même).</p>
<p>3️⃣ Valider les résultats (<code>git add .</code> et <code>commit</code>) et faire un <code>push</code></p>
<p>4️⃣ La personne la plus rapide n’a, normalement, rencontré aucune difficulté (elle peut s’arrêter temporairement pour regarder ce qui va se passer chez les voisins). Les autres voient leur <code>push</code> refusé et doivent faire un <code>pull</code>.</p>
<p>💥 Il y a conflit, ce qui doit être signalé par un message du type:</p>
<pre class="shell"><code>Auto-merging XXXXXX
CONFLICT (content): Merge conflict in XXXXXX.md
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
<p>5️⃣ Etudier le résultat de <code>git status</code></p>
<p>6️⃣ Si vous ouvrez les fichiers incriminés, vous devriez voir des balises du type</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>this is some content to mess with</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>content to append</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">=======</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>totally different content to merge later</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;&gt;&gt;&gt;&gt;&gt;&gt; new_branch_to_merge_later</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>7️⃣ Corriger à la main les fichiers en choisissant, pour chaque ligne, la version qui vous convient et en retirant les balises. Valider en faisant:</p>
<pre class="shell"><code>git add . &amp;&amp; git commit -m "Résolution du conflit par XXXX"</code></pre>
<p>Remplacer XXXX par votre nom. La balise <code>&amp;&amp;</code> permet d’enchaîner, en une seule ligne de code, les deux commandes.</p>
<p>8️⃣ Faire un push. Pour la dernière personne, refaire les opérations 4 à 8</p>
</div>
</div>
<p><code>Git</code> permet donc de travailler, en même temps, sur le même fichier et de limiter le nombre de gestes manuels nécessaires pour faire la fusion. Lorsqu’on travaille sur des bouts différents du même fichier, on n’a même pas besoin de faire de modification manuelle, la fusion peut être automatique.</p>
<p><code>Git</code> est un outil très puissant. Mais, il ne remplace pas une bonne organisation du travail. Vous l’avez vu, ce mode de travail uniquement sur <code>main</code> peut être pénible. Les branches prennent tout leur sens dans ce cas.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 11 : Gestion des branches</h3>
<p>1️⃣ Le mainteneur va contribuer directement dans <code>main</code> et ne crée pas de branche. Chaque développeur crée une branche, en local nommée <code>contrib-XXXXX</code> où <code>XXXXX</code> est le prénom:</p>
<pre class="shell"><code>git checkout -b contrib-XXXXX</code></pre>
<p>2️⃣ Chaque membre du groupe crée un fichier <code>README.md</code> où il écrit une phrase sujet-verbe-complément. Le mainteneur est le seul à ajouter un titre dans le README (qu’il commit dans main).</p>
<p>3️⃣ Chacun push le produit de son subconscient sur le dépôt.</p>
<p>4️⃣ Les développeurs ouvrent, chacun, une <code>pull request</code> sur <code>Github</code> de leur branche vers <code>main</code>. Ils lui donnent un titre explicite.</p>
<p>5️⃣ Dans la discussion de chaque <code>pull request</code>, le mainteneur demande au développeur d’intégrer le titre qu’il a écrit.</p>
<p>6️⃣ Chaque développeur, en local, intègre cette modification en faisant</p>
<pre class="shell"><code># Pour être sûr d'être sur sa propre branche
git checkout branche-XXXX
git merge main</code></pre>
<p>Régler le conflit et valider (<code>add</code> et <code>commit</code>). Pousser le résultat. Le mainteneur choisit une des <code>pull request</code> et la valide avec l’option <code>squash commits</code>. Vérifier sur la page d’accueil le résultat.</p>
<p>7️⃣ L’auteur (si 2 développeurs) ou les deux auteurs (si 3 développeurs) de la <code>pull request</code> non validée doivent à nouveau répéter l’opération 6.</p>
<p>8️⃣ Une fois le conflit de version réglé et poussé, le mainteneur valide la <code>pull request</code> selon la même procédure que précédemment.</p>
<p>9️⃣ Vérifier l’arborescence du dépôt dans <code>Insights &gt; Network</code>. Votre arbre doit avoir une forme caractéristique de ce qu’on appelle le <code>Github flow</code>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://linogaliana.gitlab.io/collaboratif/pics/03_git/flow4_discuss.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="https://linogaliana.gitlab.io/collaboratif/pics/03_git/flow4_discuss.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div>


</section>
</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Dans ce cas, on rencontre généralement un nouvel alias à côté d’<code>origin</code>.
opensource, où on contribue avec un <em>workflow</em> plus complexe (on contribue
sur un fork qui est une copie d’un dépôt sur lequel on n’a pas de droits
de modifications mais auquel on va suggérer des modifications à partir de notre
<code>fork</code>), on retrouve souvent un deuxième alias qui est <code>upstream</code> (cf.
<a href="https://docs.github.com/en/github/collaborating-with-pull-requests/working-with-forks/syncing-a-fork">le tutoriel <code>Github</code> pour mettre à jour un fork</a>.
La création du bouton <code>Fetch upstream</code> par <code>Github</code> facilite grandement
la mise en cohérence d’<code>upstream</code> et <code>origin</code> et constitue la méthode
recommandée.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>La commande <code>checkout</code> est un couteau-suisse de la gestion de branche en <code>Git</code>. Elle permet en effet de basculer d’une branche à l’autre, mais aussi d’en créer, etc.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@book{galiana2023,
  author = {Galiana, Lino},
  title = {Python Pour La Data Science},
  date = {2023},
  url = {https://pythonds.linogaliana.fr/},
  doi = {10.5281/zenodo.8229676},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-galiana2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Galiana, Lino. 2023. <em>Python Pour La Data Science</em>. <a href="https://doi.org/10.5281/zenodo.8229676">https://doi.org/10.5281/zenodo.8229676</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="linogaliana/python-datascientist" data-repo-id="MDEwOlJlcG9zaXRvcnkyODAxNjE2Nzc=" data-category="General" data-category-id="DIC_kwDOELLtjc4B-5TX" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/git/introgit.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Git : un élément essentiel au quotidien</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Python pour la <em>data science</em>, Lino Galiana.<br>
Licence <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i><br>
Code source disponible sur <a href="https://github.com/linogaliana/python-datascientist"><code>Github</code></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Site construit avec <i class="fa-brands fa-python" aria-label="python"></i> et <a href="https://quarto.org/"><code>Quarto</code></a><br>
Inspiration pour la mise en forme du site <a href="https://www.andreashandel.com">ici</a><br>
<a href="https://github.com/linogaliana/python-datascientist">Code source disponible sur <i class="fa-brands fa-github" aria-label="github"></i> <code>GitHub</code></a></div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":true,"openEffect":"zoom","selector":".lightbox"});</script>



</body></html>