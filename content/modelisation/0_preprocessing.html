<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">
<meta name="dcterms.date" content="2023-07-15">
<meta name="description" content="Afin d’avoir des données cohérentes avec les hypothèses de modélisation, il est absolument fondamental de prendre le temps de préparer les données à fournir à un modèle. La qualité de la prédiction dépend fortement de ce travail préalable qu’on appelle preprocessing. Beaucoup de méthodes sont disponibles dans scikit, ce qui rend ce travail moins fastidieux et plus fiable.">

<title>Python pour la data science - Préparation des données pour construire un modèle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/modelisation/1_modelevaluation.html" rel="next">
<link href="../../content/modelisation/index.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #e9f3fa;
      }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.26.0.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>


  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Python pour la data science - Préparation des données pour construire un modèle">
<meta name="twitter:description" content="Afin d’avoir des données cohérentes avec les hypothèses de modélisation,
il est absolument fondamental de prendre le temps de
préparer les données à fournir à un modèle. La qualité de la prédiction
dépend fortement de ce travail préalable qu’on appelle preprocessing.
Beaucoup de méthodes sont disponibles dans scikit, ce qui rend ce travail
moins fastidieux et plus fiable.">
<meta name="twitter:image" content="https://pythonds.linogaliana.fr/content/modelisation/featured_preprocessing.png">
<meta name="twitter:image-height" content="500">
<meta name="twitter:image-width" content="700">
<meta name="twitter:card" content="summary_large_image">
<meta name="citation_title" content="Python pour la data science">
<meta name="citation_author" content="Lino Galiana">
<meta name="citation_publication_date" content="2023">
<meta name="citation_cover_date" content="2023">
<meta name="citation_year" content="2023">
<meta name="citation_online_date" content="2023-07-15">
<meta name="citation_fulltext_html_url" content="https://pythonds.linogaliana.fr/">
<meta name="citation_doi" content="10.5281/zenodo.8229676">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Coding for economists;,citation_author=undefined Turrell;,citation_author=undefined contributors;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://aeturrell.github.io/coding-for-economists;">
<meta name="citation_reference" content="citation_title=R for data science;,citation_author=Hadley Wickham;,citation_author=Mine Çetinkaya-Rundel;,citation_author=Garrett Grolemund;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;">
<meta name="citation_reference" content="citation_title=Computational reproducibility of jupyter notebooks from biomedical publications;,citation_author=Sheeba Samuel;,citation_author=Daniel Mietchen;,citation_publication_date=2023;,citation_cover_date=2023;,citation_year=2023;,citation_fulltext_html_url=https://arxiv.org/abs/2308.07333;">
<meta name="citation_reference" content="citation_title=Python data science handbook: Essential tools for working with data;,citation_author=Jake VanderPlas;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;">
<meta name="citation_reference" content="citation_title=Machine learning methods that economists should know about;,citation_author=Susan Athey;,citation_author=Guido W Imbens;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_volume=11;,citation_journal_title=Annual Review of Economics;,citation_publisher=Annual Reviews;">
<meta name="citation_reference" content="citation_title=Fuzzy matching on big-data an illustration with scanner data and crowd-sourced nutritional data;,citation_author=Lino Galiana;,citation_author=Milena Suarez Castillo;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_publisher=Proceedings of the 2022 &amp;amp;amp;quot;Journées de Méthodologie Statistiques&amp;quot;;">
<meta name="citation_reference" content="citation_title=Data visualization with python and JavaScript;,citation_author=Kyran Dale;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;">
<meta name="citation_reference" content="citation_title=Sémiologie graphique;,citation_author=Jacques Bertin;,citation_publication_date=1967;,citation_cover_date=1967;,citation_year=1967;">
<meta name="citation_reference" content="citation_title=La sémiologie graphique de jacques bertin a cinquante ans;,citation_author=Gilles Palsky;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_journal_title=Visions carto (en ligne);">
<meta name="citation_reference" content="citation_title=Fundamentals of data visualization: A primer on making informative and compelling figures;,citation_author=Claus O Wilke;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;">
<meta name="citation_reference" content="citation_title=How to train BERT with an academic budget;,citation_author=Peter Izsak;,citation_author=Moshe Berchansky;,citation_author=Omer Levy;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_fulltext_html_url=https://arxiv.org/abs/2104.07705;">
<meta name="citation_reference" content="citation_title=Python for data analysis: Data wrangling with pandas, NumPy, and IPython;,citation_author=Wes McKinney;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;">
<meta name="citation_reference" content="citation_title=Residential segregation, daytime segregation and spatial frictions: An analysis from mobile phone data;,citation_author=Lino Galiana;,citation_author=François Sémécurbe;,citation_author=Benjamin Sakarovitch;,citation_author=Zbigniew Smoreda;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_publisher=Insee Working Paper;">
<meta name="citation_reference" content="citation_title=Fuzzy matching on big-data: An illustration with scanner and crowd-sourced nutritional datasets;,citation_abstract=Food retailers’ scanner data provide unprecedented details on local consumption, provided that product identifiers allow a linkage with features of interest, such as nutritional information. In this paper, we enrich a large retailer dataset with nutritional information extracted from crowd-sourced and administrative nutritional datasets. To compensate for imperfect matching through the barcode, we develop a methodology to efficiently match short textual descriptions. After a preprocessing step to normalize short labels, we resort to fuzzy matching based on several tokenizers (including n-grams) by querying an ElasticSearch customized index and validate candidates echos as matches with a Levensthein edit-distance and an embedding-based similarity measure created from a siamese neural network model. The pipeline is composed of several steps successively relaxing constraints to find relevant matching candidates.;,citation_author=Lino Galiana;,citation_author=Milena Suarez Castillo;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://doi.org/10.1145/3524458.3547244;,citation_doi=10.1145/3524458.3547244;,citation_isbn=9781450392846;,citation_conference_title=Proceedings of the 2022 ACM conference on information technology for social good;,citation_conference=Association for Computing Machinery;,citation_series_title=GoodIT ’22;">
<meta name="citation_reference" content="citation_title=Guide de sémiologie cartographique;,citation_author=undefined Insee;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_publisher=Insee Working Paper;">
<meta name="citation_reference" content="citation_title=Energy and policy considerations for deep learning in NLP;,citation_author=Emma Strubell;,citation_author=Ananya Ganesh;,citation_author=Andrew McCallum;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;,citation_fulltext_html_url=https://arxiv.org/abs/1906.02243;">
<meta name="citation_reference" content="citation_title=High-resolution image synthesis with latent diffusion models;,citation_author=Robin Rombach;,citation_author=Andreas Blattmann;,citation_author=Dominik Lorenz;,citation_author=Patrick Esser;,citation_author=Björn Ommer;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_conference_title=Proceedings of the IEEE/CVF conference on computer vision and pattern recognition (CVPR);">
<meta name="citation_reference" content="citation_title=Apache arrow and the&amp;amp;amp;quot; 10 things i hate about pandas;,citation_author=Wes McKinney;,citation_publication_date=2017;,citation_cover_date=2017;,citation_year=2017;,citation_volume=21;,citation_journal_title=Blog, September;">
<meta name="citation_reference" content="citation_title=Many researchers were not compliant with their published data sharing statement: Mixed-methods study;,citation_author=Mirko Gabelica;,citation_author=Ružica Bojčić;,citation_author=Livia Puljak;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_journal_title=Journal of Clinical Epidemiology;,citation_publisher=Elsevier;">
<meta name="citation_reference" content="citation_title=Credit scoring in the era of big data;,citation_author=Mikella Hurley;,citation_author=Julius Adebayo;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_volume=18;,citation_journal_title=Yale JL &amp;amp;amp; Tech.;,citation_publisher=HeinOnline;">
<meta name="citation_reference" content="citation_title=Econometrics and machine learning;,citation_author=Arthur Charpentier;,citation_author=Emmanuel Flachaire;,citation_author=Antoine Ly;,citation_publication_date=2018;,citation_cover_date=2018;,citation_year=2018;,citation_issue=1;,citation_volume=505;,citation_journal_title=Economie et Statistique;,citation_publisher=Persée-Portail des revues scientifiques en SHS;">
<meta name="citation_reference" content="citation_title=Machine learning: An applied econometric approach;,citation_author=Sendhil Mullainathan;,citation_author=Jann Spiess;,citation_publication_date=2017-05;,citation_cover_date=2017-05;,citation_year=2017;,citation_fulltext_html_url=https://www.aeaweb.org/articles?id=10.1257/jep.31.2.87;,citation_issue=2;,citation_doi=10.1257/jep.31.2.87;,citation_volume=31;,citation_journal_title=Journal of Economic Perspectives;">
<meta name="citation_reference" content="citation_title=Le problème du réalisme des hypothèses en économie politique;,citation_author=Pierre Salmon;,citation_publication_date=2010;,citation_cover_date=2010;,citation_year=2010;">
<meta name="citation_reference" content="citation_title=The methodology of positive economics;,citation_author=Milton Friedman;,citation_publication_date=1953;,citation_cover_date=1953;,citation_year=1953;,citation_inbook_title=Essays in positive economics;">
<meta name="citation_reference" content="citation_title=L’empreinte carbone du numérique;,citation_author=undefined Arcep;,citation_publication_date=2019;,citation_cover_date=2019;,citation_year=2019;">
<meta name="citation_reference" content="citation_title=Leakage and the reproducibility crisis in ML-based science;,citation_author=Sayash Kapoor;,citation_author=Arvind Narayanan;,citation_publication_date=2022;,citation_cover_date=2022;,citation_year=2022;,citation_fulltext_html_url=https://arxiv.org/abs/2207.07048;,citation_doi=10.48550/ARXIV.2207.07048;,citation_publisher=arXiv;">
<meta name="citation_reference" content="citation_title=Data scientist, the sexiest job of the 21st century;,citation_author=Thomas H Davenport;,citation_author=DJ Patil;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_fulltext_html_url=https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century;,citation_issue=5;,citation_volume=90;,citation_journal_title=Harvard business review;">
<meta name="citation_reference" content="citation_title=Is data scientist still the sexiest job of the 21st century?;,citation_author=Thomas H Davenport;,citation_author=DJ Patil;,citation_publication_date=2012;,citation_cover_date=2012;,citation_year=2012;,citation_fulltext_html_url=https://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century;,citation_issue=5;,citation_volume=90;,citation_journal_title=Harvard business review;">
</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Python pour la data science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="../../content/getting-started/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/01_installation.html" rel="" target="">
 <span class="dropdown-text">Configuration de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/02_DS_environment.html" rel="" target="">
 <span class="dropdown-text">L’environnement Python pour la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/03_data_analysis.html" rel="" target="">
 <span class="dropdown-text">Comment aborder un jeu de données</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/04_python_practice.html" rel="" target="">
 <span class="dropdown-text">Bonne pratique de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/05_rappels_types.html" rel="" target="">
 <span class="dropdown-text">Quelques rappels sur les principes de base de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/06_rappels_fonctions.html" rel="" target="">
 <span class="dropdown-text">Modules, tests, boucles, fonctions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/07_rappels_classes.html" rel="" target="">
 <span class="dropdown-text">Les classes en Python</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manipuler" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Manipuler</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-manipuler">    
        <li>
    <a class="dropdown-item" href="../../content/manipulation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/01_numpy.html" rel="" target="">
 <span class="dropdown-text">Numpy, la brique de base de la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02a_pandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Introduction à Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02b_pandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de pandas : un exemple complet</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Données spatiales : découverte de geopandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de geopandas avec les données vélib</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04a_webscraping_TP.html" rel="" target="">
 <span class="dropdown-text">Web scraping avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04c_API_TP.html" rel="" target="">
 <span class="dropdown-text">Récupérer des données avec des API depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04b_regex_TP.html" rel="" target="">
 <span class="dropdown-text">Maîtriser les expressions régulières</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/07_dask.html" rel="" target="">
 <span class="dropdown-text">Introduction à dask grâce aux données DVF</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-communiquer" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Communiquer</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-communiquer">    
        <li>
    <a class="dropdown-item" href="../../content/visualisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/matplotlib.html" rel="" target="">
 <span class="dropdown-text">De beaux graphiques avec python: mise en pratique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/maps.html" rel="" target="">
 <span class="dropdown-text">De belles cartes avec python: mise en pratique</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-modéliser" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Modéliser</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-modéliser">    
        <li>
    <a class="dropdown-item" href="../../content/modelisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/0_preprocessing.html" rel="" target="">
 <span class="dropdown-text">Préparation des données pour construire un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/1_modelevaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluer la qualité d’un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/2_SVM.html" rel="" target="">
 <span class="dropdown-text">Classification: premier modèle avec les SVM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/3_regression.html" rel="" target="">
 <span class="dropdown-text">Régression : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/4_featureselection.html" rel="" target="">
 <span class="dropdown-text">Sélection de variables : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/5_clustering.html" rel="" target="">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/6_pipeline.html" rel="" target="">
 <span class="dropdown-text">Premier pas vers l’industrialisation avec les pipelines scikit</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-approfondissements" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Approfondissements</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-approfondissements">    
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/continuous_integration.html" rel="" target="">
 <span class="dropdown-text">Intégration continue avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/dallE.html" rel="" target="">
 <span class="dropdown-text">Génération d’images avec Python, DALL-E et StableDiffusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/s3.html" rel="" target="">
 <span class="dropdown-text">Les nouveaux modes d’accès aux données : le format parquet et les données sur le cloud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_approfondissement.html" rel="" target="">
 <span class="dropdown-text">Approfondissement ElasticSearch pour des recherches de proximité géographique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_intro.html" rel="" target="">
 <span class="dropdown-text">Introduction à ElasticSearch pour la recherche textuelle</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-git" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Git</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-git">    
        <li>
    <a class="dropdown-item" href="../../content/git/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/introgit.html" rel="" target="">
 <span class="dropdown-text">Git : un élément essentiel au quotidien</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/exogit.html" rel="" target="">
 <span class="dropdown-text">Un cadavre exquis pour découvrir Git</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-annexes" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Annexes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-annexes">    
        <li>
    <a class="dropdown-item" href="../../content/annexes/evaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/annexes/corrections.html" rel="" target="">
 <span class="dropdown-text">Corrections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://linogaliana.github.io/python-datascientist-slides/#/title-slide" rel="" target="">
 <span class="dropdown-text">Slides de présentation</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools ms-auto-item" href="https://github.com/linogaliana/python-datascientist">
            Code source
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/modelisation/0_preprocessing.html">Préparation des données pour construire un modèle</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns">
                <div id="title-block-header-title" class="quarto-title page-columns page-full page-layout-full featured-image p-4" style="background-image: url(featured_preprocessing.png);">
                <h1 class="title">Préparation des données pour construire un modèle</h1>
                                    <div class="quarto-categories">
                        <div class="quarto-category">Modélisation</div>
                        <div class="quarto-category">Exercice</div>
                      </div>
                          </div>
        
                <div>
          <div id="title-block-title-desc" class="description pt-4">
            <p>Afin d’avoir des données cohérentes avec les hypothèses de modélisation,
            il est absolument fondamental de prendre le temps de
            préparer les données à fournir à un modèle. La qualité de la prédiction
            dépend fortement de ce travail préalable qu’on appelle <em>preprocessing</em>.
            Beaucoup de méthodes sont disponibles dans <code>scikit</code>, ce qui rend ce travail
            moins fastidieux et plus fiable.</p>
          </div>
        </div>
                
        
        <div class="quarto-title-meta">

            <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                     <p>Lino Galiana </p>
                  </div>
          </div>
            
            <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">July 15, 2023</p>
            </div>
          </div>
          
            
          </div>
          
        
        
        

        </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/0_preprocessing.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Préparation des données pour construire un modèle</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/1_modelevaluation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Evaluer la qualité d’un modèle</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/2_SVM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification: premier modèle avec les SVM</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/3_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Régression : une introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/4_featureselection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sélection de variables : une introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/5_clustering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modelisation/6_pipeline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Premier pas vers l’industrialisation avec les pipelines scikit</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#construction-de-la-base-de-données" id="toc-construction-de-la-base-de-données" class="nav-link active" data-scroll-target="#construction-de-la-base-de-données">Construction de la base de données</a></li>
  <li><a href="#explorer-la-structure-des-données" id="toc-explorer-la-structure-des-données" class="nav-link" data-scroll-target="#explorer-la-structure-des-données">Explorer la structure des données</a></li>
  <li><a href="#transformer-les-données" id="toc-transformer-les-données" class="nav-link" data-scroll-target="#transformer-les-données">Transformer les données</a>
  <ul class="collapse">
  <li><a href="#standardisation" id="toc-standardisation" class="nav-link" data-scroll-target="#standardisation">Standardisation</a></li>
  <li><a href="#normalisation" id="toc-normalisation" class="nav-link" data-scroll-target="#normalisation">Normalisation</a></li>
  <li><a href="#encodage-des-valeurs-catégorielles" id="toc-encodage-des-valeurs-catégorielles" class="nav-link" data-scroll-target="#encodage-des-valeurs-catégorielles">Encodage des valeurs catégorielles</a></li>
  </ul></li>
  <li><a href="#références" id="toc-références" class="nav-link" data-scroll-target="#références">Références</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/modelisation/0_preprocessing.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">

<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!-- source: https://raw.githubusercontent.com/spcanelon/silvia/32853dd0e70a71514b0922ee306f80ed5897f776/_partials/title-block-link-buttons/title-block.html -->
<!-- 
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title"> 
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->
    

<div class="cell markdown">
<p class="badges">
<a href="https://github.com/linogaliana/python-datascientist-notebooks/blob/main/notebooks/modelisation/0_preprocessing.ipynb" class="github"><i class="fab fa-github"></i></a>
<a href="https://downgit.github.io/#/home?url=https://github.com/linogaliana/python-datascientist-notebooks/blob/main/notebooks/modelisation/0_preprocessing.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Download-Notebook-important?logo=Jupyter" alt="Download"></a>
<a href="https://nbviewer.jupyter.org/github/linogaliana/python-datascientist-notebooksblob/main/notebooks/modelisation/0_preprocessing.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Visualize-nbviewer-blue?logo=Jupyter" alt="nbviewer"></a>
<a href="https://datalab.sspcloud.fr/launcher/ide/jupyter-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-jupyter.sh%C2%BB&amp;init.personalInitArgs=%C2%ABmodelisation%200_preprocessing%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_Jupyter-orange?logo=Jupyter&amp;logoColor=orange" alt="Onyxia"></a>
<a href="https://datalab.sspcloud.fr/launcher/ide/vscode-python?autoLaunch=true&amp;onyxia.friendlyName=%C2%ABpython-datascience%C2%BB&amp;init.personalInit=%C2%ABhttps%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fpython-datascientist%2Fmaster%2Fsspcloud%2Finit-vscode.sh%C2%BB&amp;init.personalInitArgs=%C2%ABmodelisation%200_preprocessing%C2%BB&amp;security.allowlist.enabled=false" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/SSP%20Cloud-Tester_avec_VSCode-blue?logo=visualstudiocode&amp;logoColor=blue" alt="Onyxia"></a><br>
<a href="https://mybinder.org/v2/gh/linogaliana/python-datascientist-notebooks/main?filepath={binder_path}" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Launch-Binder-E66581.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAABZCAMAAABi1XidAAAB8lBMVEX///9XmsrmZYH1olJXmsr1olJXmsrmZYH1olJXmsr1olJXmsrmZYH1olL1olJXmsr1olJXmsrmZYH1olL1olJXmsrmZYH1olJXmsr1olL1olJXmsrmZYH1olL1olJXmsrmZYH1olL1olL0nFf1olJXmsrmZYH1olJXmsq8dZb1olJXmsrmZYH1olJXmspXmspXmsr1olL1olJXmsrmZYH1olJXmsr1olL1olJXmsrmZYH1olL1olLeaIVXmsrmZYH1olL1olL1olJXmsrmZYH1olLna31Xmsr1olJXmsr1olJXmsrmZYH1olLqoVr1olJXmsr1olJXmsrmZYH1olL1olKkfaPobXvviGabgadXmsqThKuofKHmZ4Dobnr1olJXmsr1olJXmspXmsr1olJXmsrfZ4TuhWn1olL1olJXmsqBi7X1olJXmspZmslbmMhbmsdemsVfl8ZgmsNim8Jpk8F0m7R4m7F5nLB6jbh7jbiDirOEibOGnKaMhq+PnaCVg6qWg6qegKaff6WhnpKofKGtnomxeZy3noG6dZi+n3vCcpPDcpPGn3bLb4/Mb47UbIrVa4rYoGjdaIbeaIXhoWHmZYHobXvpcHjqdHXreHLroVrsfG/uhGnuh2bwj2Hxk17yl1vzmljzm1j0nlX1olL3AJXWAAAAbXRSTlMAEBAQHx8gICAuLjAwMDw9PUBAQEpQUFBXV1hgYGBkcHBwcXl8gICAgoiIkJCQlJicnJ2goKCmqK+wsLC4usDAwMjP0NDQ1NbW3Nzg4ODi5+3v8PDw8/T09PX29vb39/f5+fr7+/z8/Pz9/v7+zczCxgAABC5JREFUeAHN1ul3k0UUBvCb1CTVpmpaitAGSLSpSuKCLWpbTKNJFGlcSMAFF63iUmRccNG6gLbuxkXU66JAUef/9LSpmXnyLr3T5AO/rzl5zj137p136BISy44fKJXuGN/d19PUfYeO67Znqtf2KH33Id1psXoFdW30sPZ1sMvs2D060AHqws4FHeJojLZqnw53cmfvg+XR8mC0OEjuxrXEkX5ydeVJLVIlV0e10PXk5k7dYeHu7Cj1j+49uKg7uLU61tGLw1lq27ugQYlclHC4bgv7VQ+TAyj5Zc/UjsPvs1sd5cWryWObtvWT2EPa4rtnWW3JkpjggEpbOsPr7F7EyNewtpBIslA7p43HCsnwooXTEc3UmPmCNn5lrqTJxy6nRmcavGZVt/3Da2pD5NHvsOHJCrdc1G2r3DITpU7yic7w/7Rxnjc0kt5GC4djiv2Sz3Fb2iEZg41/ddsFDoyuYrIkmFehz0HR2thPgQqMyQYb2OtB0WxsZ3BeG3+wpRb1vzl2UYBog8FfGhttFKjtAclnZYrRo9ryG9uG/FZQU4AEg8ZE9LjGMzTmqKXPLnlWVnIlQQTvxJf8ip7VgjZjyVPrjw1te5otM7RmP7xm+sK2Gv9I8Gi++BRbEkR9EBw8zRUcKxwp73xkaLiqQb+kGduJTNHG72zcW9LoJgqQxpP3/Tj//c3yB0tqzaml05/+orHLksVO+95kX7/7qgJvnjlrfr2Ggsyx0eoy9uPzN5SPd86aXggOsEKW2Prz7du3VID3/tzs/sSRs2w7ovVHKtjrX2pd7ZMlTxAYfBAL9jiDwfLkq55Tm7ifhMlTGPyCAs7RFRhn47JnlcB9RM5T97ASuZXIcVNuUDIndpDbdsfrqsOppeXl5Y+XVKdjFCTh+zGaVuj0d9zy05PPK3QzBamxdwtTCrzyg/2Rvf2EstUjordGwa/kx9mSJLr8mLLtCW8HHGJc2R5hS219IiF6PnTusOqcMl57gm0Z8kanKMAQg0qSyuZfn7zItsbGyO9QlnxY0eCuD1XL2ys/MsrQhltE7Ug0uFOzufJFE2PxBo/YAx8XPPdDwWN0MrDRYIZF0mSMKCNHgaIVFoBbNoLJ7tEQDKxGF0kcLQimojCZopv0OkNOyWCCg9XMVAi7ARJzQdM2QUh0gmBozjc3Skg6dSBRqDGYSUOu66Zg+I2fNZs/M3/f/Grl/XnyF1Gw3VKCez0PN5IUfFLqvgUN4C0qNqYs5YhPL+aVZYDE4IpUk57oSFnJm4FyCqqOE0jhY2SMyLFoo56zyo6becOS5UVDdj7Vih0zp+tcMhwRpBeLyqtIjlJKAIZSbI8SGSF3k0pA3mR5tHuwPFoa7N7reoq2bqCsAk1HqCu5uvI1n6JuRXI+S1Mco54YmYTwcn6Aeic+kssXi8XpXC4V3t7/ADuTNKaQJdScAAAAAElFTkSuQmCC" alt="Binder"></a>
<a href="https://colab.research.google.com/github/linogaliana/python-datascientist-notebooks/blob/main/notebooks/modelisation/0_preprocessing.ipynb" target="_blank" rel="noopener"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a>
<a href="https://github.dev/linogaliana/python-datascientist-notebooks/notebooks/modelisation/0_preprocessing.ipynb" target="_blank" rel="noopener"><img src="https://img.shields.io/static/v1?logo=visualstudiocode&amp;label=&amp;message=Open%20in%20Visual%20Studio%20Code&amp;labelColor=2c2c32&amp;color=007acc&amp;logoColor=007acc" alt="githubdev"></a>
</p>
<p></p>
</div>
<p>Ce chapitre utilise le jeu de données présenté dans l’<a href="../../content/modelisation/index.html">introduction
de cette partie</a> :
les données de vote aux élections présidentielles américaines de 2020 au niveau des comtés
croisées à des variables socio-démographiques.
Le code de consitution de la base de données
est disponible <a href="https://github.com/linogaliana/python-datascientist/blob/master/content/modelisation/get_data.py">sur Github</a>.
L’exercice 1 permet, à ceux qui le désirent, d’essayer de le reconstituer pas à pas.</p>
<p>Le guide utilisateur de <code>scikit</code> est une référence précieuse,
à consulter régulièrement. La partie sur le <em>preprocessing</em> est
disponible <a href="https://scikit-learn.org/stable/modules/preprocessing.html">ici</a>.</p>
<p>L’objectif de ce chapitre est de présenter quelques éléments de
préparation des données. Il s’agit d’une étape fondamentale, à ne
pas négliger. Les modèles reposent sur certaines hypothèses, généralement
relatives à la distribution théorique des variables qui y sont intégrées.</p>
<p>Il est nécessaire de faire correspondre la distribution empirique
à ces hypothèses ce qui implique un travail de restructuration des données.
Celui-ci permettra d’avoir des résultats de modélisation plus pertinents.
Nous verrons dans le chapitre sur les <em>pipelines</em> comment industrialiser
ces étapes de <em>preprocessing</em> afin de se simplifier la vie pour appliquer
un modèle sur un jeu de données différent de celui sur lequel il a été estimé.</p>
<div class="cell markdown">
<div class="alert alert-warning" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-lightbulb"></i> scikit-learn </h3>
<p><code>scikit-learn</code> est aujourd’hui la librairie de référence dans l’écosystème du
<em>Machine Learning</em>. Il s’agit d’une librairie qui, malgré les très nombreuses
méthodes implémentées, présente l’avantage d’être un point d’entrée unifié.
Cet aspect unifié est l’une des raisons du succès précoce de celle-ci. <code>R</code> n’a
bénéficié que plus récemment d’une librairie unifiée,
à savoir <a href="https://www.tidymodels.org/"><code>tidymodels</code></a>.</p>
<p>Une autre raison du succès de <code>scikit</code> est son approche opérationnelle: la mise
en production de modèles développés via les <em>pipelines</em> <code>scikit</code> est peu coûteuse.
Un <a href="../../pipeline-scikit">chapitre spécial de ce cours</a> est dédié aux <em>pipelines</em>.
Avec Romain Avouac, nous proposons un <a href="https://ensae-reproductibilite.github.io/website/">cours plus avancé</a>
en dernière année d’ENSAE où nous présentons certains enjeux relatifs
à la mise en production de modèles développés avec <code>scikit</code>.</p>
<p>Le coeur de l’équipe de développement de <code>scikit-learn</code> est situé
à l’<a href="https://www.inria.fr/fr">Inria</a> 🇫🇷.
Pour découvrir la richesse de l’écosystème <code>scikit</code>, il
est recommandé de suivre le
<a href="https://www.fun-mooc.fr/fr/cours/machine-learning-python-scikit-learn/"><code>MOOC scikit</code></a>,
développé dans le cadre de l’initiative <a href="https://www.inria.fr/fr/mooc-scikit-learn"><code>Inria Academy</code></a>.</p>
</div>
</div>
<section id="construction-de-la-base-de-données" class="level2">
<h2 class="anchored" data-anchor-id="construction-de-la-base-de-données">Construction de la base de données</h2>
<p>Les sources de données étant diverses, le code qui construit la base finale est directement fourni. Le travail de construction d’une base unique
est un peu fastidieux mais il s’agit d’un bon exercice, que vous pouvez tenter,
pour <a href="#pandas">réviser <code>pandas</code></a> :</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 1 : Importer les données des élections US</h3>
<p><strong>Cet exercice est OPTIONNEL</strong></p>
<ol type="1">
<li>Télécharger et importer le shapefile <a href="https://www2.census.gov/geo/tiger/GENZ2019/shp/cb_2019_02_sldl_500k.zip">depuis ce lien</a></li>
<li>Exclure les Etats suivants : “02”, “69”, “66”, “78”, “60”, “72”, “15”</li>
<li>Importer les résultats des élections depuis <a href="https://raw.githubusercontent.com/tonmcg/US_County_Level_Election_Results_08-20/master/2020_US_County_Level_Presidential_Results.csv">ce lien</a></li>
<li>Importer les bases disponibles sur le site de l’USDA en faisant attention à renommer les variables de code FIPS de manière identique
dans les 4 bases</li>
<li><em>Merger</em> ces 4 bases dans une base unique de caractéristiques socioéconomiques</li>
<li><em>Merger</em> aux données électorales à partir du code FIPS</li>
<li><em>Merger</em> au shapefile à partir du code FIPS. Faire attention aux 0 à gauche dans certains codes. Il est
recommandé d’utiliser la méthode <code>str.lstrip</code> pour les retirer</li>
<li>Importer les données des élections 2000 à 2016 à partir du <a href="https://electionlab.mit.edu/data">MIT Election Lab</a>?
Les données peuvent être directement requêtées depuis l’url
<a href="https://dataverse.harvard.edu/api/access/datafile/3641280?gbrecs=false" class="uri">https://dataverse.harvard.edu/api/access/datafile/3641280?gbrecs=false</a></li>
<li>Créer une variable <code>share</code> comptabilisant la part des votes pour chaque candidat.
Ne garder que les colonnes <code>"year", "FIPS", "party", "candidatevotes", "share"</code></li>
<li>Faire une conversion <code>long</code> to <code>wide</code> avec la méthode <code>pivot_table</code> pour garder une ligne
par comté x année avec en colonnes les résultats de chaque candidat dans cet état.</li>
<li>Merger à partir du code FIPS au reste de la base.</li>
</ol>
</div>
</div>
<p>Si vous ne faites pas l’exercice 1, pensez à charger les données en executant la fonction <code>get_data.py</code> :</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!pip install --upgrade xlrd #colab bug verson xlrd</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!pip install geopandas</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/linogaliana/python-datascientist/master/content/modelisation/get_data.py'</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(url, allow_redirects<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="bu">open</span>(<span class="st">'getdata.py'</span>, <span class="st">'wb'</span>).write(r.content)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> getdata</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>votes <span class="op">=</span> getdata.create_votes_dataframes()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ce code introduit une base nommée <code>votes</code> dans l’environnement. Il s’agit d’une
base rassemblant les différentes sources. Elle a l’aspect
suivant:</p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">STATEFP</th>
<th data-quarto-table-cell-role="th">COUNTYFP</th>
<th data-quarto-table-cell-role="th">COUNTYNS</th>
<th data-quarto-table-cell-role="th">AFFGEOID</th>
<th data-quarto-table-cell-role="th">GEOID</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">LSAD</th>
<th data-quarto-table-cell-role="th">ALAND</th>
<th data-quarto-table-cell-role="th">AWATER</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">share_2008_democrat</th>
<th data-quarto-table-cell-role="th">share_2008_other</th>
<th data-quarto-table-cell-role="th">share_2008_republican</th>
<th data-quarto-table-cell-role="th">share_2012_democrat</th>
<th data-quarto-table-cell-role="th">share_2012_other</th>
<th data-quarto-table-cell-role="th">share_2012_republican</th>
<th data-quarto-table-cell-role="th">share_2016_democrat</th>
<th data-quarto-table-cell-role="th">share_2016_other</th>
<th data-quarto-table-cell-role="th">share_2016_republican</th>
<th data-quarto-table-cell-role="th">winner</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>29</td>
<td>227</td>
<td>00758566</td>
<td>0500000US29227</td>
<td>29227</td>
<td>Worth</td>
<td>06</td>
<td>690564983</td>
<td>493903</td>
<td>POLYGON ((-94.63203 40.57176, -94.53388 40.570...</td>
<td>...</td>
<td>0.363714</td>
<td>0.034072</td>
<td>0.602215</td>
<td>0.325382</td>
<td>0.041031</td>
<td>0.633588</td>
<td>0.186424</td>
<td>0.041109</td>
<td>0.772467</td>
<td>republican</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>31</td>
<td>061</td>
<td>00835852</td>
<td>0500000US31061</td>
<td>31061</td>
<td>Franklin</td>
<td>06</td>
<td>1491355860</td>
<td>487899</td>
<td>POLYGON ((-99.17940 40.35068, -98.72683 40.350...</td>
<td>...</td>
<td>0.284794</td>
<td>0.019974</td>
<td>0.695232</td>
<td>0.250000</td>
<td>0.026042</td>
<td>0.723958</td>
<td>0.149432</td>
<td>0.045427</td>
<td>0.805140</td>
<td>republican</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>36</td>
<td>013</td>
<td>00974105</td>
<td>0500000US36013</td>
<td>36013</td>
<td>Chautauqua</td>
<td>06</td>
<td>2746047476</td>
<td>1139407865</td>
<td>POLYGON ((-79.76195 42.26986, -79.62748 42.324...</td>
<td>...</td>
<td>0.495627</td>
<td>0.018104</td>
<td>0.486269</td>
<td>0.425017</td>
<td>0.115852</td>
<td>0.459131</td>
<td>0.352012</td>
<td>0.065439</td>
<td>0.582550</td>
<td>republican</td>
</tr>
</tbody>
</table>

<p>3 rows × 383 columns</p>
</div>
</div>
</div>
<p>La carte choroplèthe suivante permet de visualiser rapidement les résultats
(l’Alaska et Hawaï ont été exclus).</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># republican : red, democrat : blue</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>color_dict <span class="op">=</span> {<span class="st">'republican'</span>: <span class="st">'#FF0000'</span>, <span class="st">'democrats'</span>: <span class="st">'#0000FF'</span>}</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize <span class="op">=</span> (<span class="dv">12</span>,<span class="dv">12</span>))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>grouped <span class="op">=</span> votes.groupby(<span class="st">'winner'</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, group <span class="kw">in</span> grouped:</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    group.plot(ax<span class="op">=</span>ax, column<span class="op">=</span><span class="st">'winner'</span>, label<span class="op">=</span>key, color<span class="op">=</span>color_dict[key])</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>(-127.6146362, -64.0610978, 23.253819649999997, 50.628669349999996)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="0_preprocessing_files/figure-html/cell-5-output-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="0_preprocessing_files/figure-html/cell-5-output-2.png" width="912" height="500" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Les cartes choroplèthes peuvent donner une impression fallacieuse
ce qui exiplique que
ce type de carte a servi
de justification pour contester les résultats du vote.
En effet, un biais
connu des représentations choroplèthes est qu’elles donnent une importance
visuelle excessive aux grands espaces. Or, ceux-ci sont souvent des espaces
peu denses et influencent donc moins la variable d’intérêt (en l’occurrence
le taux de vote en faveur des républicains/démocrates). Une représentation à
privilégier pour ce type de phénomènes est les
ronds proportionnels (voir <span class="citation" data-cites="inseeSemiologie">Insee (<a href="#ref-inseeSemiologie" role="doc-biblioref">2018</a>)</span>, <em>“Le piège territorial en cartographie”</em>).</p>
<p>Le <a href="https://www.core77.com/posts/90771/A-Great-Example-of-Better-Data-Visualization-This-Voting-Map-GIF">GIF “Land does not vote, people do”</a>
qui avait eu un certain succès en 2020 propose un autre mode de visualisation.
La carte originale a probablement été construite avec <code>JavaScript</code>. Cependant,
on dispose avec <code>Python</code> de plusieurs outils
pour répliquer, à faible coût, cette carte
grâce à
l’une des surcouches à JavaScript vue dans la partie <a href="#visualisation">visualisation</a>.</p>
<p>En l’occurrence, on peut utiliser <code>plotly</code> pour tenir compte de la population:</p>
<p></p>
<p>La Figure a été obtenue avec le code suivant :</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>centroids <span class="op">=</span> votes.copy()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>centroids.geometry <span class="op">=</span> centroids.centroid</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>centroids[<span class="st">'size'</span>] <span class="op">=</span> centroids[<span class="st">'CENSUS_2010_POP'</span>] <span class="op">/</span> <span class="dv">10000</span>  <span class="co"># to get reasonable plotable number</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>color_dict <span class="op">=</span> {<span class="st">"republican"</span>: <span class="st">'#FF0000'</span>, <span class="st">'democrats'</span>: <span class="st">'#0000FF'</span>}</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>centroids[<span class="st">"winner"</span>] <span class="op">=</span>  np.where(centroids[<span class="st">'votes_gop'</span>] <span class="op">&gt;</span> centroids[<span class="st">'votes_dem'</span>], <span class="st">'republican'</span>, <span class="st">'democrats'</span>) </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>centroids[<span class="st">'lon'</span>] <span class="op">=</span> centroids[<span class="st">'geometry'</span>].x</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>centroids[<span class="st">'lat'</span>] <span class="op">=</span> centroids[<span class="st">'geometry'</span>].y</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>centroids <span class="op">=</span> pd.DataFrame(centroids[[<span class="st">"county_name"</span>,<span class="st">'lon'</span>,<span class="st">'lat'</span>,<span class="st">'winner'</span>, <span class="st">'CENSUS_2010_POP'</span>,<span class="st">"state_name"</span>]])</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>groups <span class="op">=</span> centroids.groupby(<span class="st">'winner'</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> centroids.copy()</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'color'</span>] <span class="op">=</span> df[<span class="st">'winner'</span>].replace(color_dict)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'size'</span>] <span class="op">=</span> df[<span class="st">'CENSUS_2010_POP'</span>]<span class="op">/</span><span class="dv">6000</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'text'</span>] <span class="op">=</span> df[<span class="st">'CENSUS_2010_POP'</span>].astype(<span class="bu">int</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">'&lt;br&gt;Population: {:,} people'</span>.<span class="bu">format</span>(x))</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'hover'</span>] <span class="op">=</span> df[<span class="st">'county_name'</span>].astype(<span class="bu">str</span>) <span class="op">+</span>  df[<span class="st">'state_name'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">' (</span><span class="sc">{}</span><span class="st">) '</span>.<span class="bu">format</span>(x)) <span class="op">+</span> df[<span class="st">'text'</span>]</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>fig_plotly <span class="op">=</span> go.Figure(data<span class="op">=</span>go.Scattergeo(</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    locationmode <span class="op">=</span> <span class="st">'USA-states'</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    lon<span class="op">=</span>df[<span class="st">"lon"</span>], lat<span class="op">=</span>df[<span class="st">"lat"</span>],</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> df[<span class="st">"hover"</span>],</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    mode <span class="op">=</span> <span class="st">'markers'</span>,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    marker_color <span class="op">=</span> df[<span class="st">"color"</span>],</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    marker_size <span class="op">=</span> df[<span class="st">'size'</span>],</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    hoverinfo<span class="op">=</span><span class="st">"text"</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>fig_plotly.update_traces(</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  marker <span class="op">=</span> {<span class="st">'opacity'</span>: <span class="fl">0.5</span>, <span class="st">'line_color'</span>: <span class="st">'rgb(40,40,40)'</span>, <span class="st">'line_width'</span>: <span class="fl">0.5</span>, <span class="st">'sizemode'</span>: <span class="st">'area'</span>}</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>fig_plotly.update_layout(</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>        title_text <span class="op">=</span> <span class="st">"Reproduction of the </span><span class="ch">\"</span><span class="st">Acres don't vote, people do</span><span class="ch">\"</span><span class="st"> map &lt;br&gt;(Click legend to toggle traces)"</span>,</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>        showlegend <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>        geo <span class="op">=</span> {<span class="st">"scope"</span>: <span class="st">'usa'</span>, <span class="st">"landcolor"</span>: <span class="st">'rgb(217, 217, 217)'</span>}</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Les cercles proportionnels permettent ainsi à l’oeil de se concentrer sur les
zones les plus denses et non sur les grands espaces.</p>
</section>
<section id="explorer-la-structure-des-données" class="level2">
<h2 class="anchored" data-anchor-id="explorer-la-structure-des-données">Explorer la structure des données</h2>
<p>La première étape nécessaire à suivre avant de se lancer dans la modélisation
est de déterminer les variables à inclure dans le modèle.</p>
<p>Les fonctionnalités de <code>pandas</code> sont, à ce niveau, suffisantes pour explorer des structures simples.
Néanmoins, lorsqu’on est face à un jeu de données présentant de
nombreuses variables explicatives (<em>features</em> en machine learning, <em>covariates</em> en économétrie),
il est souvent judicieux d’avoir une première étape de sélection de variables,
ce que nous verrons par la suite dans la <a href="../../content/modelisation/4_featureselection.html">partie dédiée</a>.</p>
<p>Avant d’être en mesure de sélectionner le meilleur ensemble de variables explicatives,
nous allons en prendre un nombre restreint et arbitraire.
La première tâche est de représenter les relations entre les données,
notamment la relation des variables explicatives
à la variable dépendante (le score du parti républicain)
ainsi que les relations entre les variables explicatives.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 2 : Regarder les corrélations entre les variables</h3>
<ol type="1">
<li>Créer un DataFrame <code>df2</code> plus petit avec les variables <code>winner</code>, <code>votes_gop</code>, <code>Unemployment_rate_2019</code>,
<code>Median_Household_Income_2019</code>,
<code>Percent of adults with less than a high school diploma, 2015-19</code>,
<code>Percent of adults with a bachelor's degree or higher, 2015-19</code></li>
<li>Représenter grâce à un graphique la matrice de corrélation avec <code>heatmap</code> de <code>seaborn</code>.</li>
<li>Représenter une matrice de nuages de points des variables de la base <code>df2</code> avec <code>pd.plotting.scatter_matrix</code></li>
<li>(optionnel) Refaire ces figures avec <code>plotly</code> qui offre également la possibilité de faire une matrice de corrélation.</li>
</ol>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="0_preprocessing_files/figure-html/cell-9-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="0_preprocessing_files/figure-html/cell-9-output-1.png" width="956" height="828" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>La matrice construite avec <code>seaborn</code> (question 2) aura l’aspect suivant :</p>
<div class="cell" data-execution_count="9">
<div class="cell-output cell-output-display" data-execution_count="9">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="0_preprocessing_files/figure-html/cell-10-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="0_preprocessing_files/figure-html/cell-10-output-1.png" width="956" height="828" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Alors que celle construite directement avec <code>corr</code> de <code>pandas</code>
ressemblera plutôt à ce tableau :</p>
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="10">
<style type="text/css">
#T_b195d_row0_col0, #T_b195d_row1_col1, #T_b195d_row2_col2, #T_b195d_row3_col3, #T_b195d_row4_col4 {
  background-color: #b40426;
  color: #f1f1f1;
}
#T_b195d_row0_col1 {
  background-color: #8caffe;
  color: #000000;
}
#T_b195d_row0_col2 {
  background-color: #edd2c3;
  color: #000000;
}
#T_b195d_row0_col3 {
  background-color: #9fbfff;
  color: #000000;
}
#T_b195d_row0_col4 {
  background-color: #f2c9b4;
  color: #000000;
}
#T_b195d_row1_col0 {
  background-color: #4358cb;
  color: #f1f1f1;
}
#T_b195d_row1_col2, #T_b195d_row4_col1 {
  background-color: #4a63d3;
  color: #f1f1f1;
}
#T_b195d_row1_col3 {
  background-color: #f1ccb8;
  color: #000000;
}
#T_b195d_row1_col4 {
  background-color: #6a8bef;
  color: #f1f1f1;
}
#T_b195d_row2_col0 {
  background-color: #c5d6f2;
  color: #000000;
}
#T_b195d_row2_col1, #T_b195d_row3_col0, #T_b195d_row3_col2, #T_b195d_row3_col4, #T_b195d_row4_col3 {
  background-color: #3b4cc0;
  color: #f1f1f1;
}
#T_b195d_row2_col3 {
  background-color: #4961d2;
  color: #f1f1f1;
}
#T_b195d_row2_col4 {
  background-color: #e97a5f;
  color: #f1f1f1;
}
#T_b195d_row3_col1 {
  background-color: #ead5c9;
  color: #000000;
}
#T_b195d_row4_col0 {
  background-color: #cbd8ee;
  color: #000000;
}
#T_b195d_row4_col2 {
  background-color: #ec7f63;
  color: #f1f1f1;
}
</style>

<table id="T_b195d" data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_b195d_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">votes_gop</th>
<th id="T_b195d_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Unemployment_rate_2019</th>
<th id="T_b195d_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">Median_Household_Income_2019</th>
<th id="T_b195d_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">Percent of adults with less than a high school diploma, 2015-19</th>
<th id="T_b195d_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">Percent of adults with a bachelor's degree or higher, 2015-19</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_b195d_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">votes_gop</td>
<td id="T_b195d_row0_col0" class="data row0 col0">1.00</td>
<td id="T_b195d_row0_col1" class="data row0 col1">-0.08</td>
<td id="T_b195d_row0_col2" class="data row0 col2">0.35</td>
<td id="T_b195d_row0_col3" class="data row0 col3">-0.11</td>
<td id="T_b195d_row0_col4" class="data row0 col4">0.37</td>
</tr>
<tr class="even">
<td id="T_b195d_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">Unemployment_rate_2019</td>
<td id="T_b195d_row1_col0" class="data row1 col0">-0.08</td>
<td id="T_b195d_row1_col1" class="data row1 col1">1.00</td>
<td id="T_b195d_row1_col2" class="data row1 col2">-0.43</td>
<td id="T_b195d_row1_col3" class="data row1 col3">0.36</td>
<td id="T_b195d_row1_col4" class="data row1 col4">-0.36</td>
</tr>
<tr class="odd">
<td id="T_b195d_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">Median_Household_Income_2019</td>
<td id="T_b195d_row2_col0" class="data row2 col0">0.35</td>
<td id="T_b195d_row2_col1" class="data row2 col1">-0.43</td>
<td id="T_b195d_row2_col2" class="data row2 col2">1.00</td>
<td id="T_b195d_row2_col3" class="data row2 col3">-0.51</td>
<td id="T_b195d_row2_col4" class="data row2 col4">0.71</td>
</tr>
<tr class="even">
<td id="T_b195d_level0_row3" class="row_heading level0 row3" data-quarto-table-cell-role="th">Percent of adults with less than a high school diploma, 2015-19</td>
<td id="T_b195d_row3_col0" class="data row3 col0">-0.11</td>
<td id="T_b195d_row3_col1" class="data row3 col1">0.36</td>
<td id="T_b195d_row3_col2" class="data row3 col2">-0.51</td>
<td id="T_b195d_row3_col3" class="data row3 col3">1.00</td>
<td id="T_b195d_row3_col4" class="data row3 col4">-0.59</td>
</tr>
<tr class="odd">
<td id="T_b195d_level0_row4" class="row_heading level0 row4" data-quarto-table-cell-role="th">Percent of adults with a bachelor's degree or higher, 2015-19</td>
<td id="T_b195d_row4_col0" class="data row4 col0">0.37</td>
<td id="T_b195d_row4_col1" class="data row4 col1">-0.36</td>
<td id="T_b195d_row4_col2" class="data row4 col2">0.71</td>
<td id="T_b195d_row4_col3" class="data row4 col3">-0.59</td>
<td id="T_b195d_row4_col4" class="data row4 col4">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Le nuage de point obtenu à l’issue de la question 3 ressemblera à :</p>
<div class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="0_preprocessing_files/figure-html/cell-12-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="0_preprocessing_files/figure-html/cell-12-output-1.png" width="1211" height="1197" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>array([[&lt;Axes: xlabel='votes_gop', ylabel='votes_gop'&gt;,
        &lt;Axes: xlabel='Unemployment_rate_2019', ylabel='votes_gop'&gt;,
        &lt;Axes: xlabel='Median_Household_Income_2019', ylabel='votes_gop'&gt;,
        &lt;Axes: xlabel='Percent of adults with less than a high school diploma, 2015-19', ylabel='votes_gop'&gt;,
        &lt;Axes: xlabel="Percent of adults with a bachelor's degree or higher, 2015-19", ylabel='votes_gop'&gt;],
       [&lt;Axes: xlabel='votes_gop', ylabel='Unemployment_rate_2019'&gt;,
        &lt;Axes: xlabel='Unemployment_rate_2019', ylabel='Unemployment_rate_2019'&gt;,
        &lt;Axes: xlabel='Median_Household_Income_2019', ylabel='Unemployment_rate_2019'&gt;,
        &lt;Axes: xlabel='Percent of adults with less than a high school diploma, 2015-19', ylabel='Unemployment_rate_2019'&gt;,
        &lt;Axes: xlabel="Percent of adults with a bachelor's degree or higher, 2015-19", ylabel='Unemployment_rate_2019'&gt;],
       [&lt;Axes: xlabel='votes_gop', ylabel='Median_Household_Income_2019'&gt;,
        &lt;Axes: xlabel='Unemployment_rate_2019', ylabel='Median_Household_Income_2019'&gt;,
        &lt;Axes: xlabel='Median_Household_Income_2019', ylabel='Median_Household_Income_2019'&gt;,
        &lt;Axes: xlabel='Percent of adults with less than a high school diploma, 2015-19', ylabel='Median_Household_Income_2019'&gt;,
        &lt;Axes: xlabel="Percent of adults with a bachelor's degree or higher, 2015-19", ylabel='Median_Household_Income_2019'&gt;],
       [&lt;Axes: xlabel='votes_gop', ylabel='Percent of adults with less than a high school diploma, 2015-19'&gt;,
        &lt;Axes: xlabel='Unemployment_rate_2019', ylabel='Percent of adults with less than a high school diploma, 2015-19'&gt;,
        &lt;Axes: xlabel='Median_Household_Income_2019', ylabel='Percent of adults with less than a high school diploma, 2015-19'&gt;,
        &lt;Axes: xlabel='Percent of adults with less than a high school diploma, 2015-19', ylabel='Percent of adults with less than a high school diploma, 2015-19'&gt;,
        &lt;Axes: xlabel="Percent of adults with a bachelor's degree or higher, 2015-19", ylabel='Percent of adults with less than a high school diploma, 2015-19'&gt;],
       [&lt;Axes: xlabel='votes_gop', ylabel="Percent of adults with a bachelor's degree or higher, 2015-19"&gt;,
        &lt;Axes: xlabel='Unemployment_rate_2019', ylabel="Percent of adults with a bachelor's degree or higher, 2015-19"&gt;,
        &lt;Axes: xlabel='Median_Household_Income_2019', ylabel="Percent of adults with a bachelor's degree or higher, 2015-19"&gt;,
        &lt;Axes: xlabel='Percent of adults with less than a high school diploma, 2015-19', ylabel="Percent of adults with a bachelor's degree or higher, 2015-19"&gt;,
        &lt;Axes: xlabel="Percent of adults with a bachelor's degree or higher, 2015-19", ylabel="Percent of adults with a bachelor's degree or higher, 2015-19"&gt;]],
      dtype=object)</code></pre>
</div>
</div>
<p>Le résultat de la question 4 devrait, quant à lui,
ressembler au graphique suivant :</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour inclusion dans le site web</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>htmlsnip2.write_json(<span class="st">"scatter.json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p></p>
</section>
<section id="transformer-les-données" class="level2">
<h2 class="anchored" data-anchor-id="transformer-les-données">Transformer les données</h2>
<p>Les différences d’échelle ou de distribution entre les variables peuvent
diverger des hypothèses sous-jacentes dans les modèles.</p>
<p>Par exemple, dans le cadre
de la régression linéaire, les variables catégorielles ne sont pas traitées à la même
enseigne que les variables ayant valeur dans <span class="math inline">\(\mathbb{R}\)</span>. Une variable
discrète (prenant un nombre fini de valeurs) devra être transformées en suite de
variables 0/1 par rapport à une modalité de référence pour être en adéquation
avec les hypothèses de la régression linéaire.
On appelle ce type de transformation
<em>one-hot encoding</em>, sur lequel nous reviendrons. Il s’agit d’une transformation,
parmi d’autres, disponibles dans <code>scikit</code> pour mettre en adéquation un jeu de
données et des hypothèses mathématiques.</p>
<p>L’ensemble de ces tâches s’appelle le <em>preprocessing</em>. L’un des intérêts
d’utiliser <code>scikit</code> est qu’on peut considérer qu’une tâche de preprocessing
est une tâche d’apprentissage (on apprend des paramètres d’une structure
de données) qui est réutilisable pour un jeu de données à la structure
similaire:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="scikit_predict.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="scikit_predict.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Nous allons voir deux processus très classiques de <em>preprocessing</em> :</p>
<ol type="1">
<li><p>La <strong>standardisation</strong> transforme des données pour que la distribution empirique suive une loi <span class="math inline">\(\mathcal{N}(0,1)\)</span>.</p></li>
<li><p>La <strong>normalisation</strong> transforme les données de manière à obtenir une norme (<span class="math inline">\(\mathcal{l}_1\)</span> ou <span class="math inline">\(\mathcal{l}_2\)</span>) unitaire. Autrement dit, avec la norme adéquate, la somme des éléments est égale à 1.</p></li>
</ol>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-triangle-exclamation"></i> Warning</h3>
<p>Pour un statisticien,
le terme <code>normalization</code> dans le vocable <code>scikit</code> peut avoir un sens contre-intuitif.
On s’attendrait à ce que la normalisation consiste à transformer une variable de manière à ce que <span class="math inline">\(X \sim \mathcal{N}(0,1)\)</span>.
C’est, en fait, la <strong>standardisation</strong> en <code>scikit</code> qui fait cela.</p>
</div>
</div>
<section id="standardisation" class="level3">
<h3 class="anchored" data-anchor-id="standardisation">Standardisation</h3>
<p>La standardisation consiste à transformer des données pour que la distribution empirique suive une loi <span class="math inline">\(\mathcal{N}(0,1)\)</span>. Pour être performants, la plupart des modèles de machine learning nécessitent souvent d’avoir des données dans cette distribution.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 3: Standardisation</h3>
<ol type="1">
<li>Standardiser la variable <code>Median_Household_Income_2019</code> (ne pas écraser les valeurs !) et regarder l’histogramme avant/après normalisation.</li>
</ol>
<p><em>Note : On obtient bien une distribution centrée à zéro et on pourrait vérifier que la variance empirique soit bien égale à 1. On pourrait aussi vérifier que ceci est vrai également quand on transforme plusieurs colonnes à la fois.</em></p>
<ol start="2" type="1">
<li>Créer <code>scaler</code>, un <code>Transformer</code> que vous construisez sur les 1000 premières lignes de votre DataFrame <code>df2</code> à l’exception de la variable à expliquer <code>winner</code>. Vérifier la moyenne et l’écart-type de chaque colonne sur ces mêmes observations.</li>
</ol>
<p><em>Note : Les paramètres qui seront utilisés pour une standardisation ultérieure sont stockés dans les attributs <code>.mean_</code> et <code>.scale_</code></em></p>
<p>On peut voir ces attributs comme des paramètres entraînés sur un certain jeu de
données et qu’on peut réutiliser sur un autre, à condition que les
dimensions coïncident.</p>
<ol start="3" type="1">
<li>Appliquer <code>scaler</code> sur les autres lignes du DataFrame et comparer les distributions obtenues de la variable <code>Median_Household_Income_2019</code>.</li>
</ol>
<p><em>Note : Une fois appliqués à un autre <code>DataFrame</code>, on peut remarquer que la distribution n’est pas exactement centrée-réduite dans le <code>DataFrame</code> sur lequel les paramètres n’ont pas été estimés. C’est normal, l’échantillon initial n’était pas aléatoire, les moyennes et variances de cet échantillon n’ont pas de raison de coïncider avec les moments de l’échantillon complet.</em></p>
</div>
</div>
</section>
<section id="normalisation" class="level3">
<h3 class="anchored" data-anchor-id="normalisation">Normalisation</h3>
<p>La <strong>normalisation</strong> est l’action de transformer les données de manière
à obtenir une norme (<span class="math inline">\(\mathcal{l}_1\)</span> ou <span class="math inline">\(\mathcal{l}_2\)</span>) unitaire.
Autrement dit, avec la norme adéquate, la somme des éléments est égale à 1.
Par défaut, la norme est dans <span class="math inline">\(\mathcal{l}_2\)</span>.
Cette transformation est particulièrement utilisée en classification de texte ou pour effectuer du <em>clustering</em>.</p>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 4 : Normalisation</h3>
<ol type="1">
<li>Normaliser la variable <code>Median_Household_Income_2019</code> (ne pas écraser les valeurs !) et regarder l’histogramme avant/après normalisation.</li>
<li>Vérifier que la norme <span class="math inline">\(\mathcal{l}_2\)</span> est bien égale à 1.</li>
</ol>
</div>
</div>
<div class="cell markdown">
<div class="alert alert-danger" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-triangle-exclamation"></i> Warning</h3>
<p><code>preprocessing.Normalizer</code> n’accepte pas les valeurs manquantes, alors que <code>preprocessing.StandardScaler()</code> s’en accomode (dans la version <code>0.22</code> de scikit). Pour pouvoir aisément appliquer le <em>normalizer</em>, il faut</p>
<ul>
<li>retirer les valeurs manquantes du DataFrame avec la méthode <code>dropna</code>: <code>df.dropna(how = "any")</code>;</li>
<li>ou les imputer avec un modèle adéquat. <a href="https://scikit-learn.org/stable/modules/preprocessing.html#imputation-of-missing-values"><code>scikit</code> permet de le faire</a>.</li>
</ul>
</div>
</div>
</section>
<section id="encodage-des-valeurs-catégorielles" class="level3">
<h3 class="anchored" data-anchor-id="encodage-des-valeurs-catégorielles">Encodage des valeurs catégorielles</h3>
<p>Les données catégorielles doivent être recodées
sous forme de valeurs numériques pour être intégrés aux modèles de <em>machine learning</em>.
Cela peut être fait de plusieurs manières :</p>
<ul>
<li><p><code>LabelEncoder</code>: transforme un vecteur <code>["a","b","c"]</code> en vecteur numérique <code>[0,1,2]</code>.
Cette approche a l’inconvénient d’introduire un ordre dans les modalités, ce qui n’est pas toujours souhaitable</p></li>
<li><p><code>OrdinalEncoder</code>: une version généralisée du <code>LabelEncoder</code> qui a vocation à s’appliquer sur des matrices (<span class="math inline">\(X\)</span>),
alors que <code>LabelEncoder</code> s’applique plutôt à un vecteur (<span class="math inline">\(y\)</span>)</p></li>
<li><p><code>pandas.get_dummies</code> effectue une opération de <em>dummy expansion</em>.
Un vecteur de taille <em>n</em> avec <em>K</em> catégories sera transformé en matrice de taille <span class="math inline">\(n \times K\)</span>
pour lequel chaque colonne sera une variable <em>dummy</em> pour la modalité <em>k</em>.
Il y a ici <span class="math inline">\(K\)</span> modalités et il y a donc multicolinéarité.
Avec une régression linéaire avec constante,
il convient de retirer une modalité avant l’estimation.</p></li>
<li><p><code>OneHotEncoder</code> est une version généralisée (et optimisée) de la <em>dummy expansion</em>.
Il a plutôt vocation à s’appliquer sur les <em>features</em> (<span class="math inline">\(X\)</span>) du modèle</p></li>
</ul>
<div class="cell markdown">
<div class="alert alert-success" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-pencil"></i> Exercice 5 : Encoder des variables catégorielles</h3>
<ol type="1">
<li><p>Créer <code>df</code> qui conserve uniquement les variables <code>state_name</code> et <code>county_name</code> dans <code>votes</code>.</p></li>
<li><p>Appliquer à <code>state_name</code> un <code>LabelEncoder</code>
<em>Note : Le résultat du label encoding est relativement intuitif, notamment quand on le met en relation avec le vecteur initial.</em></p></li>
<li><p>Regarder la <em>dummy expansion</em> de <code>state_name</code></p></li>
<li><p>Appliquer un <code>OrdinalEncoder</code> à <code>df[['state_name', 'county_name']]</code>
<em>Note : Le résultat du <em>ordinal encoding</em> est cohérent avec celui du label encoding</em></p></li>
<li><p>Appliquer un <code>OneHotEncoder</code> à <code>df[['state_name', 'county_name']]</code></p></li>
</ol>
<p><em>Note : <code>scikit</code> optimise l’objet nécessaire pour stocker le résultat d’un modèle de transformation. Par exemple, le résultat de l’encoding One Hot est un objet très volumineux. Dans ce cas, <code>scikit</code> utilise une matrice Sparse.</em></p>
</div>
</div>
</section>
</section>
<section id="références" class="level2">
<h2 class="anchored" data-anchor-id="références">Références</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-inseeSemiologie" class="csl-entry" role="listitem">
Insee. 2018. <span>“Guide de Sémiologie Cartographique.”</span>
</div>
</div>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@book{galiana2023,
  author = {Galiana, Lino},
  title = {Python Pour La Data Science},
  date = {2023},
  url = {https://pythonds.linogaliana.fr/},
  doi = {10.5281/zenodo.8229676},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-galiana2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Galiana, Lino. 2023. <em>Python Pour La Data Science</em>. <a href="https://doi.org/10.5281/zenodo.8229676">https://doi.org/10.5281/zenodo.8229676</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="linogaliana/python-datascientist" data-repo-id="MDEwOlJlcG9zaXRvcnkyODAxNjE2Nzc=" data-category="General" data-category-id="DIC_kwDOELLtjc4B-5TX" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/modelisation/index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/modelisation/1_modelevaluation.html" class="pagination-link">
        <span class="nav-page-text">Evaluer la qualité d’un modèle</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Python pour la <em>data science</em>, Lino Galiana.<br>
Licence <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i><br>
Code source disponible sur <a href="https://github.com/linogaliana/python-datascientist"><code>Github</code></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Site construit avec <i class="fa-brands fa-python" aria-label="python"></i> et <a href="https://quarto.org/"><code>Quarto</code></a><br>
Inspiration pour la mise en forme du site <a href="https://www.andreashandel.com">ici</a><br>
<a href="https://github.com/linogaliana/python-datascientist">Code source disponible sur <i class="fa-brands fa-github" aria-label="github"></i> <code>GitHub</code></a></div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","descPosition":"bottom","openEffect":"zoom","loop":true,"closeEffect":"zoom"});</script>



</body></html>