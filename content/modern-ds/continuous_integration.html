<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">
<meta name="dcterms.date" content="2020-07-22">
<meta name="description" content="Un chapitre plus avancé sur l’intégration continue">

<title>Python pour la data science - Intégration continue avec Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/modern-ds/dallE.html" rel="next">
<link href="../../content/modern-ds/index.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #e9f3fa;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Python pour la data science - Intégration continue avec Python">
<meta name="twitter:description" content="Un chapitre plus avancé sur l’intégration continue">
<meta name="twitter:image" content="https://ensae-reproductibilite.github.io/website/cards/deployment/whale.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="citation_title" content="Python pour la data science">
<meta name="citation_author" content="Lino Galiana">
<meta name="citation_publication_date" content="2023">
<meta name="citation_cover_date" content="2023">
<meta name="citation_year" content="2023">
<meta name="citation_online_date" content="2020-07-22">
<meta name="citation_fulltext_html_url" content="https://pythonds.linogaliana.fr/">
<meta name="citation_doi" content="10.5281/zenodo.8229676">
<meta name="citation_language" content="en">
</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Python pour la data science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="../../content/getting-started/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/01_installation.html" rel="" target="">
 <span class="dropdown-text">Configuration de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/02_DS_environment.html" rel="" target="">
 <span class="dropdown-text">L’environnement Python pour la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/03_data_analysis.html" rel="" target="">
 <span class="dropdown-text">Comment aborder un jeu de données</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/04_python_practice.html" rel="" target="">
 <span class="dropdown-text">Bonne pratique de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/05_rappels_types.html" rel="" target="">
 <span class="dropdown-text">Quelques rappels sur les principes de base de Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/06_rappels_fonctions.html" rel="" target="">
 <span class="dropdown-text">Modules, tests, boucles, fonctions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/getting-started/07_rappels_classes.html" rel="" target="">
 <span class="dropdown-text">Les classes en Python</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manipuler" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Manipuler</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-manipuler">    
        <li>
    <a class="dropdown-item" href="../../content/manipulation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/01_numpy.html" rel="" target="">
 <span class="dropdown-text">Numpy, la brique de base de la data science</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02a_pandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Introduction à Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/02b_pandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de pandas : un exemple complet</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_tutorial.html" rel="" target="">
 <span class="dropdown-text">Données spatiales : découverte de geopandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/03_geopandas_TP.html" rel="" target="">
 <span class="dropdown-text">Pratique de geopandas avec les données vélib</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04a_webscraping_TP.html" rel="" target="">
 <span class="dropdown-text">Webscraping avec python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04c_API_TP.html" rel="" target="">
 <span class="dropdown-text">Récupérer des données avec des API depuis Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/04b_regex_TP.html" rel="" target="">
 <span class="dropdown-text">Maîtriser les expressions régulières</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/manipulation/07_dask.html" rel="" target="">
 <span class="dropdown-text">Introduction à dask grâce aux données DVF</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-communiquer" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Communiquer</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-communiquer">    
        <li>
    <a class="dropdown-item" href="../../content/visualisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/matplotlib.html" rel="" target="">
 <span class="dropdown-text">De beaux graphiques avec python: mise en pratique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/visualisation/maps.html" rel="" target="">
 <span class="dropdown-text">De belles cartes avec python: mise en pratique</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-modéliser" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Modéliser</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-modéliser">    
        <li>
    <a class="dropdown-item" href="../../content/modelisation/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/0_preprocessing.html" rel="" target="">
 <span class="dropdown-text">Préparation des données pour construire un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/1_modelevaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluer la qualité d’un modèle</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/2_SVM.html" rel="" target="">
 <span class="dropdown-text">Classification: premier modèle avec les SVM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/3_regression.html" rel="" target="">
 <span class="dropdown-text">Régression : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/4_featureselection.html" rel="" target="">
 <span class="dropdown-text">Sélection de variables : une introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/5_clustering.html" rel="" target="">
 <span class="dropdown-text">Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modelisation/6_pipeline.html" rel="" target="">
 <span class="dropdown-text">Premier pas vers l’industrialisation avec les pipelines scikit</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-approfondissements" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Approfondissements</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-approfondissements">    
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/continuous_integration.html" rel="" target="">
 <span class="dropdown-text">Intégration continue avec Python</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/dallE.html" rel="" target="">
 <span class="dropdown-text">Génération d’images avec Python, DALL-E et StableDiffusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/s3.html" rel="" target="">
 <span class="dropdown-text">Les nouveaux modes d’accès aux données : le format parquet et les données sur le cloud</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_approfondissement.html" rel="" target="">
 <span class="dropdown-text">Approfondissement ElasticSearch pour des recherches de proximité géographique</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/modern-ds/elastic_intro.html" rel="" target="">
 <span class="dropdown-text">Introduction à ElasticSearch pour la recherche textuelle</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-git" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Git</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-git">    
        <li>
    <a class="dropdown-item" href="../../content/git/index.html" rel="" target="">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/introgit.html" rel="" target="">
 <span class="dropdown-text">Git : un élément essentiel au quotidien</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/git/exogit.html" rel="" target="">
 <span class="dropdown-text">Un cadavre exquis pour découvrir Git</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-annexes" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Annexes</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-annexes">    
        <li>
    <a class="dropdown-item" href="../../content/annexes/evaluation.html" rel="" target="">
 <span class="dropdown-text">Evaluation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/annexes/corrections.html" rel="" target="">
 <span class="dropdown-text">Corrections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://linogaliana.github.io/python-datascientist-slides/#/title-slide" rel="" target="">
 <span class="dropdown-text">Slides de présentation</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools ms-auto-item" href="https://github.com/linogaliana/python-datascientist">
            Code source
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/modern-ds/continuous_integration.html">Intégration continue avec Python</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns">
                <div id="title-block-header-title" class="quarto-title page-columns page-full page-layout-full featured-image p-4" style="background-image: url(https://ensae-reproductibilite.github.io/website/cards/deployment/whale.png);">
                <h1 class="title">Intégration continue avec Python</h1>
                        </div>
        
                <div>
          <div id="title-block-title-desc" class="description pt-4">
            Un chapitre plus avancé sur l’intégration continue
          </div>
        </div>
                
        
        <div class="quarto-title-meta">

            <div>
            <div class="quarto-title-meta-heading">Author</div>
            <div class="quarto-title-meta-contents">
                     <p>Lino Galiana </p>
                  </div>
          </div>
            
            <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">July 22, 2020</p>
            </div>
          </div>
          
            
          </div>
          
        
        
        

        </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modern-ds/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modern-ds/continuous_integration.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Intégration continue avec Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modern-ds/dallE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Génération d’images avec Python, DALL-E et StableDiffusion</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modern-ds/s3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Les nouveaux modes d’accès aux données : le format parquet et les données sur le cloud</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modern-ds/elastic_approfondissement.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Approfondissement ElasticSearch pour des recherches de proximité géographique</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/modern-ds/elastic_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction à ElasticSearch pour la recherche textuelle</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lintégration-continue-une-opportunité-pour-les-data-scientists" id="toc-lintégration-continue-une-opportunité-pour-les-data-scientists" class="nav-link active" data-scroll-target="#lintégration-continue-une-opportunité-pour-les-data-scientists">L’intégration continue: une opportunité pour les <em>data scientists</em></a></li>
  <li><a href="#lintégration-continue-en-pratique" id="toc-lintégration-continue-en-pratique" class="nav-link" data-scroll-target="#lintégration-continue-en-pratique">L’intégration continue en pratique</a></li>
  <li><a href="#comment-fonctionne-lintégration-continue" id="toc-comment-fonctionne-lintégration-continue" class="nav-link" data-scroll-target="#comment-fonctionne-lintégration-continue">Comment fonctionne l’intégration continue ?</a>
  <ul class="collapse">
  <li><a href="#fonctionnement-des-actions-github" id="toc-fonctionnement-des-actions-github" class="nav-link" data-scroll-target="#fonctionnement-des-actions-github">Fonctionnement des actions Github</a></li>
  <li><a href="#intégration-continue-avec-python-tester-un-notebook" id="toc-intégration-continue-avec-python-tester-un-notebook" class="nav-link" data-scroll-target="#intégration-continue-avec-python-tester-un-notebook">Intégration continue avec <code>Python</code>: tester un notebook</a>
  <ul class="collapse">
  <li><a href="#lister-les-dépendances" id="toc-lister-les-dépendances" class="nav-link" data-scroll-target="#lister-les-dépendances">Lister les dépendances</a></li>
  <li><a href="#créer-un-environnement-reproductible-dans-github-actions" id="toc-créer-un-environnement-reproductible-dans-github-actions" class="nav-link" data-scroll-target="#créer-un-environnement-reproductible-dans-github-actions">Créer un environnement reproductible dans Github Actions</a></li>
  <li><a href="#tester-un-notebook-myfile.ipynb" id="toc-tester-un-notebook-myfile.ipynb" class="nav-link" data-scroll-target="#tester-un-notebook-myfile.ipynb">Tester un notebook <code>myfile.ipynb</code></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#mettre-à-disposition-en-continu-des-valorisations-du-projet" id="toc-mettre-à-disposition-en-continu-des-valorisations-du-projet" class="nav-link" data-scroll-target="#mettre-à-disposition-en-continu-des-valorisations-du-projet">Mettre à disposition en continu des valorisations du projet</a>
  <ul class="collapse">
  <li><a href="#les-services-de-mise-à-disposition-de-github-et-gitlab" id="toc-les-services-de-mise-à-disposition-de-github-et-gitlab" class="nav-link" data-scroll-target="#les-services-de-mise-à-disposition-de-github-et-gitlab">Les services de mise à disposition de <code>Github</code> et <code>Gitlab</code></a></li>
  <li><a href="#les-services-externes-disponibles-sans-infrastructure-spéciale" id="toc-les-services-externes-disponibles-sans-infrastructure-spéciale" class="nav-link" data-scroll-target="#les-services-externes-disponibles-sans-infrastructure-spéciale">Les services externes disponibles sans infrastructure spéciale</a></li>
  <li><a href="#kubernetes-le-sommet-de-la-pente-du-déploiement" id="toc-kubernetes-le-sommet-de-la-pente-du-déploiement" class="nav-link" data-scroll-target="#kubernetes-le-sommet-de-la-pente-du-déploiement"><code>Kubernetes</code>: le sommet de la pente du déploiement</a></li>
  </ul></li>
  <li><a href="#références" id="toc-références" class="nav-link" data-scroll-target="#références">Références</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/linogaliana/python-datascientist/edit/master/content/modern-ds/continuous_integration.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/linogaliana/python-datascientist/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">

<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!-- source: https://raw.githubusercontent.com/spcanelon/silvia/32853dd0e70a71514b0922ee306f80ed5897f776/_partials/title-block-link-buttons/title-block.html -->
<!-- 
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title"> 
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->
    

<p><strong>Cette page sera actualisée prochainement, une version plus à jour et plus complète peut être trouvée sur <a href="https://ensae-reproductibilite.github.io/website/">https://ensae-reproductibilite.github.io/website/</a></strong></p>
<p>L’un des apports principaux des innovations
récentes de la <em>data science</em> est la
manière dont des projets, malgré
leur complexité, peuvent facilement
être converti en projets pérennes
à partir
d’un prototype bien construit.
En s’inspirant de l’approche <code>devops</code> ,
méthode de travail qui consiste à adopter un certain
nombre de gestes pour
automatiser la production de livrables ou de tests
dès la
conception du produit, les <em>data scientists</em>
ont adopté une méthode de travail très efficace
pour favoriser la réutilisation de leur travail
par d’autres équipes que celles à l’origine de
la conception du protype initial.</p>
<p>Cette approche <code>devops</code> a été reprise et étendue
pour donner un autre buzz-word, le <code>MLops</code>.
Il s’agit d’une approche qui vise à créer
et mettre à disposition des modèles de machine
learning de manière fiable et automatisée
à chaque nouvelle étape du projet, en parallèle
de la mise à jour du code ayant produit ces
output.</p>
<p>Ces nouvelles méthodes de travail permettent
des gains substantiels de productivité
pour les équipes développant des modèles
et réduit fortement le coût de reprise d’un
code par une équipe en charge de sa
pérenisation. Ce coût est en effet le principal
frein à la mise en production de nouveaux
projets ce qui peut représenter un gâchis
non négligeable de temps et de ressources.
Comme nous l’expliquons avec Romain Avouac
dans un cours de dernière année de l’ENSAE
(https://ensae-reproductibilite.github.io/website/),
l’adoption de certaines bonnes pratiques
de développement de code et d’une démarche
exploitant les dernières innovations de
la <em>data science</em> peut substantiellement
augmenter les chances d’un succès
d’un projet. Le nouveau paradigme, qui
consiste à intégrer en amont du projet
certaines contraintes de la production
et tester continuellement la manière dont les
livrables évoluent, évite que la mise
en production d’un projet, qui est coûteuse
en temps et en ressources, n’aboutisse qu’au
moment où le projet est déjà caduc
(car les données ou les besoins ont évolués…).</p>
<section id="lintégration-continue-une-opportunité-pour-les-data-scientists" class="level1">
<h1>L’intégration continue: une opportunité pour les <em>data scientists</em></h1>
<p>On retrouve régulièrement l’acronyme CI/CD
pour illustrer cette
nouvelle méthode de travail dans le
monde du développement logiciel :</p>
<ul>
<li><p>l’intégration continue (CI pour
<em>continuous integration</em>)
est une pratique consistant, de manière automatique,
à fréquemment tester les effets d’une modification faite à un code ou à un
document faisant parti d’un projet informatique.</p></li>
<li><p>le déploiement en continu (CD pour <em>continuous
delivery</em>) consiste à intégrer de manière automatisée
la production d’un ou plusieurs livrables (environnement
portable, application, site web, etc.) à chaque
modification du code associé à un projet informatique.</p></li>
</ul>
<p>Cette pratique permet ainsi de détecter de manière précoce des possibilités
de <em>bug</em> ou l’introduction d’un changement non anticipé. Tout comme <code>Git</code>,
cette pratique devient un standard dans les domaines collaboratifs.</p>
<p>L’intégration continue permet de sécuriser le travail, puisqu’elle offre un
filet de sécurité (par exemple un test sur une machine à la configuration
arbitraire), mais permet aussi de déployer en temps réel certaines
évolutions. On parle parfois de déploiement en continu, complémentaire de
l’intégration continue. Cette approche réduit ainsi
la muraille de Chine entre un
analyste de données et une équipe de développeurs d’application. Elle offre donc
plus de contrôle, pour le producteur d’une analyse statistique, sur la
valorisation de celle-ci.</p>
<p>Cette approche consiste une excellente opportunité
pour les <em>data scientists</em> d’être en mesure
de valoriser leurs projets auprès de publics aux
exigences différentes. Pour des développeurs, le
<em>data scientist</em> pourra fournir une image <code>Docker</code>
(environnement portable où l’ensemble des dépendances
et des configurations systèmes pour faire tourner un code
sont contrôlés) permettant à d’autres d’exécuter
facilement le code d’un projet. Pour faciliter
la réutilisation d’un modèle par d’autres <em>data scientists</em>,
il devient de plus en plus fréquent d’exposer
un modèle sous forme d’API: les personnes désirant
réutiliser le modèle peuvent directement l’appliquer
en accédant à une prédiction par le biais d’une API
ce qui évite d’avoir à fournir le jeu d’entraînement
si ce dernier est sensible. Pour toucher
des publics moins
familiers du code, la mise à disposition de sites web
interactifs valorisant certains résultats d’un projet
peut être intéressante. Cette approche très exigeante
d’utiliser un même projet pour toucher des cibles
très différentes est grandement facilitée par le
déploiement en continu et la mise à disposition
de librairies ou d’infrastructures
dédiées dans le monde de l’<em>open-source</em>.</p>
<p>Tout en restant éco-responsable (voir partie XXX), cela
permet de mieux valoriser des projets pour réduire
les coûts à le maintenir et le faire évoluer.
Le cours de dernière année de l’ENSAE que je développe
avec Romain Avouac (<a href="https://ensae-reproductibilite.github.io/website/">ensae-reproductibilite.github.io/</a>)
présente beaucoup plus de détails sur cette question.</p>
</section>
<section id="lintégration-continue-en-pratique" class="level1">
<h1>L’intégration continue en pratique</h1>
<p>L’intégration continue fonctionne très bien sur <code>Gitlab</code> et sur <code>Github</code>.
A chaque interaction avec le dépôt distant (<code>push</code>), une série d’instruction
définie par l’utilisateur est exécutée. <code>Python</code> et <code>R</code> s’intègrent très bien dans ce paradigme grâce
à un certain nombre d’images de base (concept sur lequel nous allons revenir)
qui peuvent être customisées pour répondre à une certaine configuration
nécessaire pour exécuter des codes.
C’est une méthode idéale pour améliorer la reproductibilité d’un projet: les
instructions exécutées le sont dans un environnement isolé et contrôlé, ce qui
diffère d’une machine personnelle.</p>
</section>
<section id="comment-fonctionne-lintégration-continue" class="level1">
<h1>Comment fonctionne l’intégration continue ?</h1>
<p>L’intégration continue repose sur le système de la <em>dockerisation</em> ou <em>conteneurisation</em>.
La technologie sous jacente s’appelle <code>Docker</code>.
Il s’agit d’une technologie qui permet la construction
de machines autosuffisantes
(que l’on nomme <strong>containeurs</strong>) répliquant un environnement
contrôlé (que l’on nomme <strong>image</strong>).</p>
<p>On parle de <em>pipelines</em> pour désigner une suite de tâches pour partir de 0
(généralement une machine <code>Linux</code> à la configuration minimale) et aboutir
à l’issue d’une série d’instructions définies par l’utilisateur.</p>
<p>L’objectif est de trouver une image la plus
parcimonieuse possible, c’est-à-dire à la configuration minimale, qui permet
de faire tourner le code voulu.
Les <a href="https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-python">Actions Github</a>
consistuent un modèle sur lequel il est facile
de s’appuyer lorsqu’on a des connaissances limitées
concernant `Docker.
Il est également très simple de construire son image
de rien, ce qui est la démarche choisie dans
l’autre cours de l’ENSAE que nous donnons avec Romain
Avouac (https://ensae-reproductibilite.github.io/website/).</p>
<p>Quand on utilise un dépôt <code>Github</code> <i class="fa-brands fa-github"></i>
ou <code>Gitlab</code> <i class="fa-brands fa-gitlab"></i>,
des services automatiques
d’intégration continue peuvent être utilisés:</p>
<ul>
<li><code>Gitlab CI</code>: solution pleinement intégrée à un dépôt <code>Gitlab</code>. Très généraliste
et permettant des <em>pipelines</em> très complexes
(<a href="https://gitlab.com/linogaliana/documentationR/-/blob/master/.gitlab-ci.yml">voir l’intégration continue du projet utilitR, une documentation pour R</a>).
Il est également possible de
l’utiliser avec un dépôt stocké sur <code>Github</code>. L’inconvénient de cette approche
est qu’elle est assez lente.</li>
<li><code>Github Actions</code>: c’est l’alternative (relativement récente) au service d’intégration continue de
Gitlab uniquement basée sur les technologies <code>Github</code>. La très forte
dynamique de développement a rendu ce service incontournable.
Un grand nombre de scripts pré-définis et paramétrables
facilitent l’entrée dans le monde de l’intégration
continue.</li>
</ul>
<p>Historiquement, il existait d’autres services d’intégration continue, notamment
<code>Travis CI</code> ou <code>AppVeyor</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<section id="fonctionnement-des-actions-github" class="level2">
<h2 class="anchored" data-anchor-id="fonctionnement-des-actions-github">Fonctionnement des actions Github</h2>
<p>Les actions <code>Github</code> fonctionnent par couches successives au sein desquelles
on effectue un certain nombre d’instructions.
La meilleure manière d’apprendre les actions <code>Github</code> est, certes, de <a href="https://docs.github.com/en/actions">lire la
documentation officielle</a> mais surtout,
à mon avis, de regarder quelques <em>pipelines</em> pour comprendre la démarche.</p>
<p>L’un des intérêts des <code>Github Actions</code> est la possibilité d’avoir un <em>pipeline</em>
proposant une intrication de langages différents pour avoir une chaine de
production qui propose les outils les plus efficaces pour répondre à un
objectif en limitant les verrous techniques.</p>
<p>Par exemple, le <em>pipeline</em> de ce cours, disponible
sur <code>Github</code> propose une intrication des langages
<code>Python</code> et <code>R</code> avec des technologies <code>Anaconda</code> (pour contrôler
l’environnement <code>Python</code> comme expliqué dans les chapitres précédents)
et <code>Javascript</code> (pour le déploiement d’un site web avec le service tiers
<code>Netlify</code>)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Cette chaîne de production multi-langage permet que
les mêmes fichiers sources génèrent un site web et des notebooks disponibles
sur plusieurs environnements.</p>
<div class="cell" data-execution_count="1">
<div class="cell-output cell-output-stdout">
<pre><code>name: Production deployment

on:
  push:
    branches:
      - main
      - master

jobs:
  pages:
    name: Render-Blog
    runs-on: ubuntu-latest
    container: linogaliana/python-datascientist:latest
    if: ${{ !github.event.pull_request.head.repo.fork }}
    steps:
      - uses: actions/checkout@v2
        with:
          #fetch-depth: 0
          ref: ${{ github.event.pull_request.head.ref }}
          repository: ${{github.event.pull_request.head.repo.full_name}}
      - name: Configure safe.directory  # Workaround for actions/checkout#760
        run: git config --global --add safe.directory /__w/python-datascientist/python-datascientist
      - shell: bash
        run: |
          conda info
          conda list
      - name: Render website
        run: |
          quarto render --to html
      - name: Publish to Pages
        run: |
          git config --global user.email quarto-github-actions-publish@example.com
          git config --global user.name "Quarto GHA Workflow Runner"
          quarto publish gh-pages . --no-render --no-browser
      - uses: actions/upload-artifact@v2
        with:
          name: Website
          path: public/
</code></pre>
</div>
</div>
<p>Les couches qui constituent les étapes du <em>pipeline</em>
portent ainsi le nom de <code>steps</code>. Un <em>step</em> peut comporter un certain
nombre d’instructions ou exécuter des instructions pré-définies.
L’une de ces instructions prédéfinies est, par exemple,
l’<a href="https://github.com/actions/setup-python">installation de Python</a>
ou l’<a href="https://github.com/marketplace/actions/setup-miniconda">initialisation d’un environnement conda</a>.
La documentation officielle de <code>Github</code> propose un
<a href="https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs-or-python?langId=py">fichier qui peut servir de modèle</a>
pour tester un script <code>Python</code> voire l’uploader de manière automatique
sur <code>Pypi</code>.</p>
</section>
<section id="intégration-continue-avec-python-tester-un-notebook" class="level2">
<h2 class="anchored" data-anchor-id="intégration-continue-avec-python-tester-un-notebook">Intégration continue avec <code>Python</code>: tester un notebook</h2>
<p>Cette section n’est absolument pas exhaustive. Au contraire, elle ne fournit
qu’un exemple minimal pour expliquer la logique de l’intégration continue. Il
ne s’agit ainsi pas d’une garantie absolue de reproductibilité d’un <em>notebook</em>.</p>
<p><code>Github</code> propose une action officielle pour utiliser <code>Python</code> dans un
<em>pipeline</em> d’intégration continue. Elle est disponible sur le
<a href="https://github.com/marketplace/actions/setup-python">MarketPlace Github</a>.
Il s’agit d’un bon point de départ, à enrichir.</p>
<p>Le fichier qui contrôle les instructions exécutées dans l’environnement <code>Actions</code>
doit se trouver dans le dossier <code>.github/workflows/</code>
(:warning: ne pas oublier le point au début du
nom du dossier). Il doit être au format <code>YAML</code> avec une extension <code>.yml</code>
ou <code>.yaml</code>.
Il peut avoir n’importe quel nom néanmoins il
vaut mieux lui donner un nom signifiant,
par exemple <code>prod.yml</code> pour un fichier contrôlant une chaîne de production.</p>
<section id="lister-les-dépendances" class="level3">
<h3 class="anchored" data-anchor-id="lister-les-dépendances">Lister les dépendances</h3>
<p>Avant d’écrire les instructions à exécuter par <code>Github</code>, il faut définir un
environnement d’exécution car <code>Github</code> ne connaît pas la configuration <code>Python</code>
dont vous avez besoin.</p>
<p>Il convient ainsi de lister les dépendances nécessaires dans un fichier
<code>requirements.txt</code> (si on utilise un environnement virtuel)
ou un fichier <code>environment.yml</code> (si on préfère
utiliser un environnement conda).
Bien que le principe sous-jacent soit légèrement différent,
ces fichiers ont la même fonction:
permettre la création d’un environnement <em>ex-nihilo</em>
avec un certain nombre de dépendances pré-installées<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>Si on fait le choix de l’option <code>environment.yml</code>,
le fichier prendra ainsi la forme
suivante, à enrichir en fonction de la
richesse de l’environnement souhaité. :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">channels</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> conda-forge</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dependencies</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> python&gt;=3.10</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> jupyter</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> jupytext</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> matplotlib</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> nbconvert</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> numpy</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> pandas</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> scipy</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> seaborn</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Le même fichier sous le format <code>requirements.txt</code> aura
la forme suivante :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>jupyter</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>jupytext</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>matplotlib</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>nbconvert</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>numpy</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>pandas</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>scipy</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>seaborn</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sous leur apparente équivalence, au-delà de
la question du formatage, ces fichiers ont
deux différences principales :</p>
<ul>
<li>la version minimale de <code>Python</code> est définie dans
le fichier <code>environment.yml</code> alors qu’elle ne l’est
pas dans un fichier <code>requirements.txt</code>. C’est
parce que le second installe les dépendances dans
un environnement déjà existant par ailleurs alors
que le premier peut servir à créer l’environnement
avec une certaine configuration de <code>Python</code> ;</li>
<li>le mode d’installation des <em>packages</em> n’est pas le
même. Avec un <code>environment.yml</code> on installera des
packages via conda alors qu’avec un <code>requirements.txt</code>
on privilégiera plutôt <code>pip</code><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</li>
</ul>
<p>Dans le cas de l’environnement <code>conda</code>,
le choix du <em>channel</em> <code>conda-forge</code> vise à contrôler le dépôt utilisé par
<code>Anaconda</code>.</p>
<div class="cell markdown">
<div class="alert alert-warning" role="alert">
<h3 class="alert-heading anchored"><i class="fa-solid fa-lightbulb"></i> Hint</h3>
<p>La <code>conda forge</code> est un dépôt de <em>package</em> alternatif
au canal par défaut d’Anaconda qui est maintenu par
l’équipe de développeurs officiels d’Anaconda.
Comme cette dernière cherche en priorité à
assurer la stabilité de l’écosystème <code>Anaconda</code>,
les versions de <em>package</em> évoluent moins vite
que le rythme voulu par les développeurs de
<em>packages</em>. Pour cette raison, un dépôt
alternatif, où les montées de version sont
plus simples parce qu’elles dépendent des
développeurs de chaque package, a émergé.
Il s’agit de la <code>conda forge</code>. Lorsqu’on
désire utiliser des fonctionalités récentes
de l’écosystème de la <em>data science</em>,
il est conseillé de l’utiliser.</p>
</div>
</div>
<p>Ne pas oublier de mettre ce fichier sous contrôle de version et de l’envoyer
sur le dépôt par un <code>push</code>.</p>
</section>
<section id="créer-un-environnement-reproductible-dans-github-actions" class="level3">
<h3 class="anchored" data-anchor-id="créer-un-environnement-reproductible-dans-github-actions">Créer un environnement reproductible dans Github Actions</h3>
<p>Deux approches sont possibles à ce niveau, selon le degré
de reproductibilité désiré<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>:</p>
<ul>
<li>Créer l’environnement via une action existante. L’action
<a href="https://github.com/conda-incubator/setup-miniconda"><code>conda-incubator/setup-miniconda@v2</code></a>
est un bon point de départ.</li>
<li>Créer l’environnement dans une image <code>Docker</code>.</li>
</ul>
<p>La deuxième solution permet de contrôler de manière
beaucoup plus fine l’environnement dans lequel
<code>Python</code> s’éxécutera ainsi que la manière dont
l’environnement sera créé<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>. Néanmoins, elle nécessite
des connaissances plus poussées dans la principe
de la conteneurisation qui peuvent être coûteuses
à acquérir. Selon l’ambition du projet, notamment
les réutilisation qu’il désire,
un <em>data scientist</em> pourra privilégier
telle ou telle option. Les deux solutions sont présentées
dans l’exemple fil-rouge du cours que nous
donnons avec Romain Avouac
(https://ensae-reproductibilite.github.io/website/application/).</p>
</section>
<section id="tester-un-notebook-myfile.ipynb" class="level3">
<h3 class="anchored" data-anchor-id="tester-un-notebook-myfile.ipynb">Tester un notebook <code>myfile.ipynb</code></h3>
<p>Dans cette partie, on va supposer que le <em>notebook</em> à tester s’appelle <code>myfile.ipynb</code>
et se trouve à la racine du dépôt. Les
dépendances pour l’exécuter sont
listées dans un fichier <code>requirements.txt</code>.</p>
<p>Le modèle suivant, expliqué en dessous, fournit un modèle de recette pour
tester un notebook. Supposons que ce fichier soit présent
dans un chemin <code>.github/workflows/test-notebook.yml</code></p>
<details>
<summary>
Environnement virtuel
</summary>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Test notebook execution using Github Actions</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">]</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">build-linux</span><span class="kw">:</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Set up Python 3.10</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v3</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'3.10'</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">shell</span><span class="kw">:</span><span class="at"> bash</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>        python --version</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install dependencies</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="at">        pip install -r requirements.txt</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="at">        pip install jupyter nbconvert</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test jupyter from command line</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="at">        jupyter nbconvert --execute --to notebook --inplace myfile.ipynb</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v3</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Notebook</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">path</span><span class="kw">:</span><span class="at"> myfile.ipynb</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">retention-days</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<details>
<summary>
Environnement conda
</summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Test notebook execution using Github Actions</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">push</span><span class="kw">]</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">build-linux</span><span class="kw">:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Set up Python 3.10</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-python@v3</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">python-version</span><span class="kw">:</span><span class="at"> </span><span class="st">'3.10'</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Add conda to system path</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        # $CONDA is an environment variable pointing to the root of the miniconda directory</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        echo $CONDA/bin &gt;&gt; $GITHUB_PATH</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install dependencies</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="fu">      run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        conda env update --file environment.yml --name base</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        conda install jupyter nbconvert</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Test jupyter from command line</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">run</span><span class="kw">:</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="at">        jupyter nbconvert --execute --to notebook --inplace myfile.ipynb</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v3</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Notebook</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">path</span><span class="kw">:</span><span class="at"> myfile.ipynb</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">retention-days</span><span class="kw">:</span><span class="at"> </span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p>Dans les deux cas, la démarche est la même:</p>
<ul>
<li>on récupère les fichiers présents dans le dépôt
(action <code>checkout</code>) ;</li>
<li>on installe <code>Python</code> ;</li>
<li>on installe les dépendances pour exécuter le code.
Dans l’approche <code>conda</code>, il est également nécessaire
de faire quelques configurations supplémentaires (notamment
ajouter <code>conda</code> aux logiciels reconnus par la ligne
de commande) ;</li>
<li>on teste le notebook en ligne de commande et remplace
celui existant, sur la machine temporaire, par la version
produite sur cet environnement neutre.</li>
<li>on rend possible le téléchargement du
notebook produit automatiquement pendant 5 jours<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>. Ceci
repose sur les <em>artefacts</em> qui sont un élément récupéré
des machines temporaires qui n’existent plus dès que le
code a fini d’être exécuté.</li>
</ul>
<p>Ces actions sont exécutées à chaque interaction avec
le dépôt distant (<code>push</code>), quelle que soit la
branche. A partir de ce modèle, il est possible de
raffiner pour, par exemple, automatiquement
faire un commit du notebook validé et le pusher
via le robot <code>Github</code><a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
</section>
</section>
</section>
<section id="mettre-à-disposition-en-continu-des-valorisations-du-projet" class="level1">
<h1>Mettre à disposition en continu des valorisations du projet</h1>
<p>Les projets de valorisation de données prennent des formes
très variées et s’adressent à des publics multiples dont
les attentes peuvent être très diverses.
Ne pas attendre la finalisation d’un projet pour mettre
en oeuvre certains livrables est une méthode efficace
pour ne pas se retrouver noyé, au dernier moment,
sous des demandes et de nouvelles contraintes.</p>
<p>La production en continu de livrables est donc une
méthode très prisée dans le monde de la donnée.
Les principaux fournisseurs de services
d’intégration continue, à commencer par
<code>Github</code> et <code>Gitlab</code> proposent des services
pour le déploiement en continu. Cependant,
ceux-ci ne sont adaptés qu’à certains types
de livrables, principalement la mise à disposition
de sites internet, et il peut être intéressant
d’utiliser des services externes ou une
infrastructures <code>Kubernetes</code> selon les
moyens à dispositon et les besoins des utilisateurs.</p>
<section id="les-services-de-mise-à-disposition-de-github-et-gitlab" class="level2">
<h2 class="anchored" data-anchor-id="les-services-de-mise-à-disposition-de-github-et-gitlab">Les services de mise à disposition de <code>Github</code> et <code>Gitlab</code></h2>
<p><code>Github</code> et <code>Gitlab</code>, les deux plateformes de partage
de code, proposent non seulement des services
gratuits d’intégration continue mais aussi des services
de mise à disposition de sites web pleinement intégrés
aux services de stockage de code.</p>
<p>Ces services, <code>Gitlab Pages</code> et <code>Github Pages</code>, auxquels
on peut associer le service externe <code>Netlify</code> qui répond
au même principe<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> permettent, à chaque modification
du code source d’un projet, de reconstruire le site web (le livrable)
qui peut être directement produit à partir de certains fichiers
(des slides <code>revealJS</code> par exemple) ou qui
sert d’output à l’intégration continue après compilation
de fichiers plus complexes (des fichiers <code>quarto</code> par exemple).</p>
<p>Chaque dépôt sur <code>Github</code> ou <code>Gitlab</code> peut ainsi être associé
à un URL de déploiement disponible sur internet. A chaque
<code>commit</code> sur le dépôt, le site <em>web</em> qui sert de livrable
est ainsi mis à jour. La version déployée à partir de la
branche principale peut ainsi être considérée
comme la version de production alors que les branches
secondaires peuvent servir d’espace bac à sable pour
vérifier que des changements dans le code source
ne mettent pas en péril le livrable. Cette méthode,
qui sécurise la production d’un livrable sous forme
de site <em>web</em>, est ainsi particulièrement appréciable.</p>
</section>
<section id="les-services-externes-disponibles-sans-infrastructure-spéciale" class="level2">
<h2 class="anchored" data-anchor-id="les-services-externes-disponibles-sans-infrastructure-spéciale">Les services externes disponibles sans infrastructure spéciale</h2>
<p>Pour fonctionner, l’intégration continue
nécessite de mettre en oeuvre des environnements normalisés.
Comme évoqué précédemment,
la technologie sous-jacente est celle de la conteneurisation.
Les images qui servent de point de départ au lancement
d’un conteneur sont elles-mêmes mises à disposition
dans des espaces communautaires (des registres d’images).
Il en existe plusieurs, les plus connus étant
le <code>dockerhub</code> ou le <code>registry</code> de <code>Gitlab</code>.
Ces registres servent d’espaces de stockage pour des images,
qui sont des objets volumineux (potentiellement plusieurs
Gigas) mais aussi d’espace de mutualisation en permettant
à d’autres de réutiliser une image prête à l’emploi ou,
au contraire, à partir de
laquelle on peut ajouter un certain nombre de couches
pour obtenir l’environnement minimal
de reproductibilité.
Il est possible d’utiliser certaines actions <code>Github</code>
prête à l’emploi pour constuire une image <code>Docker</code>
à partir d’un fichier <code>Dockerfile</code>. Après avoir
crée une connexion entre un compte sur la
plateforme <code>Github</code> et l’autre sur <code>DockerHub</code>,
une mise à disposition automatisée d’un livrable
sous forme d’image <code>Docker</code> est ainsi possible.</p>
<p>Une image <code>Docker</code> peut offrir une grande variété
d’<em>output</em>. Elle peut servir uniquement à
mettre à disposition un environnement de
reproductibilité mais elle peut servir à mettre
à disposition, pour les personnes maîtrisant
<code>Docker</code>, des <em>output</em> plus raffinés. Par exemple,
dans le cours que nous donnons à l’ENSAE, nous
montrons comment <code>docker</code> peut servir à
mettre à disposition à un utilisateur tiers
une application minimaliste (construite avec <code>flask</code>)
qu’il fera tourner
sur son ordinateur.</p>
<p>Si une image <code>Docker</code> peut être très utile pour la mise
à disposition, elle nécessite pour sa réutilisation
un niveau avancé d’expertise en programmation.
Cela ne conviendra pas à tous les publics. Certains
ne désireront que bénéficier d’une application interactive
où ils pourrons visualiser certains résultats en fonction
d’actions comme des filtres sur des sous-champs ou le choix
de certaines plages de données. D’autres publics seront
plutôt intéressé par la réutilisation d’un programme
ou des résultats d’un modèle sous forme d’API mais n’auront
pas l’infrastructure interne pour faire tourner le code
d’origine ou une image <code>Docker</code>. C’est pour répondre à ces
limites qu’il peut devenir intéressant, pour une équipe
de <em>data science</em> de développer une architecture
<code>kubernetes</code> interne, si l’organisation en a les moyens, ou
de payer un fournisseur de service, comme AWS, qui permet
cela.</p>
</section>
<section id="kubernetes-le-sommet-de-la-pente-du-déploiement" class="level2">
<h2 class="anchored" data-anchor-id="kubernetes-le-sommet-de-la-pente-du-déploiement"><code>Kubernetes</code>: le sommet de la pente du déploiement</h2>
<p><code>Kubernetes</code> est une technologie qui pousse la logique
de la conteneurisation à son paroxysme.
Il s’agit d’un système open-source, développé
par <code>Google</code>, permettant
d’automatiser le déploiement, la mise à l’échelle
et la gestion d’applications conteneurisées.
Grâce à Kubernetes, une application, par exemple
un site web proposant de la réactivité,
peut être mise à disposition et reporter les calculs,
lorsqu’ils sont nécessaires, sur
un serveur. L’utilisation de <code>Kubernetes</code> dans
un projet de <em>data science</em> permet ainsi
d’anticiper à la fois l’interface d’une application
valorisant un projet mais aussi le fonctionnement
du <em>back-office</em>, par exemple en testant la capacité
de charge de cette application. Une introduction
à <code>Kubernetes</code> orienté donnée peut être trouvée dans
le <a href="https://ensae-reproductibilite.github.io/website/">cours dédié à la mise en production</a>
que nous donnons avec Romain Avouac et dans ce
<a href="https://towardsdatascience.com/from-jupyter-to-kubernetes-refactoring-and-deploying-notebooks-using-open-source-tools-19f99585e923">post de blog</a> très bien fait.</p>
<p>Dans les grandes organisations, où les rôles sont
plus spécialisés que dans les petites structures,
ce ne sont pas nécessairement les <em>data scientists</em>
qui devront maîtriser <code>Kubernetes</code> mais plutôt
les <em>data-architect</em> ou les <em>data-engineer</em>. Néanmoins,
les <em>data scientists</em> devront être capable de
dialoguer avec eux et mettre en oeuvre une méthode
de travail adaptée (celle-ci reposera en principe sur
l’approche CI/CD). Dans les petites structures, les
<em>data scientist</em> peuvent être en mesure
de mettre en oeuvre le déploiement en continu. En
revanche, il est plus rare, dans ces structures,
où les moyens humains de maintenance sont limités,
que les serveurs sur lesquels fonctionnent <code>Kubernetes</code>
soient détenus en propres. En général, ils sont loués
dans des services de paiement à la demande de type
AWS.</p>
</section>
</section>
<section id="références" class="level1">
<h1>Références</h1>
<ul>
<li>https://ensae-reproductibilite.github.io/website/</li>
<li>https://towardsdatascience.com/from-jupyter-to-kubernetes-refactoring-and-deploying-notebooks-using-open-source-tools-19f99585e923</li>
</ul>


</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Ces services d’intégration continue étaient utilisés lorsque <code>Github</code>
ne proposait pas encore de service intégré, comme le faisait <code>Gitlab</code>.
Ils sont de moins en moins fréquemment utilisés.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Pour réduire le temps nécessaire pour construire le site <em>web</em>, ce
<em>pipeline</em> s’appuie sur un environnement <code>Docker</code> construit sur un autre dépôt
disponible également sur <code>Github</code>
<a href="https://github.com/linogaliana/python-datascientist-docker/blob/master/.github/workflows/prod.yml" class="github"><i class="fab fa-github"></i></a>.
Celui-ci part d’une configuration système <code>Linux</code> et construit un environnement
<code>Anaconda</code> à partir d’un fichier <code>environment.yml</code> qui liste toutes les dépendances
nécessaires pour exécuter les morceaux de code du site <em>web</em>.
Cet environnement <code>Anaconda</code> est construit grâce à l’outil <code>mamba</code> qui permet
d’aller beaucoup plus vite dans la constitution d’environnements que ne le
permet <code>conda</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Sur la différence entre les environnements virtuels
et les environnements conda, voir
<a href="https://ensae-reproductibilite.github.io/website/portability/#les-environnements-virtuels-">cette partie</a> de cours
plus avancé que nous donnons
avec Romain Avouac sur la mise en production
de projets <em>data science</em>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Il est possible d’installer une partie des <em>packages</em>
avec <code>pip</code> en définissant un champ <code>pip</code> dans le
fichier <code>environment.yml</code>. Néanmoins, les concepteurs
d’Anaconda recommandent d’être prudent avec cette méthode
qui présente certes l’avantage d’accélérer le temps de
création de l’environnement mais peut créer des
difficultés avec des librairies nécessitant d’autres
langages système comme le <code>C</code>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Le point de vue que nous défendons avec
Romain Avouac dans notre cours sur la reproductibilité
est qu’il s’agit d’un <em>continuum</em> dans lequel on investit
plus ou moins en fonction de ses contraintes, de ses
besoins, de ses compétences, du temps humain qu’on
peut dédier à développer des output reproductibles
et le temps gagné en développant une telle approche.
Selon où on se trouve sur ce cursus, en fonction
des solutions déjà existantes qu’on peut trouver
sur internet, on va plus ou moins raffiner
notre intégration et nos déploiements
continus.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Il est recommandé de ne pas garder la période de rétention
des artefacts par défaut car celle-ci est assez longue (90 jours).
Les <em>output</em> pouvant être assez volumineux et expirant rapidement
(en général ce qui nous intéresse est la dernière ou l’avant
dernière version de l’_output), pour des raisons écologiques,
il est recommandé de fixer des périodes courtes. Cela peut être
fait directement dans le fichier configurant l’intégration
continue comme ici ou dans les paramètres par défaut
du dépôt pour que cette règle s’applique à toutes les
productions faites par intégration continue.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Il est recommandé de ne pas garder la période de rétention
des artefacts par défaut car celle-ci est assez longue (90 jours).
Les <em>output</em> pouvant être assez volumineux et expirant rapidement
(en général ce qui nous intéresse est la dernière ou l’avant
dernière version de l’_output), pour des raisons écologiques,
il est recommandé de fixer des périodes courtes. Cela peut être
fait directement dans le fichier configurant l’intégration
continue comme ici ou dans les paramètres par défaut
du dépôt pour que cette règle s’applique à toutes les
productions faites par intégration continue.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Il s’agit du service utilisé, par exemple,
pour ce cours. <code>Netlify</code> est un service de mise à disposition
qui offre des fonctionalités plus complètes que celles
permises par <code>Gitlab Pages</code> et <code>Github Pages</code>. Outre cet
avantage, il est plus facile à configurer que <code>Github Pages</code>
qui nécessite l’usage d’une branche dédiée nommée <code>gh-pages</code>,
ce qui peut
rebutant.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Il s’agit du service utilisé, par exemple,
pour ce cours. <code>Netlify</code> est un service de mise à disposition
qui offre des fonctionalités plus complètes que celles
permises par <code>Gitlab Pages</code> et <code>Github Pages</code>. Outre cet
avantage, il est plus facile à configurer que <code>Github Pages</code>
qui nécessite l’usage d’une branche dédiée nommée <code>gh-pages</code>,
ce qui peut
rebutant.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@book{galiana2023,
  author = {Galiana, Lino},
  title = {Python Pour La Data Science},
  date = {2023},
  url = {https://pythonds.linogaliana.fr/},
  doi = {10.5281/zenodo.8229676},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-galiana2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Galiana, Lino. 2023. <em>Python Pour La Data Science</em>. <a href="https://doi.org/10.5281/zenodo.8229676">https://doi.org/10.5281/zenodo.8229676</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="linogaliana/python-datascientist" data-repo-id="MDEwOlJlcG9zaXRvcnkyODAxNjE2Nzc=" data-category="General" data-category-id="DIC_kwDOELLtjc4B-5TX" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>

<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/modern-ds/index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/modern-ds/dallE.html" class="pagination-link">
        <span class="nav-page-text">Génération d’images avec Python, DALL-E et StableDiffusion</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Python pour la <em>data science</em>, Lino Galiana.<br>
Licence <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i><br>
Code source disponible sur <a href="https://github.com/linogaliana/python-datascientist"><code>Github</code></a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Site construit avec <i class="fa-brands fa-python" aria-label="python"></i> et <a href="https://quarto.org/"><code>Quarto</code></a><br>
Inspiration pour la mise en forme du site <a href="https://www.andreashandel.com">ici</a><br>
<a href="https://github.com/linogaliana/python-datascientist">Code source disponible sur <i class="fa-brands fa-github" aria-label="github"></i> <code>GitHub</code></a></div>
  </div>
</footer>



</body></html>